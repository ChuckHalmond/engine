var main;(()=>{"use strict";var t={d:(e,r)=>{for(var a in r)t.o(r,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:r[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{t.r(e),t.d(e,{main:()=>Ye});const r=class{constructor(t){this._defaultCtor=t.defaultCtor,this._onDefaultOverride=t.onDefaultOverride,this._constructors=new Map}get defaultCtor(){return this._defaultCtor}overrideDefaultCtor(t){this._defaultCtor=t,this._onDefaultOverride(t)}forceQualifier(t){this._forcedQualifier=t}unforceQualifier(){delete this._forcedQualifier}getConstructor(t){const e=this._forcedQualifier||t;if(void 0===e)return this._defaultCtor;const r=this._constructors.get(e);if(void 0===r)throw new Error(`No constructor for qualifier ${e}`);return r}inject(t){const e=this.getConstructor(t?.qualifier);return t?.args?new e(...Array.from(t.args)):new e}register(t,e){this._constructors.has(e)||this._constructors.set(e,t)}};class a extends Error{constructor(){super(...arguments),this.name="MathError"}}class n{constructor(...t){if("number"==typeof t[0])this.array=new Float32Array([t[0],t[1]]);else if("object"==typeof t[0]){const e=t[0];if(e.length<2)throw new a("Array must be of length 2 at least.");e instanceof Float32Array?this.array=e:this.array=new Float32Array(e)}else this.array=new Float32Array([0,0])}get values(){return[this.array[0],this.array[1]]}set values(t){this.array[0]=t[0],this.array[1]=t[1]}get x(){return this.array[0]}set x(t){this.array[0]=t}get y(){return this.array[1]}set y(t){this.array[1]=t}setValues(t,e){const r=this.array;return r[0]=t,r[1]=e,this}equals(t){const e=t.array,r=this.array;return e[0]===r[0]&&e[1]===r[1]}copy(t){const e=this.array,r=t.array;return e[0]=r[0],e[1]=r[1],this}clone(){return new n(this.values)}setUnit(){const t=this.array;return t[0]=1,t[1]=1,this}setZeros(){const t=this.array;return t[0]=0,t[1]=0,this}add(t){const e=t.array,r=this.array;return r[0]=r[0]+e[0],r[1]=r[1]+e[1],this}addScalar(t){const e=this.array;return e[0]=e[0]+t,e[1]=e[1]+t,this}sub(t){const e=t.array,r=this.array;return r[0]=r[0]-e[0],r[1]=r[1]-e[1],this}lerp(t,e){const r=t.array,a=this.array;return a[0]=e*(r[0]-a[0]),a[1]=e*(r[1]-a[1]),this}clamp(t,e){const r=this.array,a=t.array,n=e.array;return r[0]=Math.min(n[0],Math.min(r[0],a[0])),r[1]=Math.min(n[1],Math.min(r[1],a[1])),this}multScalar(t){const e=this.array;return e[0]=e[0]*t,e[1]=e[1]*t,this}cross(t){const e=this.array,r=t.array;return e[0]*r[1]-e[1]*r[0]}dot(t){const e=this.array,r=t.array;return e[0]*r[0]+e[1]*r[1]}length(){const t=this.array;return Math.sqrt(t[0]*t[0]+t[1]*t[1])}lengthSquared(){const t=this.array;return t[0]*t[0]+t[1]*t[1]}dist(t){const e=this.array,r=t.array,a=e[0]-r[0],n=e[1]-r[1];return Math.sqrt(a*a+n*n)}distSquared(t){const e=this.array,r=t.array,a=e[0]-r[0],n=e[1]-r[1];return a*a+n*n}normalize(){const t=this.array,e=t[0]*t[0]+t[1]*t[1],r=Math.sqrt(e);return r>Number.EPSILON?(t[0]=t[0]/r,t[1]=t[1]/r):(t[0]=0,t[1]=0),this}negate(){const t=this.array;return t[0]=-t[0],t[1]=-t[1],this}mult(t){if(t instanceof s){const e=t.array;return this.array[0]=this.array[0]*e[0],this.array[1]=this.array[1]*e[1],this}{const e=this.x,r=this.y,a=t.array;return this.x=e*a[0]+r*a[2],this.y=e*a[1]+r*a[3],this}}addScaled(t,e){const r=t.array,a=this.array;return a[0]=a[0]+r[0]*e,a[1]=a[1]+r[1]*e,this}writeIntoArray(t,e=0){const r=this.array;t[e]=r[0],t[e+1]=r[1]}readFromArray(t,e=0){const r=this.array;return r[0]=t[e],r[1]=t[e+1],this}copyAndSub(t,e){const r=this.array,a=t.array,n=e.array;return r[0]=a[0]-n[0],r[1]=a[1]-n[1],this}}var s=n;new r({defaultCtor:n,onDefaultOverride:t=>{s=t}});class i{constructor(...t){if("number"==typeof t[0])this.array=new Float32Array([t[0],t[1],t[2]]);else if("object"==typeof t[0]){const e=t[0];if(e.length<3)throw new a("Array must be of length 3 at least.");e instanceof Float32Array?this.array=e:this.array=new Float32Array(e)}else this.array=new Float32Array([0,0,0])}toString(){return`Vector3([${Array.from(this.array).join(", ")}])`}static angle(t,e){const r=new c;return Math.acos(r.copy(t).dot(e)/(Math.sqrt(r.copy(t).dot(t))*Math.sqrt(r.copy(e).dot(e))))}get values(){return[this.array[0],this.array[1],this.array[2]]}set values(t){this.array[0]=t[0],this.array[1]=t[1],this.array[2]=t[2]}get x(){return this.array[0]}set x(t){this.array[0]=t}get y(){return this.array[1]}set y(t){this.array[1]=t}get z(){return this.array[2]}set z(t){this.array[2]=t}setValues(t,e,r){return this.array[0]=t,this.array[1]=e,this.array[2]=r,this}copy(t){const e=t.array;return this.array[0]=e[0],this.array[1]=e[1],this.array[2]=e[2],this}clone(){return new i(this.values)}equals(t){return t.array[0]===this.array[0]&&t.array[1]===this.array[1]&&t.array[2]===this.array[2]}setZeros(){return this.array[0]=0,this.array[1]=0,this.array[2]=0,this}setUnit(){return this.array[0]=1,this.array[1]=1,this.array[2]=1,this}add(t){return this.array[0]=this.array[0]+t.array[0],this.array[1]=this.array[1]+t.array[1],this.array[2]=this.array[2]+t.array[2],this}addScalar(t){return this.array[0]=this.array[0]+t,this.array[1]=this.array[1]+t,this.array[2]=this.array[2]+t,this}sub(t){return this.array[0]=this.array[0]-t.array[0],this.array[1]=this.array[1]-t.array[1],this.array[2]=this.array[2]-t.array[2],this}lerp(t,e,r){return this.array[0]=(1-r)*t.x+r*(e.x-t.x),this.array[1]=(1-r)*t.y+r*(e.y-t.y),this.array[2]=(1-r)*t.z+r*(e.z-t.z),this}max(t){return this.array[0]=Math.max(this.array[0],t.array[0]),this.array[1]=Math.max(this.array[1],t.array[1]),this.array[2]=Math.max(this.array[2],t.array[2]),this}min(t){return this.array[0]=Math.min(this.array[0],t.array[0]),this.array[1]=Math.min(this.array[1],t.array[1]),this.array[2]=Math.min(this.array[2],t.array[2]),this}clamp(t,e){return this.array[0]=Math.min(e.array[0],Math.max(this.array[0],t.array[0])),this.array[1]=Math.min(e.array[1],Math.max(this.array[1],t.array[1])),this.array[2]=Math.min(e.array[2],Math.max(this.array[2],t.array[2])),this}scale(t){return this.array[0]=this.array[0]*t,this.array[1]=this.array[1]*t,this.array[2]=this.array[2]*t,this}cross(t){const e=this.array[1]*t.array[2]-this.array[2]*t.array[1],r=this.array[2]*t.array[0]-this.array[0]*t.array[2],a=this.array[0]*t.array[1]-this.array[1]*t.array[0];return this.array[0]=e,this.array[1]=r,this.array[2]=a,this}dot(t){const e=this.array,r=t.array;return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]}length(){const t=this.array;return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}lengthSquared(){const t=this.array;return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}distance(t){const e=this.array,r=t.array,a=e[0]-r[0],n=e[1]-r[1],s=e[2]-r[2];return Math.hypot(a,n,s)}distanceSquared(t){const e=this.array,r=t.array,a=e[0]-r[0],n=e[1]-r[1],s=e[2]-r[2];return a*a+n*n+s*s}normalize(){const{array:t}=this,e=this.length();return e>Number.EPSILON?(t[0]/=e,t[1]/=e,t[2]/=e):(t[0]=0,t[1]=0,t[2]=0),this}negate(){const{array:t}=this;return t[0]*=-1,t[1]*=-1,t[2]*=-1,this}mult(t){const{array:e}=this;if(t instanceof c){const r=t.array;return e[0]=e[0]*r[0],e[1]=e[1]*r[1],e[2]=e[2]*r[2],this}{const[e,r,a]=this,n=t.array;return this.x=e*n[0]+r*n[3]+a*n[6],this.y=e*n[1]+r*n[4]+a*n[7],this.z=e*n[2]+r*n[5]+a*n[8],this}}toSpherical(t){const e=this.array,r=t.array,a=e[0]-r[0],n=e[1]-r[1],s=e[2]-r[2],i=Math.hypot(a,n,s),o=Math.acos(n/i),c=Math.atan2(s,a);return e[0]=i,e[1]=o,e[2]=c,this}toCartesian(t){const e=this.array,r=t.array,a=e[0],n=e[1],s=e[2],i=a*Math.sin(n)*Math.cos(s)+r[0],o=a*Math.cos(n)+r[1],c=a*Math.sin(n)*Math.sin(s)+r[2];return e[0]=i,e[1]=o,e[2]=c,this}static mult(t,e){const r=t.array,a=e.array;return new i([r[0]*a[0]+r[1]*a[1]+r[2]*a[2],r[3]*a[0]+r[4]*a[1]+r[5]*a[2],r[6]*a[0]+r[7]*a[1]+r[8]*a[2]])}writeIntoArray(t,e=0){const r=this.array;t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2]}readFromArray(t,e=0){return this.array[0]=t[e],this.array[1]=t[e+1],this.array[2]=t[e+2],this}addScaled(t,e){return this.array[0]=this.array[0]+t.array[0]*e,this.array[1]=this.array[1]+t.array[1]*e,this.array[2]=this.array[2]+t.array[2]*e,this}copyAndSub(t,e){const r=t.array,a=e.array;return this.array[0]=r[0]-a[0],this.array[1]=r[1]-a[1],this.array[2]=r[2]-a[2],this}copyAndCross(t,e){const r=t.array,a=e.array,n=r[1]*a[2]-r[2]*a[1],s=r[2]*a[0]-r[0]*a[2],i=r[0]*a[1]-r[1]*a[0];return this.array[0]=n,this.array[1]=s,this.array[2]=i,this}[Symbol.iterator](){const{array:t}=this,{length:e}=t;let r=0;return{next:()=>r<e?{value:t[r++],done:!1}:{value:void 0,done:!0}}}}var o,c=i;new r({defaultCtor:i,onDefaultOverride:t=>{c=t}});class h{constructor(){}}h.origin=new c([0,0,0]),h.right=new c([1,0,0]),h.left=new c([-1,0,0]),h.up=new c([0,1,0]),h.down=new c([0,-1,0]),h.forward=new c([0,0,1]),h.backward=new c([0,0,-1]),function(t){t.A="a",t.B="b",t.C="c",t.D="d",t.E="e",t.F="f",t.G="g",t.H="h",t.I="i",t.J="j",t.K="k",t.L="l",t.M="m",t.O="o",t.P="p",t.Q="q",t.R="r",t.S="s",t.T="t",t.U="u",t.V="v",t.W="w",t.X="x",t.Y="y",t.Z="z",t.ENTER="Enter",t.BACKSPACE="Backspace",t.ARROW_DOWN="ArrowDown",t.ARROW_LEFT="ArrowLeft",t.ARROW_RIGHT="ArrowRight",t.ARROW_UP="ArrowUp",t.SHIFT="Shift"}(o||(o={}));const l=Object.keys(o).length;var u,f;!function(t){t.Alt="Alt",t.Control="Control",t.Shift="Shift"}(u||(u={})),function(t){t[t.LEFT=0]="LEFT",t[t.WHEEL=1]="WHEEL",t[t.RIGHT=2]="RIGHT",t[t.FORWARD=3]="FORWARD",t[t.BACK=4]="BACK"}(f||(f={}));const E=Object.keys(f).length,y=Object.freeze(Object.values(f).reduce(((t,e,r)=>Object.assign(t,{[e]:r})),{})),A=Object.freeze(Object.values(o).reduce(((t,e,r)=>Object.assign(t,{[e]:r})),{}));var T,d=new class{constructor(){this.keyFlags=new Array(3*l).fill(!1),this.mouseFlags=new Array(3*E).fill(!1),this.pointerPosition=new s,this.wheelDelta=0,this.canvas=null,this.canvasRectangle=null}initialize(t){this.canvas=t,this.canvasRectangle=t.getBoundingClientRect(),t.addEventListener("pointerdown",this),t.addEventListener("pointerup",this),t.addEventListener("contextmenu",this),t.addEventListener("pointermove",this),t.addEventListener("wheel",this),t.addEventListener("keydown",this),t.addEventListener("keyup",this),t.addEventListener("focusout",this)}getCanvasRect(){const t=this.canvasRectangle;if(null===t)throw new Error("Input manager not initialized.");return t}clear(){this.keyFlags.fill(!1,0,2*l),this.mouseFlags.fill(!1,0,2*E),this.wheelDelta=0}handleEvent(t){let e=-1;switch(t.type){case"pointerdown":e=y[t.button],this.mouseFlags[1*E+e]=!0,this.mouseFlags[2*E+e]=!0;break;case"pointerup":e=y[t.button],this.mouseFlags[0*E+e]=!0,this.mouseFlags[2*E+e]=!1;break;case"pointermove":const r=this.getCanvasRect();this.pointerPosition.setValues(t.clientX-r.left,t.clientY-r.top);break;case"wheel":this.wheelDelta=t.deltaY/100;break;case"keydown":e=A[t.key],this.keyFlags[1*l+e]=!0,this.keyFlags[2*l+e]=!0;break;case"keyup":e=A[t.key],this.keyFlags[0*l+e]=!0,this.keyFlags[2*l+e]=!1;break;case"focusout":this.keyFlags.fill(!1),this.mouseFlags.fill(!1),this.wheelDelta=0,this.pointerPosition.setZeros()}}getKey(t){return this.keyFlags[2*l+A[t]]}getKeyUp(t){return this.keyFlags[0*l+A[t]]}getKeyDown(t){return this.keyFlags[1*l+A[t]]}getMouseButton(t){return this.mouseFlags[2*E+y[t]]}getPointerPosition(){return this.pointerPosition.clone()}getPointerScreenPosition(){const t=this.pointerPosition.array,e=this.getCanvasRect(),r=t[0]/e.width*2-1,a=t[1]/e.height*2-1;return new s([r,a])}getWheelDelta(){return this.wheelDelta}getMouseButtonDown(t){return this.mouseFlags[1*E+y[t]]}getMouseButtonUp(t){return this.mouseFlags[0*E+y[t]]}};const _=new c,m=new c,R=new c;T=new WeakMap;var g;!function(t){t[t.NO_AUTO_EXTEND=0]="NO_AUTO_EXTEND",t[t.AUTO_EXTEND_ONE=1]="AUTO_EXTEND_ONE",t[t.AUTO_EXTEND_POW2=2]="AUTO_EXTEND_POW2"}(g||(g={}));var p=class extends class{constructor(t,e){this.ctor=t,this.autoExtendPolicy=e||g.AUTO_EXTEND_ONE,this.autoExtendTicks=0}autoExtend(){switch(this.autoExtendPolicy){case g.AUTO_EXTEND_ONE:this.extend(1);break;case g.AUTO_EXTEND_POW2:this.extend(Math.pow(2,this.autoExtendTicks))}this.autoExtendTicks++}acquire(t){throw new Error("Not implemented")}release(...t){throw new Error("Not implemented")}extend(t){throw new Error("Not implemented")}clear(){throw new Error("Not implemented")}}{constructor(t,e){super(t,e?.policy),this.objects=new Array(e?.size||0).fill(0).map((()=>new this.ctor(e?.args))),this.top=0}acquire(t){const e=this.top,r=e+t;if(this.autoExtendPolicy)for(;this.objects.length<r;)this.autoExtend();return this.top=r,this.objects.slice(e,r)}release(t){const e=this.top;t>e&&console.warn("Releasing under zero."),this.top=Math.max(e-t,0)}extend(t){this.objects.push(...Array(t).fill(0).map((()=>new this.ctor)))}clear(){this.objects=[],this.top=0,this.autoExtendTicks=0}};Math.PI,Math.PI;const N=new ArrayBuffer(Float32Array.BYTES_PER_ELEMENT),I=new Float32Array(N),M=new Uint32Array(N);class w{constructor(...t){if("number"==typeof t[0])this.array=new Float32Array([t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]);else if("object"==typeof t[0]){const e=t[0];this.checkArray(e),e instanceof Float32Array?this.array=e:this.array=new Float32Array(e)}else this.array=new Float32Array([0,0,0,0,0,0,0,0,0])}get row1(){return[this.array[0],this.array[3],this.array[6]]}set row1(t){this.array[0]=t[0],this.array[3]=t[1],this.array[6]=t[2]}get row2(){return[this.array[1],this.array[4],this.array[7]]}set row2(t){this.array[1]=t[0],this.array[4]=t[1],this.array[7]=t[2]}get row3(){return[this.array[2],this.array[5],this.array[8]]}set row3(t){this.array[2]=t[0],this.array[5]=t[1],this.array[8]=t[2]}get col1(){return[this.array[0],this.array[1],this.array[2]]}set col1(t){this.array[0]=t[0],this.array[1]=t[1],this.array[2]=t[2]}get col2(){return[this.array[3],this.array[4],this.array[5]]}set col2(t){this.array[3]=t[0],this.array[4]=t[1],this.array[5]=t[2]}get col3(){return[this.array[6],this.array[7],this.array[8]]}set col3(t){this.array[6]=t[0],this.array[7]=t[1],this.array[8]=t[2]}get m11(){return this.array[0]}set m11(t){this.array[0]=t}get m12(){return this.array[3]}set m12(t){this.array[3]=t}get m13(){return this.array[6]}set m13(t){this.array[6]=t}get m21(){return this.array[1]}set m21(t){this.array[1]=t}get m22(){return this.array[4]}set m22(t){this.array[4]=t}get m23(){return this.array[7]}set m23(t){this.array[7]=t}get m31(){return this.array[2]}set m31(t){this.array[2]=t}get m32(){return this.array[5]}set m32(t){this.array[5]=t}get m33(){return this.array[8]}set m33(t){this.array[8]=t}checkArray(t){if(t.length<9)throw new a("Array must be of length 9 at least.")}getValues(){return[this.array[0],this.array[1],this.array[2],this.array[3],this.array[4],this.array[5],this.array[6],this.array[7],this.array[8]]}setValues(t,e,r,a,n,s,i,o,c){return this.array[0]=t,this.array[1]=e,this.array[2]=r,this.array[3]=a,this.array[4]=n,this.array[5]=s,this.array[6]=i,this.array[7]=o,this.array[8]=c,this}equals(t){const e=t.array;return this.array[0]===e[0]&&this.array[1]===e[1]&&this.array[2]===e[2]&&this.array[3]===e[3]&&this.array[4]===e[4]&&this.array[5]===e[5]&&this.array[6]===e[6]&&this.array[7]===e[7]&&this.array[8]===e[8]}copy(t){const e=this.array,r=t.array;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],this}clone(){return new w(this.array[0],this.array[1],this.array[2],this.array[3],this.array[4],this.array[5],this.array[6],this.array[7],this.array[8])}setIdentity(){const t=this.array;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this}setZeros(){const t=this.array;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,this}det(){const t=this.array;return t[0]*(t[4]*t[8]-t[5]*t[7])-t[1]*(t[3]*t[8]-t[5]*t[6])+t[2]*(t[3]*t[7]-t[4]*t[6])}trace(){const t=this.array;return t[0]+t[4]+t[8]}negate(){const t=this.array;return t[0]=-t[0],t[1]=-t[1],t[2]=-t[2],t[3]=-t[3],t[4]=-t[4],t[5]=-t[5],t[6]=-t[6],t[7]=-t[7],t[8]=-t[8],this}transpose(){const t=this.array;let e;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}invert(){const t=this.array,e=t[4]*t[8]-t[5]*t[7],r=t[1]*t[8]-t[2]*t[7],n=t[1]*t[5]-t[2]*t[4],s=t[3]*t[8]-t[5]*t[6],i=t[0]*t[8]-t[2]*t[6],o=t[0]*t[5]-t[2]*t[3],c=t[3]*t[7]-t[4]*t[6],h=t[0]*t[7]-t[1]*t[6],l=t[0]*t[4]-t[1]*t[3],u=1/(t[0]*e-t[3]*r+t[6]*n);if(0==u)throw new a("Matrix is not invertible.");return t[0]=u*e,t[1]=-u*r,t[2]=u*n,t[3]=-u*s,t[4]=u*i,t[5]=-u*o,t[6]=u*c,t[7]=-u*h,t[8]=u*l,this}add(t){const e=this.array,r=t.array;return e[0]=e[0]+r[0],e[1]=e[1]+r[1],e[2]=e[2]+r[2],e[3]=e[3]+r[3],e[4]=e[4]+r[4],e[5]=e[5]+r[5],e[6]=e[6]+r[6],e[7]=e[7]+r[7],e[8]=e[8]+r[8],this}sub(t){const e=this.array,r=t.array;return e[0]=e[0]-r[0],e[1]=e[1]-r[1],e[2]=e[2]-r[2],e[3]=e[3]-r[3],e[4]=e[4]-r[4],e[5]=e[5]-r[5],e[6]=e[6]-r[6],e[7]=e[7]-r[7],e[8]=e[8]-r[8],this}mult(t){const e=this.array,r=t.array,a=e[0],n=e[1],s=e[2],i=e[3],o=e[4],c=e[5],h=e[6],l=e[7],u=e[8],f=r[0],E=r[1],y=r[2],A=r[3],T=r[4],d=r[5],_=r[6],m=r[7],R=r[8];return e[0]=f*a+E*i+y*h,e[1]=f*n+E*o+y*l,e[2]=f*s+E*c+y*u,e[3]=A*a+T*i+d*h,e[4]=A*n+T*o+d*l,e[5]=A*s+T*c+d*u,e[6]=_*a+m*i+R*h,e[7]=_*n+m*o+R*l,e[8]=_*s+m*c+R*u,this}multScalar(t){const e=this.array;return e[0]=e[0]*t,e[1]=e[1]*t,e[2]=e[2]*t,e[3]=e[3]*t,e[4]=e[4]*t,e[5]=e[5]*t,e[6]=e[6]*t,e[7]=e[7]*t,e[8]=e[8]*t,this}writeIntoArray(t,e=0){const r=this.array;t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8]}readFromArray(t,e=0){const r=this.array;r[0]=t[e],r[1]=t[e+1],r[2]=t[e+2],r[3]=t[e+3],r[4]=t[e+4],r[5]=t[e+5],r[6]=t[e+6],r[7]=t[e+7],r[8]=t[e+8]}static rotationX(t){return(new w).setRotationX(t)}setRotationX(t){const e=Math.cos(t),r=Math.sin(t);return this.array[0]=1,this.array[1]=0,this.array[2]=0,this.array[3]=0,this.array[4]=e,this.array[5]=r,this.array[6]=0,this.array[7]=-r,this.array[8]=e,this}static rotationY(t){return(new w).setRotationY(t)}setRotationY(t){const e=Math.cos(t),r=Math.sin(t);return this.array[0]=e,this.array[1]=0,this.array[2]=-r,this.array[3]=0,this.array[4]=1,this.array[5]=0,this.array[6]=r,this.array[7]=0,this.array[8]=e,this}static rotationZ(t){return(new w).setRotationZ(t)}setRotationZ(t){const e=Math.cos(t),r=Math.sin(t);return this.array[0]=e,this.array[1]=r,this.array[2]=0,this.array[3]=-r,this.array[4]=e,this.array[5]=0,this.array[6]=0,this.array[7]=0,this.array[8]=1,this}solve(t){const e=this.array,r=e[0],a=e[3],n=e[6],s=e[1],i=e[4],o=e[7],c=e[2],h=e[5],l=e[8];let u,f,E,y;u=i*l-o*h,f=o*c-s*l,E=s*h-i*c,y=r*u+a*f+n*E,0!=y&&(y=1/y);const A=y*(t.x*u+t.y*f+t.z*E);u=-(h*t.z-l*t.y),f=-(l*t.x-c*t.z),E=-(c*t.y-h*t.x);const T=y*(r*u+a*f+n*E);return u=-(t.y*o-t.z*i),f=-(t.z*s-t.x*o),E=-(t.x*i-t.y*s),[A,T,y*(r*u+a*f+n*E)]}solve2(t){const e=this.array,r=e[0],a=e[1],n=e[3],s=e[4],i=t.x-e[4],o=t.y-e[7];let c=r*s-a*n;return 0!=c&&(c=1/c),[c*(s*i-a*o),c*(r*o-n*i)]}}var S=w;new r({defaultCtor:w,onDefaultOverride:t=>{S=t}});class C{constructor(...t){"number"==typeof t[0]?this._array=[t[0],t[1],t[2],t[3]]:"object"==typeof t[0]?(this._checkArray(t[0]),this._array=t[0]):this._array=[0,0,0,0]}get array(){return this._array}get x(){return this._array[0]}set x(t){this._array[0]=t}get y(){return this._array[1]}set y(t){this._array[1]=t}set z(t){this._array[2]=t}get z(){return this._array[2]}set w(t){this._array[3]=t}get w(){return this._array[3]}get pitch(){const t=this.array,e=t[0],r=t[1],a=t[2],n=2*(t[3]*r-a*e);return Math.abs(n)>=1?Math.sign(n)*(Math.PI/2):Math.asin(n)}get yaw(){const t=this.array,e=t[0],r=t[1],a=t[2],n=2*(t[3]*a+e*r),s=1-2*(r*r+a*a);return Math.atan2(n,s)}get roll(){const t=this.array,e=t[0],r=t[1],a=t[2],n=2*(t[3]*e+r*a),s=1-2*(e*e+r*r);return Math.atan2(n,s)}getValues(){return[this._array[0],this._array[1],this._array[2],this._array[3]]}setValues(t,e,r,a){return this._array[0]=t,this._array[1]=e,this._array[2]=r,this._array[3]=a,this}_checkArray(t){if(t.length<4)throw new a("Array must be of length 4 at least.")}static fromArray(t){return new C(t)}static fromAxisAngle(t,e){return(new C).setAxisAngle(t,e)}static fromVector(t){return new C(t.x,t.y,t.z,1)}static fromEuler(t,e,r){return(new C).setEuler(t,e,r)}copy(t){const e=this._array,r=t.array;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],this}clone(){return new C(this.x,this.y,this.z,this.w)}equals(t){const e=this.array,r=t.array;return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]&&e[3]===r[3]}getAxis(t){const e=this.array,r=t.array,a=1-e[3]*e[3];if(a<Number.EPSILON)return t.setZeros();const n=function(t){const e=.5*t;I[0]=t,M[0]=1597463007-(M[0]>>1);let r=I[0];return r*=1.5-e*r*r,r}(a);return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,t}getMatrix3(t){const e=this.array,r=2/this.lengthSquared(),a=e[0],n=e[1],s=e[2],i=e[3],o=a*r,c=n*r,h=s*r,l=i*o,u=i*c,f=i*h,E=a*o,y=a*c,A=a*h,T=n*c,d=n*h,_=s*h;return t.setValues(1-(T+_),y+f,A-u,y-f,1-(E+_),d+l,A+u,d-l,1-(E+T))}getMatrix4(t){const e=this.array,r=2/this.lengthSquared(),a=e[0],n=e[1],s=e[2],i=e[3],o=a*r,c=n*r,h=s*r,l=i*o,u=i*c,f=i*h,E=a*o,y=a*c,A=a*h,T=n*c,d=n*h,_=s*h;return t.setValues(1-(T+_),y+f,A-u,0,y-f,1-(E+_),d+l,0,A+u,d-l,1-(E+T),0,0,0,0,1)}rotate(t){const e=this.array,r=t.array,a=r[0],n=r[1],s=r[2],i=e[0],o=e[1],c=e[2],h=e[3],l=h*a+0*-i+-o*s+c*n,u=h*n+0*-o+-c*a+i*s,f=h*s+0*-c+-i*n+o*a,E=i*a+0*h+o*n+c*s;return r[0]=E*c+f*h+l*o-u*i,r[1]=E*o+u*h+f*i-l*c,r[2]=E*i+l*h+u*c-f*o,t}toVector(){return new c([this.x,this.y,this.z])}setEuler(t,e,r){const a=Math.cos(.5*e),n=Math.sin(.5*e),s=Math.cos(.5*t),i=Math.sin(.5*t),o=Math.cos(.5*r),c=Math.sin(.5*r),h=this.array;return h[0]=c*s*a-o*i*n,h[1]=o*i*a+c*s*n,h[2]=o*s*n-c*i*a,h[3]=o*s*a+c*i*n,this}setAxisAngle(t,e=0){const r=t.length();if(0===r)return this;const a=Math.sin(.5*e)/r,n=t.array,s=this.array;return s[0]=n[0]*a,s[1]=n[1]*a,s[2]=n[2]*a,s[3]=Math.cos(.5*e),this}setMatrix(t){const e=t.array;let r=0,a=0,n=0,s=0,i=0,o=0,c=0,h=0,l=0;t instanceof S?(r=e[0],a=e[3],n=e[6],s=e[1],i=e[4],o=e[7],c=e[2],h=e[5],l=e[8]):(r=e[0],a=e[4],n=e[8],s=e[1],i=e[5],o=e[9],c=e[2],h=e[6],l=e[10]);const u=r+i+l,f=this.array;if(u>0){const t=2*Math.sqrt(u+1);f[3]=.25*t,f[0]=(h-o)/t,f[1]=(n-c)/t,f[2]=(s-a)/t}else if(r>i&&r>l){const t=2*Math.sqrt(1+r-i-l);f[3]=(h-o)/t,f[0]=.25*t,f[1]=(a+s)/t,f[2]=(n+c)/t}else if(i>l){const t=2*Math.sqrt(1+i-r-l);f[3]=(n-c)/t,f[0]=(a+s)/t,f[1]=.25*t,f[2]=(o+h)/t}else{const t=2*Math.sqrt(1+l-r-i);f[3]=(s-a)/t,f[0]=(n+c)/t,f[1]=(o+h)/t,f[2]=.25*t}return this}lookAt(t,e){const r=e.clone().sub(t).normalize(),a=h.forward.clone().cross(r),n=h.forward.dot(r);return new O(a.x,a.y,a.z,n+1).normalize()}static fromMatrix(t){return(new C).setMatrix(t)}setVectors(t,e){const r=t.dot(e),a=t.cross(e).array,n=this.array;n[0]=a[0],n[1]=a[1],n[2]=a[2];const s=t.length(),i=t.length();return n[3]=Math.sqrt(s*s*i*i)+r,this.normalize()}dot(t){const e=this.array,r=t.array;return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3]}lengthSquared(){const t=this.array;return t[0]**2+t[1]**2+t[2]**2+t[3]**2}length(){const t=this.array;return Math.hypot(t[0],t[1],t[2],t[3])}angleTo(t){return 2*Math.acos(Math.abs(Math.max(-1,Math.min(1,this.dot(t)))))}rotateTowards(t){const e=this.angleTo(t);if(0===e)return this;const r=Math.min(1,e);return this.slerp(this,t,r),this}invert(){return this.conjugate()}conjugate(){const t=this.array;return t[0]*=-1,t[1]*=-1,t[2]*=-1,this}normalize(){const t=this.array;let e=this.length();return 0===e?(t[0]=0,t[1]=0,t[2]=0,t[3]=1):(e=1/e,t[0]*=e,t[1]*=e,t[2]*=e,t[3]*=e),this}add(t){const e=this.array,r=t.array;return e[0]+=r[0],e[1]+=r[1],e[2]+=r[2],e[3]+=r[3],this}sub(t){const e=this.array,r=t.array;return e[0]-=r[0],e[1]-=r[1],e[2]-=r[2],e[3]-=r[3],this}mult(t){const e=this.array,r=t.array,a=e[0],n=e[1],s=e[2],i=e[3],o=r[0],c=r[1],h=r[2],l=r[3];return e[0]=a*l+i*o+n*h-s*c,e[1]=n*l+i*c+s*o-a*h,e[2]=s*l+i*h+a*c-n*o,e[3]=i*l-a*o-n*c-s*h,this}scale(t){const e=this.array;return e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=t,this}static slerp(t,e,r,a){if(a instanceof O||(a=new O),0===r)return a.copy(t);if(1===r)return a.copy(e);const n=a.array,s=t.array,i=e.array,o=s[3]*i[3]+s[0]*i[0]+s[1]*i[1]+s[2]*i[2];if(Math.abs(o)>=1)return n[3]=s[3],n[0]=s[0],n[1]=s[1],n[2]=s[2],a;const c=Math.acos(o),h=Math.sqrt(1-o*o);if(Math.abs(h-Math.trunc(h))<Number.EPSILON)return n[3]=.5*s[3]+.5*i[3],n[0]=.5*s[0]+.5*i[0],n[1]=.5*s[1]+.5*i[1],n[2]=.5*s[2]+.5*i[2],a;const l=Math.sin((1-r)*c)/h,u=Math.sin(r*c)/h;return n[3]=s[3]*l+i[3]*u,n[0]=s[0]*l+i[0]*u,n[1]=s[1]*l+i[1]*u,n[2]=s[2]*l+i[2]*u,a}slerp(t,e,r){return O.slerp(t,e,r,this)}copyIntoArray(t,e=0){const r=this.array;t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3]}readFromArray(t,e=0){const r=this.array;r[0]=t[e],r[1]=t[e+1],r[2]=t[e+2],r[3]=t[e+3]}}var O=C;new p(C),new r({defaultCtor:C,onDefaultOverride:t=>{O=t}});class P{constructor(...t){if("number"==typeof t[0])this.array=new Float32Array([t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]);else if("object"==typeof t[0]){const e=t[0];this.checkArray(e),e instanceof Float32Array?this.array=e:this.array=new Float32Array(e)}else this.array=new Float32Array(16)}static fromValues(t,e,r,a,n,s,i,o,c,h,l,u,f,E,y,A){return new P(t,e,r,a,n,s,i,o,c,h,l,u,f,E,y,A)}static fromArray(t){if(t.length<16)throw new Error("Matrix4 needs an array of size 16 at least.");return new P(t)}getValues(){const t=this.array;return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}setValues(t,e,r,a,n,s,i,o,c,h,l,u,f,E,y,A){const T=this.array;return T[0]=t,T[1]=e,T[2]=r,T[3]=a,T[4]=n,T[5]=s,T[6]=i,T[7]=o,T[8]=c,T[9]=h,T[10]=l,T[11]=u,T[12]=f,T[13]=E,T[14]=y,T[15]=A,this}get m11(){return this.array[0]}set m11(t){this.array[0]=t}get m12(){return this.array[4]}set m12(t){this.array[4]=t}get m13(){return this.array[8]}set m13(t){this.array[8]=t}get m14(){return this.array[12]}set m14(t){this.array[12]=t}get m21(){return this.array[1]}set m21(t){this.array[1]=t}get m22(){return this.array[5]}set m22(t){this.array[5]=t}get m23(){return this.array[9]}set m23(t){this.array[9]=t}get m24(){return this.array[13]}set m24(t){this.array[13]=t}get m31(){return this.array[2]}set m31(t){this.array[2]=t}get m32(){return this.array[6]}set m32(t){this.array[6]=t}get m33(){return this.array[10]}set m33(t){this.array[10]=t}get m34(){return this.array[14]}set m34(t){this.array[14]=t}get m41(){return this.array[3]}set m41(t){this.array[3]=t}get m42(){return this.array[7]}set m42(t){this.array[7]=t}get m43(){return this.array[11]}set m43(t){this.array[11]=t}get m44(){return this.array[15]}set m44(t){this.array[15]=t}checkArray(t){if(t.length<16)throw new a("Array must be of length 16 at least.")}getRotation(){const t=this.array,e=t[0],r=t[4],a=t[8],n=t[1],s=t[5],i=t[9],o=t[2],c=t[6],h=t[10],l=e+s+h;let u=0,f=0,E=0,y=0;if(l>0){const t=2*Math.sqrt(l+1);y=.25*t,u=(c-i)/t,f=(a-o)/t,E=(n-r)/t}else if(e>s&&e>h){const t=2*Math.sqrt(1+e-s-h);y=(c-i)/t,u=.25*t,f=(r+n)/t,E=(a+o)/t}else if(s>h){const t=2*Math.sqrt(1+s-e-h);y=(a-o)/t,u=(r+n)/t,f=.25*t,E=(i+c)/t}else{const t=2*Math.sqrt(1+h-e-s);y=(n-r)/t,u=(a+o)/t,f=(i+c)/t,E=.25*t}return new O(u,f,E,y)}setTRS(t,e,r){const a=this.array,n=e.array,s=t.array,i=r.array,o=n[0],c=n[1],h=n[2],l=n[3],u=o+o,f=c+c,E=h+h,y=o*u,A=o*f,T=o*E,d=c*f,_=c*E,m=h*E,R=l*u,g=l*f,p=l*E,N=i[0],I=i[1],M=i[2];return a[0]=(1-(d+m))*N,a[1]=(A+p)*N,a[2]=(T-g)*N,a[3]=0,a[4]=(A-p)*I,a[5]=(1-(y+m))*I,a[6]=(_+R)*I,a[7]=0,a[8]=(T+g)*M,a[9]=(_-R)*M,a[10]=(1-(y+d))*M,a[11]=0,a[12]=s[0],a[13]=s[1],a[14]=s[2],a[15]=1,this}setRotation(t){const e=this.array,r=t.array,a=2/t.lengthSquared(),n=r[0],s=r[1],i=r[2],o=r[3],c=n*a,h=s*a,l=i*a,u=o*c,f=o*h,E=o*l,y=n*c,A=n*h,T=n*l,d=s*h,_=s*l,m=i*l,R=1-(d+m),g=A+E,p=T-f,N=A-E,I=1-(y+m),M=_+u,w=T+f,S=_-u,C=1-(y+d);return e[0]=R,e[1]=g,e[2]=p,e[4]=N,e[5]=I,e[6]=M,e[8]=w,e[9]=S,e[10]=C,this}equals(t){const e=this.array,r=t.array;return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]&&e[3]===r[3]&&e[4]===r[4]&&e[5]===r[5]&&e[6]===r[6]&&e[7]===r[7]&&e[8]===r[8]&&e[9]===r[9]&&e[10]===r[10]&&e[11]===r[11]&&e[12]===r[12]&&e[13]===r[13]&&e[14]===r[14]&&e[15]===r[15]}copy(t){const e=this.array,r=t.array;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],this}clone(){const t=this.array;return new P(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}static identity(){return new P(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}setIdentity(){const t=this.array;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}static zeros(){return new P(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}setZeros(){const t=this.array;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=0,this}det(){const t=this.array,e=t[0]*t[5]-t[1]*t[4],r=t[0]*t[6]-t[2]*t[4],a=t[0]*t[7]-t[3]*t[4],n=t[1]*t[6]-t[2]*t[5],s=t[1]*t[7]-t[3]*t[5],i=t[2]*t[7]-t[3]*t[6],o=t[8]*n-t[9]*r+t[10]*e,c=t[8]*s-t[9]*a+t[11]*e,h=t[8]*i-t[10]*a+t[11]*r;return-(t[9]*i-t[10]*s+t[11]*n)*t[12]+h*t[13]-c*t[14]+o*t[15]}trace(){const t=this.array;return t[0]+t[5]+t[10]+t[15]}static negate(t,e){const r=t.array,a=e.array;return a[0]=-r[0],a[1]=-r[1],a[2]=-r[2],a[3]=-r[3],a[4]=-r[4],a[5]=-r[5],a[6]=-r[6],a[7]=-r[7],a[8]=-r[8],a[9]=-r[9],a[10]=-r[10],a[11]=-r[11],a[12]=-r[12],a[13]=-r[13],a[14]=-r[14],a[15]=-r[15],e}negate(){return P.negate(this,this)}static transpose(t,e){const r=t.array,a=e.array,n=r[0],s=r[1],i=r[2],o=r[3],c=r[4],h=r[5],l=r[6],u=r[7],f=r[8],E=r[9],y=r[10],A=r[11],T=r[12],d=r[13],_=r[14],m=r[15];return a[0]=n,a[1]=c,a[2]=f,a[3]=T,a[4]=s,a[5]=h,a[6]=E,a[7]=d,a[8]=i,a[9]=l,a[10]=y,a[11]=_,a[12]=o,a[13]=u,a[14]=A,a[15]=m,e}transpose(){return P.transpose(this,this)}static invert(t,e){const r=t.array,n=e.array,s=r[0],i=r[1],o=r[2],c=r[3],h=r[4],l=r[5],u=r[6],f=r[7],E=r[8],y=r[9],A=r[10],T=r[11],d=r[12],_=r[13],m=r[14],R=r[15],g=s*l-i*h,p=s*u-o*h,N=s*f-c*h,I=i*u-o*l,M=i*f-c*l,w=o*f-c*u,S=E*_-y*d,C=E*m-A*d,O=E*R-T*d,P=y*m-A*_,b=y*R-T*_,v=A*R-T*m,L=g*v-p*b+N*P+I*O-M*C+w*S;if(0==L)throw new a("Matrix is not invertible.");const x=1/L;return n[0]=(l*v-u*b+f*P)*x,n[1]=(-i*v+o*b-c*P)*x,n[2]=(_*w-m*M+R*I)*x,n[3]=(-y*w+A*M-T*I)*x,n[4]=(-h*v+u*O-f*C)*x,n[5]=(s*v-o*O+c*C)*x,n[6]=(-d*w+m*N-R*p)*x,n[7]=(E*w-A*N+T*p)*x,n[8]=(h*b-l*O+f*S)*x,n[9]=(-s*b+i*O-c*S)*x,n[10]=(d*M-_*N+R*g)*x,n[11]=(-E*M+y*N-T*g)*x,n[12]=(-h*P+l*C-u*S)*x,n[13]=(s*P-i*C+o*S)*x,n[14]=(-d*I+_*p-m*g)*x,n[15]=(E*I-y*p+A*g)*x,e}invert(){return P.invert(this,this)}static add(t,e,r){const a=t.array,n=e.array,s=r.array;return s[0]=a[0]+n[0],s[1]=a[1]+n[1],s[2]=a[2]+n[2],s[3]=a[3]+n[3],s[4]=a[4]+n[4],s[5]=a[5]+n[5],s[6]=a[6]+n[6],s[7]=a[7]+n[7],s[8]=a[8]+n[8],s[9]=a[9]+n[9],s[10]=a[10]+n[10],s[11]=a[11]+n[11],s[12]=a[12]+n[12],s[13]=a[13]+n[13],s[14]=a[14]+n[14],s[15]=a[15]+n[15],r}add(t){return P.add(this,t,this)}static sub(t,e,r){const a=t.array,n=e.array,s=r.array;return s[0]=a[0]-n[0],s[1]=a[1]-n[1],s[2]=a[2]-n[2],s[3]=a[3]-n[3],s[4]=a[4]-n[4],s[5]=a[5]-n[5],s[6]=a[6]-n[6],s[7]=a[7]-n[7],s[8]=a[8]-n[8],s[9]=a[9]-n[9],s[10]=a[10]-n[10],s[11]=a[11]-n[11],s[12]=a[12]-n[12],s[13]=a[13]-n[13],s[14]=a[14]-n[14],s[15]=a[15]-n[15],r}sub(t){return P.sub(this,t,this)}static mult(t,e,r){const a=t.array,n=e.array,s=r.array,i=a[0],o=a[1],c=a[2],h=a[3],l=a[4],u=a[5],f=a[6],E=a[7],y=a[8],A=a[9],T=a[10],d=a[11],_=a[12],m=a[13],R=a[14],g=a[15],p=n[0],N=n[1],I=n[2],M=n[3],w=n[4],S=n[5],C=n[6],O=n[7],P=n[8],b=n[9],v=n[10],L=n[11],x=n[12],U=n[13],B=n[14],F=n[15];return s[0]=i*p+l*N+y*I+_*M,s[1]=o*p+u*N+A*I+m*M,s[2]=c*p+f*N+T*I+R*M,s[3]=h*p+E*N+d*I+g*M,s[4]=i*w+l*S+y*C+_*O,s[5]=o*w+u*S+A*C+m*O,s[6]=c*w+f*S+T*C+R*O,s[7]=h*w+E*S+d*C+g*O,s[8]=i*P+l*b+y*v+_*L,s[9]=o*P+u*b+A*v+m*L,s[10]=c*P+f*b+T*v+R*L,s[11]=h*P+E*b+d*v+g*L,s[12]=i*x+l*U+y*B+_*F,s[13]=o*x+u*U+A*B+m*F,s[14]=c*x+f*U+T*B+R*F,s[15]=h*x+E*U+d*B+g*F,r}mult(t){return P.mult(this,t,this)}getMaxScaleOnAxis(){const t=this.array,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],a=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,r,a))}writeIntoArray(t,e=0){const r=this.array;t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t[e+9]=r[9],t[e+10]=r[10],t[e+11]=r[11],t[e+12]=r[12],t[e+13]=r[13],t[e+14]=r[14],t[e+15]=r[15]}readFromArray(t,e=0){const r=this.array;return r[0]=t[e],r[1]=t[e+1],r[2]=t[e+2],r[3]=t[e+3],r[4]=t[e+4],r[5]=t[e+5],r[6]=t[e+6],r[7]=t[e+7],r[8]=t[e+8],r[9]=t[e+9],r[10]=t[e+10],r[11]=t[e+11],r[12]=t[e+12],r[13]=t[e+13],r[14]=t[e+14],r[15]=t[e+15],this}solve(t){const e=this.array,r=e[0],a=e[1],n=e[2],s=e[3],i=e[4],o=e[5],c=e[6],h=e[7],l=e[8],u=e[9],f=e[10],E=e[11],y=e[12],A=e[13],T=e[14],d=e[15],_=r*o-a*i,m=r*c-n*i,R=r*h-s*i,g=a*c-n*o,p=a*h-s*o,N=n*h-s*c,I=l*A-u*y,M=l*T-f*y,w=l*d-E*y,S=u*T-f*A,C=u*d-E*A,O=f*d-E*T,P=t.x,b=t.y,v=t.z,L=t.w;let x=_*O-m*C+R*S+g*w-p*M+N*I;return 0!=x&&(x=1/x),[x*((o*O-c*C+h*S)*P-(i*O-c*w+h*M)*b+(i*C-o*w+h*I)*v-(i*S-o*M+c*I)*L),x*-((a*O-n*C+s*S)*P-(r*O-n*w+s*M)*b+(r*C-a*w+s*I)*v-(r*S-a*M+n*I)*L),x*((A*N-T*p+d*g)*P-(y*N-T*R+d*m)*b+(y*p-A*R+d*_)*v-(y*g-A*m+T*_)*L),x*-((u*N-f*p+E*g)*P-(l*N-f*R+E*m)*b+(l*p-u*R+E*_)*v-(l*g-u*m+f*_)*L)]}solve2(t){const e=this.array,r=e[0],a=e[1],n=e[4],s=e[5],i=t.x-e[8],o=t.y-e[9];let c=r*s-a*n;return 0!=c&&(c=1/c),[c*(s*i-a*o),c*(r*o-n*i)]}solve3(t){const e=this.array,r=e[0],a=e[1],n=e[2],s=e[4],i=e[5],o=e[6],c=e[8],h=e[9],l=e[10],u=t.x-e[12],f=t.y-e[13],E=t.z-e[14];let y=i*l-o*h,A=o*c-s*l,T=s*h-i*c,d=r*y+a*A+n*T;0!=d&&(d=1/d);const _=d*(u*y+f*A+E*T);y=-(h*E-l*f),A=-(l*u-c*E),T=-(c*f-h*u);const m=d*(r*y+a*A+n*T);return y=-(f*o-E*i),A=-(E*s-u*o),T=-(u*i-f*s),[_,m,d*(r*y+a*A+n*T)]}static translation(t){return(new P).setTranslation(t)}setTranslation(t){const e=this.array,r=t.array,a=r[0],n=r[1],s=r[2];return e[12]=a,e[13]=n,e[14]=s,this}translate(t){const e=this.array,r=t.array,a=r[0],n=r[1],s=r[2],i=e[0]*a+e[4]*n+e[8]*s+1*e[12],o=e[1]*a+e[5]*n+e[9]*s+1*e[13],c=e[2]*a+e[6]*n+e[10]*s+1*e[14],h=e[3]*a+e[7]*n+e[11]*s+1*e[15];return e[12]=i,e[13]=o,e[14]=c,e[15]=h,this}static rotationX(t){return(new P).setRotationX(t)}setRotationX(t){const e=this.array,r=Math.cos(t),a=Math.sin(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=a,e[7]=0,e[8]=0,e[9]=-a,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}rotateX(t){const e=this.array,r=Math.cos(t),a=Math.sin(t),n=e[4]*r+e[8]*a,s=e[5]*r+e[9]*a,i=e[6]*r+e[10]*a,o=e[7]*r+e[11]*a,c=e[4]*-a+e[8]*r,h=e[5]*-a+e[9]*r,l=e[6]*-a+e[10]*r,u=e[7]*-a+e[11]*r;return e[4]=n,e[5]=s,e[6]=i,e[7]=o,e[8]=c,e[9]=h,e[10]=l,e[11]=u,this}static rotationY(t){return(new P).setRotationY(t)}setRotationY(t){const e=this.array,r=Math.cos(t),a=Math.sin(t);return e[0]=r,e[1]=0,e[2]=-a,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=a,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}rotateY(t){const e=this.array,r=Math.cos(t),a=Math.sin(t),n=e[0]*r+e[8]*-a,s=e[1]*r+e[9]*-a,i=e[2]*r+e[10]*-a,o=e[3]*r+e[11]*-a,c=e[0]*a+e[8]*r,h=e[1]*a+e[9]*r,l=e[2]*a+e[10]*r,u=e[3]*a+e[11]*r;return e[0]=n,e[1]=s,e[2]=i,e[3]=o,e[8]=c,e[9]=h,e[10]=l,e[11]=u,this}static rotationZ(t){return(new P).setRotationZ(t)}setRotationZ(t){const e=this.array,r=Math.cos(t),a=Math.sin(t);return e[0]=r,e[1]=a,e[2]=0,e[3]=0,e[4]=-a,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}rotateZ(t){const e=this.array,r=Math.cos(t),a=Math.sin(t),n=e[0]*r+e[4]*a,s=e[1]*r+e[5]*a,i=e[2]*r+e[6]*a,o=e[3]*r+e[7]*a,c=e[0]*-a+e[4]*r,h=e[1]*-a+e[5]*r,l=e[2]*-a+e[6]*r,u=e[3]*-a+e[7]*r;return e[0]=n,e[1]=s,e[2]=i,e[3]=o,e[4]=c,e[5]=h,e[6]=l,e[7]=u,this}static rotation(t){return(new P).rotation(t)}rotation(t){const e=this.array,r=t.array;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[4]=r[3],e[5]=r[4],e[6]=r[5],e[8]=r[6],e[9]=r[7],e[10]=r[8],this}rotate(t,e){const r=this.array,a=t.array,n=t.length(),s=a[0]/n,i=a[1]/n,o=a[2]/n,c=Math.cos(e),h=Math.sin(e),l=1-c,u=s*s*l+c,f=s*i*l-o*h,E=s*o*l+i*h,y=i*s*l+o*h,A=i*i*l+c,T=i*o*l-s*h,d=o*s*l-i*h,_=o*i*l+s*h,m=o*o*l+c,R=r[0]*u+r[4]*y+r[8]*d,g=r[1]*u+r[5]*y+r[9]*d,p=r[2]*u+r[6]*y+r[10]*d,N=r[3]*u+r[7]*y+r[11]*d,I=r[0]*f+r[4]*A+r[8]*_,M=r[1]*f+r[5]*A+r[9]*_,w=r[2]*f+r[6]*A+r[10]*_,S=r[3]*f+r[7]*A+r[11]*_,C=r[0]*E+r[4]*T+r[8]*m,O=r[1]*E+r[5]*T+r[9]*m,P=r[2]*E+r[6]*T+r[10]*m,b=r[3]*E+r[7]*T+r[11]*m;return r[0]=R,r[1]=g,r[2]=p,r[3]=N,r[4]=I,r[5]=M,r[6]=w,r[7]=S,r[8]=C,r[9]=O,r[10]=P,r[11]=b,this}static scaling(t){return(new P).setScaling(t)}setScaling(t){const e=this.array,r=t.array,a=r[0],n=r[1],s=r[2];return e[0]=a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}scale(t){const e=this.array,r=t.array,a=r[0],n=r[1],s=r[2];return e[0]*=a,e[1]*=a,e[2]*=a,e[3]*=a,e[4]*=n,e[5]*=n,e[6]*=n,e[7]*=n,e[8]*=s,e[9]*=s,e[10]*=s,e[11]*=s,e[12]*=1,e[13]*=1,e[14]*=1,e[15]*=1,this}static lookAt(t,e,r,a){const n=t.array,s=r.array,i=e.array,o=a.array,c=n[0],h=n[1],l=n[2],u=s[0],f=s[1],E=s[2];let y,A,T,d,_,m,R,g,p,N;return R=c-i[0],g=h-i[1],p=l-i[2],N=Math.hypot(R,g,p),N>0&&(N=1/Math.hypot(R,g,p),R*=N,g*=N,p*=N),y=f*p-E*g,A=E*R-u*p,T=u*g-f*R,N=Math.hypot(y,A,T),N>0&&(N=1/N,y*=N,A*=N,T*=N),d=g*T-p*A,_=p*y-R*T,m=R*A-g*y,N=Math.hypot(d,_,m),N>0&&(N=1/N,d*=N,_*=N,m*=N),o[0]=y,o[1]=A,o[2]=T,o[3]=0,o[4]=d,o[5]=_,o[6]=m,o[7]=0,o[8]=R,o[9]=g,o[10]=p,o[11]=0,o[12]=c,o[13]=h,o[14]=l,o[15]=1,a}lookAt(t,e,r){return P.lookAt(t,e,r,this)}transformPoint(t){const e=this.array,r=t.array,a=r[0],n=r[1],s=r[2],i=a*e[3]+n*e[7]+s*e[11]+e[15];return t.setValues((a*e[0]+n*e[4]+s*e[8]+e[12])/i,(a*e[1]+n*e[5]+s*e[9]+e[13])/i,(a*e[2]+n*e[6]+s*e[10]+e[14])/i),t}transformPoint4(t){const e=this.array,r=t.array,a=r[0],n=r[1],s=r[2],i=r[3],o=a*e[3]+n*e[7]+s*e[11]+i*e[15];return t.setValues((a*e[0]+n*e[4]+s*e[8]+e[12])/o,(a*e[1]+n*e[5]+s*e[9]+e[13])/o,(a*e[2]+n*e[6]+s*e[10]+e[14])/o,(a*e[3]+n*e[7]+s*e[11]+e[15])/o),t}transformDirection(t){const e=this.array,r=t.array,a=r[0],n=r[1],s=r[2];return t.setValues(a*e[0]+n*e[4]+s*e[8],a*e[1]+n*e[5]+s*e[9],a*e[2]+n*e[6]+s*e[10]),t}transformNormal(t){const e=t.array,r=this.invert().array,a=e[0],n=e[1],s=e[2];return t.setValues(a*r[0]+n*r[4]+s*r[8],a*r[1]+n*r[5]+s*r[9],a*r[2]+n*r[6]+s*r[10]),this.invert(),t}static perspective(t,e,r,a){return(new P).setPerspective(t,e,r,a)}setPerspective(t,e,r,a){const n=this.array,s=Math.tan(.5*Math.PI-.5*t),i=s/e,o=1/(r-a);return n[0]=i,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=(r+a)*o,n[11]=-1,n[12]=0,n[13]=0,n[14]=2*r*a*o,n[15]=0,this}static orthographic(t,e,r,a,n,s){return(new P).setOrthographic(t,e,r,a,n,s)}setOrthographic(t,e,r,a,n,s){const i=this.array;return i[0]=2/(e-t),i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2/(a-r),i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2/(n-s),i[11]=0,i[12]=(e+t)/(t-e),i[13]=(a+r)/(r-a),i[14]=(s+n)/(n-s),i[15]=1,this}static frustum(t,e,r,a,n,s){return(new P).setFrustum(t,e,r,a,n,s)}setFrustum(t,e,r,a,n,s){const i=this.array,o=1/(e-t),c=1/(a-r),h=1/(n-s);return i[0]=2*n*o,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*n*c,i[6]=0,i[7]=0,i[8]=(e+t)*o,i[9]=(a+r)*c,i[10]=(s+n)*h,i[11]=-1,i[12]=0,i[13]=0,i[14]=s*n*2*h,i[15]=0,this}}var b=P;new r({defaultCtor:P,onDefaultOverride:t=>{b=t}});const v=new class extends p{constructor(t,e){super(t,e),this._buffer=new Float32Array(0),this._bufferViews=Array(e?.size||0).fill(0).map((()=>this._buffer.subarray())),this._extensions=[]}}(c),L=new class{constructor(){this._count=0}newUUID(){return(++this._count).toString(16)}},x=new b,U=class{constructor(t,e){this.uuid=L.newUUID(),this.owner=t||null,this.isStatic=e??!1,this.array=new Float32Array(16),this.localArray=new Float32Array(16),this.matrix=new b(this.array).setIdentity(),this.localMatrix=new b(this.localArray).setIdentity(),this.hasChanged=!1}getMatrix(t){const e=this.array,r=t.array;return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],t}setMatrix(t){const e=this.array,r=t.array;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],this}getLocalMatrix(t){const e=this.localArray,r=t.array;return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],t}setLocalMatrix(t){const e=this.localArray,r=t.array;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],this}getRight(t){const e=this.array,r=t.array;return r[0]=e[0],r[1]=e[1],r[2]=e[2],t}getLeft(t){const e=this.array,r=t.array;return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],t}getUp(t){const e=this.array,r=t.array;return r[0]=e[4],r[1]=e[5],r[2]=e[6],t}getDown(t){const e=this.array,r=t.array;return r[0]=-e[4],r[1]=-e[5],r[2]=-e[6],t}getForward(t){const e=this.array,r=t.array;return r[0]=e[8],r[1]=e[9],r[2]=e[10],t}getBackward(t){const e=this.array,r=t.array;return r[0]=-e[8],r[1]=-e[9],r[2]=-e[10],t}getTranslation(t){const e=this.array,r=t.array;return r[0]=e[12],r[1]=e[13],r[2]=e[14],t}setTranslation(t){const e=this.array,r=t.array;return e[12]=r[0],e[13]=r[1],e[14]=r[2],this}translate(t){const e=this.array,r=t.array;return e[12]+=r[0],e[13]+=r[1],e[14]+=r[2],this}getScaling(t){const e=this.array,r=t.array;return r[0]=e[0],r[1]=e[5],r[2]=e[10],t}setScaling(t){const e=this.array,r=t.array;return e[0]=r[0],e[5]=r[1],e[10]=r[2],this}scale(t){const e=this.array,r=t.array;return e[0]*=r[0],e[5]*=r[1],e[10]*=r[2],this}getRotation(t){return t.setMatrix(this.matrix),t}setRotation(t){return this.matrix.setRotation(t),this}rotate(t){return this.matrix.mult(t.getMatrix4(x)),this}transformPoint(t){return t}transformDirection(t){return t}transformVector(t){return t}lookAt(t,e){const r=this.getTranslation(v.acquire(1)[0]);return this.matrix.lookAt(r,t,e),v.release(1),this}};class B{constructor(t,e){this.normal=t??new c,this.constant=e??0}static fromNormalAndConstant(t,e){return(new B).setFromNormalAndConstant(t,e)}static fromNormalAndCoplanarPoint(t,e){return(new B).setFromNormalAndCoplanarPoint(t,e)}static fromCoplanarPoints(t,e,r){return(new B).setFromCoplanarPoints(t,e,r)}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}set(t,e,r,a){return this.normal.setValues(t,e,r),this.constant=a,this}setFromNormalAndConstant(t,e){return this.normal.copy(t),this.constant=e,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,r){const a=r.clone(),[n]=v.acquire(1);return n.copy(t),a.sub(e).cross(n.sub(e)).normalize(),this.setFromNormalAndCoplanarPoint(a,t),v.release(1),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}normalized(){const t=1/this.normal.length();return this.normal.scale(t),this.constant*=t,this}static intersection(t,e,r,a){const{normal:n,constant:s}=t,{normal:i,constant:o}=e,{normal:c,constant:h}=r;a.copy(i).cross(c);const l=-n.dot(a),[u,f,E]=a.scale(s).array;a.copy(c).cross(n);const[y,A,T]=a.scale(o).array;a.copy(n).cross(i);const[d,_,m]=a.scale(h).array;return a.setValues((u+y+d)/l,(f+A+_)/l,(E+T+m)/l),a}}var F=B;new r({defaultCtor:B,onDefaultOverride:t=>{F=t}});const D=new c;class G{constructor(){this.nearPlane=new F,this.farPlane=new F,this.topPlane=new F,this.bottomPlane=new F,this.leftPlane=new F,this.rightPlane=new F,this.extents=new Array(8).fill(0).map((t=>new c))}set(t,e,r,a,n,s){const{nearPlane:i,farPlane:o,bottomPlane:c,topPlane:h,leftPlane:l,rightPlane:u}=this;return i.copy(t),o.copy(e),h.copy(r),c.copy(a),l.copy(n),u.copy(s),this}copy(t){const{nearPlane:e,farPlane:r,bottomPlane:a,topPlane:n,leftPlane:s,rightPlane:i}=t;return this.set(e,r,n,a,s,i),this}clone(){return(new G).copy(this)}setFromMatrix(t){const{nearPlane:e,farPlane:r,bottomPlane:a,topPlane:n,leftPlane:s,rightPlane:i,extents:o}=this,[c,h,l,u,f,E,y,A,T,d,_,m,R,g,p,N]=t.array;return i.set(u-c,A-f,m-T,N-R).normalized(),s.set(u+c,A+f,m+T,N+R).normalized(),a.set(u+h,A+E,m+d,N+g).normalized(),n.set(u-h,A-E,m-d,N-g).normalized(),r.set(u-l,A-y,m-_,N-p).normalized(),e.set(u+l,A+y,m+_,N+p).normalized(),F.intersection(s,a,e,o[0]),F.intersection(s,n,e,o[1]),F.intersection(i,a,e,o[2]),F.intersection(i,n,e,o[3]),F.intersection(s,a,r,o[4]),F.intersection(s,n,r,o[5]),F.intersection(i,a,r,o[6]),F.intersection(i,n,r,o[7]),this}intersectsSphere(t){const{nearPlane:e,farPlane:r,bottomPlane:a,topPlane:n,leftPlane:s,rightPlane:i}=this,{center:o,radius:c}=t;return o.dot(e.normal)+e.constant+c<=0||o.dot(r.normal)+r.constant+c<=0||o.dot(a.normal)+a.constant+c<=0||o.dot(n.normal)+n.constant+c<=0||o.dot(s.normal)+s.constant+c<=0||o.dot(i.normal)+i.constant+c<=0}intersectsBox(t){const{max:e,min:r}=t,{nearPlane:a,farPlane:n,bottomPlane:s,topPlane:i,leftPlane:o,rightPlane:c}=this;return a.distanceToPoint(D.setValues(a.normal.x>0?e.x:r.x,a.normal.y>0?e.y:r.y,a.normal.z>0?e.z:r.z))>=0&&n.distanceToPoint(D.setValues(n.normal.x>0?e.x:r.x,n.normal.y>0?e.y:r.y,n.normal.z>0?e.z:r.z))>=0&&s.distanceToPoint(D.setValues(s.normal.x>0?e.x:r.x,s.normal.y>0?e.y:r.y,s.normal.z>0?e.z:r.z))>=0&&i.distanceToPoint(D.setValues(i.normal.x>0?e.x:r.x,i.normal.y>0?e.y:r.y,i.normal.z>0?e.z:r.z))>=0&&o.distanceToPoint(D.setValues(o.normal.x>0?e.x:r.x,o.normal.y>0?e.y:r.y,o.normal.z>0?e.z:r.z))>=0&&c.distanceToPoint(D.setValues(c.normal.x>0?e.x:r.x,c.normal.y>0?e.y:r.y,c.normal.z>0?e.z:r.z))>=0}getEdges(t){const{extents:e}=this,r=e[0],a=e[1],n=e[2],s=e[3],i=e[4],o=e[5],c=e[6],h=e[7];return t[0].copy(o).sub(a),t[1].copy(h).sub(s),t[2].copy(i).sub(r),t[3].copy(c).sub(n),t[4].copy(h).sub(o),t[5].copy(s).sub(n),t}getExtents(t){const{extents:e}=this;return t[0].copy(e[0]),t[1].copy(e[1]),t[2].copy(e[2]),t[3].copy(e[3]),t[4].copy(e[4]),t[5].copy(e[5]),t[6].copy(e[6]),t[7].copy(e[7]),t}containsPoint(t){const{nearPlane:e,farPlane:r,bottomPlane:a,topPlane:n,leftPlane:s,rightPlane:i}=this;return e.distanceToPoint(t)>=0&&r.distanceToPoint(t)>=0&&a.distanceToPoint(t)>=0&&n.distanceToPoint(t)>=0&&s.distanceToPoint(t)>=0&&i.distanceToPoint(t)>=0}}var V,H,k,X,Y,z,W=G;!function(t){t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.STATIC_READ=35045]="STATIC_READ",t[t.DYNAMIC_READ=35049]="DYNAMIC_READ",t[t.STREAM_READ=35041]="STREAM_READ",t[t.STATIC_COPY=35046]="STATIC_COPY",t[t.DYNAMIC_COPY=35050]="DYNAMIC_COPY",t[t.STREAM_COPY=35042]="STREAM_COPY"}(V||(V={})),function(t){t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(H||(H={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(k||(k={})),function(t){t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT"}(X||(X={})),function(t){t.VEC2="VEC2",t.VEC3="VEC3",t.VEC4="VEC4"}(Y||(Y={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT"}(z||(z={}));class j{static getDataTypeNumComponents(t){switch(t){case Y.VEC2:return 2;case Y.VEC3:return 3;case Y.VEC4:return 4}}static getComponentTypeArrayConstructor(t){switch(t){case X.FLOAT:return Float32Array;case X.BYTE:case X.UNSIGNED_BYTE:return Uint8Array;case X.SHORT:return Int16Array;case X.UNSIGNED_SHORT:return Uint16Array;case X.INT:return Int32Array;case X.UNSIGNED_INT:return Uint32Array}}static getArrayComponentType(t){return t instanceof Float32Array?X.FLOAT:t instanceof Int32Array?X.INT:t instanceof Uint32Array?X.UNSIGNED_INT:t instanceof Int16Array?X.SHORT:t instanceof Uint16Array?X.UNSIGNED_SHORT:t instanceof Int8Array?X.BYTE:X.UNSIGNED_BYTE}static createVertexElementArrayBuffer(t,e){const r=t.createBuffer();if(null===r)return null;const a=V.STATIC_READ,n=t.ELEMENT_ARRAY_BUFFER,{byteLength:s}=e,i=this.getElementArrayBufferType(e);return t.bindBuffer(n,r),t.bufferData(n,e,a),{internalBuffer:r,target:n,usage:a,byteLength:s,indexType:i}}static createVertexArrayBuffer(t,e,r,a,n){const{internalProgram:s}=e,i=V.STATIC_READ;n=n??!1,a=a??i;const o=r?Object.entries(r):null,c=null!==o?o.reduce(((t,[e,r])=>t+(r.array?.byteLength??r.byteLength??0)),0):0,h=t.createBuffer();if(null===h)return null;const l=t.ARRAY_BUFFER;t.bindBuffer(l,h);const u=new ArrayBuffer(c);let f=0;const E={};if(null!==o){o.forEach((([t,e])=>{const{array:r,componentType:a,byteLength:n}=e;if(!(r||a&&n))throw new Error("Every attribute requires either an array or a componentType and a byteLength")})),f=n?o.reduce(((t,[e,r])=>{const{constant:a}=r;if(!a){const{array:e,type:a,componentType:n}=r,{BYTES_PER_ELEMENT:s}=e??this.getComponentTypeArrayConstructor(n);return t+s*this.getDataTypeNumComponents(a)}return t}),0):0;const e=n?Math.trunc(c/f):0;let r,a=0;o.forEach((([i,o])=>{const{array:c,type:h}=o;let{constant:l=!1,divisor:y,normalize:A,componentType:T}=o;T=c?this.getArrayComponentType(c):T;const d=t.getAttribLocation(s,i);if(-1===d)return void console.warn(`Attribute ${i} could not be located.`);const _=this.getDataTypeNumComponents(h);if(y=y??0,A=A??!1,t.vertexAttribPointer(d,_,T,A,f,a),y>0&&t.vertexAttribDivisor(d,y),l){if(!c)throw new Error("constant flag requires an array parameter");switch(r=c,_){case 1:t.vertexAttrib1fv(d,r);break;case 2:t.vertexAttrib2fv(d,r);break;case 3:t.vertexAttrib3fv(d,r);break;case 4:t.vertexAttrib4fv(d,r)}}else{if(!l){const{array:t,type:s}=o,c=this.getDataTypeNumComponents(s);let h=0,d=0;if(n)if(t){({BYTES_PER_ELEMENT:d,byteLength:h}=t);const r=new(this.getComponentTypeArrayConstructor(this.getArrayComponentType(t)))(u,a),n=f/d;for(let a=0;a<e;a++){let e=a*c;r.set(t.slice(e,e+c),a*n)}}else({BYTES_PER_ELEMENT:d}=this.getComponentTypeArrayConstructor(T)),h=o.byteLength;else t?(({BYTES_PER_ELEMENT:d,byteLength:h}=t),new(j.getComponentTypeArrayConstructor(j.getArrayComponentType(t)))(u,a).set(t)):(({BYTES_PER_ELEMENT:d}=this.getComponentTypeArrayConstructor(T)),h=o.byteLength);E[i]={constantValue:r,numComponents:c,divisor:y,componentType:T,constant:l,byteOffset:a,bytesPerElement:d,type:s,normalize:A},a+=n?d*c:h}t.enableVertexAttribArray(d)}}))}return t.bufferData(l,u,a),{internalBuffer:h,target:l,usage:a,byteLength:c,interleaved:n,byteStride:f,vertexAttributes:E}}static setVertexArrayValues(t,e,r){const{attributes:a,elementsCount:n}=r;Object.keys(a).forEach((r=>{const{verticesBuffers:n}=e,s=n.find((t=>r in t.vertexAttributes));if(s){const{internalBuffer:e,target:n,byteStride:i,interleaved:o,vertexAttributes:c}=s;t.getParameter(t.ARRAY_BUFFER_BINDING)!==e&&t.bindBuffer(n,e);const h=a[r],{byteOffset:l,numComponents:u}=c[r];let{array:f,srcOffset:E,srcLength:y}=h;const{length:A}=f;let T=l;if(o){(E||y)&&(f=f.slice(E??0,y));const e=o?Math.trunc(A/u):0;let r=0;for(let a=0;a<e;a++)t.bufferSubData(n,T,f,r,u),r+=u,T+=i}else E=E??0,y=y??A,t.bufferSubData(n,0,f,E,y)}}))}static setVertexArrayBufferData(t,e,r,a,n,s){const{internalBuffer:i,target:o}=e;t.bindBuffer(o,i),a=a??0,n=n??0,t.bufferSubData(o,a,r,n,s)}static createVertexArray(t,e,r){const{vertexAttributes:a,vertexBuffers:n,elementIndices:s,elementBuffer:i}=r,o=t.createVertexArray();if(null===o)return null;t.bindVertexArray(o);const c=a?Object.entries(a):[],{internalProgram:h}=e,l=[];if(n)n.forEach(((r,a)=>{const n=Object.fromEntries(c.filter((([t,e])=>e.buffer==a)));let s=null;if(void 0!==r){if("internalBuffer"in r){const{target:e,internalBuffer:a}=r;s=r,t.bindBuffer(e,a);const{byteStride:n,vertexAttributes:i}=s;Object.entries(i).forEach((([e,r])=>{const{numComponents:a,componentType:s,normalize:i,byteOffset:o,divisor:c,constant:l,constantValue:u}=r,f=t.getAttribLocation(h,e);if(f>-1)if(t.vertexAttribPointer(f,a,s,i,n,o),c>0&&t.vertexAttribDivisor(f,c),l&&u)switch(a){case 1:t.vertexAttrib1fv(f,u);break;case 2:t.vertexAttrib2fv(f,u);break;case 3:t.vertexAttrib3fv(f,u);break;case 4:t.vertexAttrib4fv(f,u)}else t.enableVertexAttribArray(f)}))}else if(n){const{usage:a,interleaved:i}=r;s=this.createVertexArrayBuffer(t,e,n,a,i)}}else n&&(s=this.createVertexArrayBuffer(t,e,n));if(null===s)return null;l.push(s)}));else if(a){let r=null;if(r=this.createVertexArrayBuffer(t,e,a),null===r)return null;l.push(r)}let u;if(void 0!==i)if("internalBuffer"in i){const{target:e,internalBuffer:r}=i;u=i,t.bindBuffer(e,r)}else s&&(u=this.createVertexElementArrayBuffer(t,s));else s&&(u=this.createVertexElementArrayBuffer(t,s));return null===u?null:{verticesBuffers:l,elementBuffer:u,program:e,internalVertexArray:o}}static deleteVertexArray(t,e){const{internalVertexArray:r}=e;t.isVertexArray(r)&&t.deleteVertexArray(r)}static getElementArrayBufferType(t){return t instanceof Uint8Array?z.UNSIGNED_BYTE:t instanceof Uint16Array?z.UNSIGNED_SHORT:z.UNSIGNED_INT}}var q,K=class{constructor(t={},e,r){if(t){const a=Object.entries(t),n=a.reduce(((t,[e,r])=>t+r.array.byteLength),0),s=new ArrayBuffer(n),i=r?a.reduce(((t,[e,r])=>{const{array:a,type:n}=r;return t+a.BYTES_PER_ELEMENT*j.getDataTypeNumComponents(n)}),0):0,o=Math.trunc(n/i);this.attributes={},this.indices=e,this.interleaved=r??!1,this.stride=i,this.buffer=s;let c=0;r?Object.entries(t).forEach((([t,e])=>{const{array:r,type:a,constant:n,normalize:h}=e,l=j.getArrayComponentType(r),u=j.getDataTypeNumComponents(a),f=j.getComponentTypeArrayConstructor(j.getArrayComponentType(r)),{byteLength:E,BYTES_PER_ELEMENT:y}=r,A=new f(s,c),T=i/y;for(let t=0;t<o;t++){let e=t*u;A.set(r.slice(e,e+u),t*T)}this.attributes[t]={type:a,byteOffset:c,byteLength:E,componentType:l,constant:n,normalize:h},c+=u*y})):Object.entries(t).forEach((([t,e])=>{const{array:r,type:a}=e,{byteLength:n}=r,i=j.getArrayComponentType(r);new(j.getComponentTypeArrayConstructor(j.getArrayComponentType(r)))(s,c).set(r),this.attributes[t]={byteOffset:c,byteLength:n,type:a,componentType:i},c+=n}))}else this.attributes={},this.indices=void 0,this.interleaved=!1,this.stride=0,this.buffer=new ArrayBuffer(0)}toBlob(){const{attributes:t,buffer:e,stride:r,interleaved:a,indices:n}=this,s=new Uint8Array(e),{length:i}=s,o=Uint8Array.from(n??[]),c=n?.length??0,h=(new TextEncoder).encode(JSON.stringify({attributes:t,stride:r,interleaved:a})),{length:l}=h,u=new Uint8Array(4+l+c+i),{buffer:f}=u,E=new Uint16Array(f,0,2),y=E.length*(Uint16Array.BYTES_PER_ELEMENT/Uint8Array.BYTES_PER_ELEMENT);return E[0]=l,E[1]=c,u.set(h,y),u.set(o,y+l),u.set(s,y+l+c),new Blob([u],{type:"application/octet-stream"})}static async fromBlob(t){const e=await t.arrayBuffer(),r=new Uint16Array(e,0,2),{byteLength:a}=r,n=r[0],s=r[1],i=new Uint8Array(e,a,n),o=s<Math.pow(2,8)?Uint8Array:s<Math.pow(2,16)?Uint16Array:Uint32Array,c=new o(e.slice(a+n*Uint8Array.BYTES_PER_ELEMENT,s*o.BYTES_PER_ELEMENT)),h=e.slice(a+(s+n)*Uint8Array.BYTES_PER_ELEMENT),l=JSON.parse((new TextDecoder).decode(i)),{attributes:u,interleaved:f,stride:E}=l,y=new K;return y.buffer=h,y.attributes=u,y.interleaved=f,y.stride=E,y.indices=c,y}getAttribute(t){const{attributes:e}=this,r=e[t];if(r){const{buffer:t,interleaved:e,stride:a}=this,{type:n,byteOffset:s,byteLength:i,componentType:o}=r,c=j.getComponentTypeArrayConstructor(o),h=i/c.BYTES_PER_ELEMENT,l=j.getDataTypeNumComponents(n),{byteLength:u}=t,{BYTES_PER_ELEMENT:f}=c,E=new c(h);if(e){const e=new c(t,s),r=a,n=Math.trunc(u/r),i=r/f;for(let t=0;t<n;t++){let r=i*t;E.set(e.slice(r,r+l),l*t)}}else{const e=new c(t,s,h);E.set(e)}return{array:E,type:n}}return null}};!function(t){t[t.VERTICES=0]="VERTICES",t[t.UVS=1]="UVS",t[t.NORMALS=2]="NORMALS",t[t.TANGENTS=3]="TANGENTS"}(q||(q={}));class Z{constructor(t,e){this.center=t,this.radius=e}transform(t){const{center:e}=this;t.transformPoint(e)}containsPoint(t){const{center:e,radius:r}=this;return e.distance(t)<r}hitsSphere(t){const{center:e,radius:r}=this,{center:a,radius:n}=t;return e.distance(a)<r+n}hitsBox(t){const{center:e,radius:r}=this,{x:a,y:n,z:s}=e,{min:i,max:o}=t,{x:c,y:h,z:l}=i,{x:u,y:f,z:E}=o,y=Math.max(c,Math.min(a,u)),A=Math.max(h,Math.min(n,f)),T=Math.max(l,Math.min(s,E));return Math.sqrt((y-a)*(y-a)+(A-n)*(A-n)+(T-s)*(T-s))<r}}const Q=new Array(8).fill(0).map((t=>new c));var $,J,tt,et,rt,at,nt=class{constructor(t,e){this.min=t,this.max=e}static fromBoxes(...t){const e=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;let a=e,n=e,s=e,i=r,o=r,h=r;return t.forEach((t=>{const{min:e,max:r}=t,{x:c,y:l,z:u}=e,{x:f,y:E,z:y}=r;c<a?a=c:f>i&&(i=f),l<n?n=l:E>o&&(o=E),u<s?s=u:y>h&&(h=y)})),new nt(new c(a,n,s),new c(i,o,h))}hits(t){const{min:e,max:r}=this,{x:a,y:n,z:s}=e,{x:i,y:o,z:c}=r,{min:h,max:l}=t,{x:u,y:f,z:E}=h,{x:y,y:A,z:T}=l;return a<=y&&i>=u&&n<=A&&o>=f&&s<=T&&c>=E}transform(t){const{min:e,max:r}=this;let{x:a,y:n,z:s}=e,{x:i,y:o,z:c}=r;Q[0].setValues(a,n,s),Q[1].setValues(a,n,c),Q[2].setValues(a,o,s),Q[3].setValues(i,n,s),Q[4].setValues(a,o,c),Q[5].setValues(i,n,c),Q[6].setValues(i,o,s),Q[7].setValues(i,o,c);const{POSITIVE_INFINITY:h,NEGATIVE_INFINITY:l}=Number;return a=n=s=h,i=o=c=l,Q.forEach((e=>{t.transformPoint(e);const[r,h,l]=e;r<a?a=r:r>i&&(i=r),h<n?n=h:h>o&&(o=h),l<s?s=l:l>c&&(c=l)})),e.setValues(a,n,s),r.setValues(i,o,c),this}getEdges(t){const{min:e,max:r}=this,{x:a,y:n,z:s}=e,{x:i,y:o,z:c}=r;return t[0].setValues(i-a,0,0),t[1].setValues(0,o-n,0),t[2].setValues(0,0,c-s),t}getExtents(t){const{min:e,max:r}=this,{x:a,y:n,z:s}=e,{x:i,y:o,z:c}=r;return t[0].setValues(a,n,s),t[1].setValues(a,n,c),t[2].setValues(a,o,s),t[3].setValues(i,n,s),t[4].setValues(a,o,c),t[5].setValues(i,n,c),t[6].setValues(i,o,s),t[7].setValues(i,o,c),t}transformed(t){const{min:e,max:r}=this,{x:a,y:n,z:s}=e,{x:i,y:o,z:h}=r;return new nt(new c(a,n,s),new c(i,o,h)).transform(t)}},st=class{constructor(){this.halfEdges=[],this.vertices=[],this.faces=[]}clone(){return Object.assign(Object.create(this.constructor.prototype),structuredClone(this))}addTriangleFace(t,e,r,a){this.addFace([t,e,r],a)}addQuadFace(t,e,r,a,n){this.addFace([t,e,r,a],n)}addVertex(t){const{vertices:e}=this,r={position:t,halfEdgeID:null};return e.push(r)-1}addFace(t,e){const{halfEdges:r,vertices:a,faces:n}=this,{length:s}=t;if(s<2)return void console.error("At least 2 vertices are required to create a face.");const i={halfEdgeID:null,...e},o=n.length;let c=null,h=null,l=null,u=null,f=null,E=null;for(let e=0;e<s;e++){if(c=t[e],h=e<s-1?t[e+1]:t[0],Array.from(this.vertexFacesIterator(c)).find((t=>null!==t&&Array.from(this.faceHalfEdgesIterator(t)).find((t=>{const{targetID:e,prevID:a}=r[t];return e===h&&r[a??-1]?.targetID===c})))))continue;u={targetID:h,twinID:null,nextID:null,prevID:null,faceID:o},f=r.length,null===E?(i.halfEdge=f,l=f):(u.prevID=E,r[E].nextID=f);const n=a[c];null===n.halfEdgeID&&(n.halfEdgeID=f);const y=r.find((t=>{const{targetID:e,prevID:a}=t;return e===c&&r[a??-1]?.targetID===h}))??null;null!==y&&(u.twinID=r.indexOf(y),y.twinID=f),E=f,r.push(u)}null!==u&&null!==l&&(r[l].prevID=f,u.nextID=l),n.push(i)}linesArray(){const{faces:t,vertices:e}=this;return new Float32Array(t.flatMap(((t,r)=>{const a=Array.from(this.faceVerticesIterator(r));if(4===a.length){const[t,r,n,s]=a.map((t=>e[t].position));return[...t,...r,...r,...n,...n,...s,...s,...t]}{const[t,r,n]=a.map((t=>e[t].position));return[...t,...r,...r,...n,...n,...t]}})))}verticesArray(){const{faces:t,vertices:e}=this;return new Float32Array(t.flatMap(((t,r)=>Array.from(this.faceVerticesIterator(r)).flatMap((t=>Array.from(e[t].position))))))}tangentsArray(){const{faces:t,vertices:e}=this;return new Float32Array(t.flatMap(((t,r)=>{const a=Array.from(this.faceVerticesIterator(r)),n=t.uv,[s,i,o]=a.map((t=>e[t].position)),[c,h,l]=n,u=i.map(((t,e)=>s[e]-t)),f=i.map(((t,e)=>o[e]-t)),E=h.map(((t,e)=>c[e]-t)),y=h.map(((t,e)=>l[e]-t)),A=1/(E[0]*y[1]-E[1]*y[0]),T=u.map(((t,e)=>-(t*y[1]-f[e]*E[1])*A)),d=Math.hypot(...T);return t.tangent=T.map((t=>t/d)),a.flatMap((()=>Array.from(t.tangent)))})))}normalsArray(){const{faces:t,vertices:e}=this;return new Float32Array(t.flatMap(((t,r)=>{const a=Array.from(this.faceVerticesIterator(r)),[n,s,i]=a.map((t=>e[t].position)),o=s.map(((t,e)=>n[e]-t)),c=s.map(((t,e)=>i[e]-t)),h=o.map(((t,e)=>{const r=(e+1)%3,a=(e-1+3)%3;return-(o[r]*c[a]-o[a]*c[r])})),l=Math.hypot(...h);return t.normal=h.map((t=>t/l)),a.flatMap((()=>Array.from(t.normal)))})))}uvsArray(){const{faces:t}=this;return new Float32Array(t.flatMap((t=>t.uv.flat(1))))}trianglesIndicesArray(){const{faces:t}=this,e=t.reduce(((t,e,r)=>t+Array.from(this.faceVerticesIterator(r)).length),0);return new(e<Math.pow(2,8)?Uint8Array:e<Math.pow(2,16)?Uint16Array:Uint32Array)(t.reduce((([t,e],r,a)=>4===Array.from(this.faceVerticesIterator(a)).length?[t.concat([e,e+1,e+2,e+1,e+3,e+2]),e+4]:[t.concat([e,e+1,e+2]),e+3]),[[],0])[0])}linesIndicesArray(){const{faces:t}=this,e=t.reduce(((t,e,r)=>t+2*Array.from(this.faceVerticesIterator(r)).length),0);return new(e<Math.pow(2,8)?Uint8Array:e<Math.pow(2,16)?Uint16Array:Uint32Array)(t.reduce((([t,e],r,a)=>4===Array.from(this.faceVerticesIterator(a)).length?[t.concat([e,e+1,e+1,e+3,e+3,e+2,e+2,e]),e+4]:[t.concat([e,e+1,e+1,e+2,e+2,e]),e+3]),[[],0])[0])}boundingBox(){const t=Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY;let r=t,a=t,n=t,s=e,i=e,o=e;const{vertices:h}=this;h.length>0&&h.forEach((t=>{const[e,c,h]=t.position;e<r?r=e:e>s&&(s=e),c<a?a=c:c>i&&(i=c),h<n?n=h:h>o&&(o=h)}));const l=new c([r,a,n]),u=new c([s,i,o]);return new nt(l,u)}boundingSphere(){const t=Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY;let r=t,a=t,n=t,s=e,i=e,o=e;const{vertices:h}=this;h.length>0&&h.forEach((t=>{const[e,c,h]=t.position;e<r?r=e:e>s&&(s=e),c<a?a=c:c>i&&(i=c),h<n?n=h:h>o&&(o=h)}));const l=new c([r,a,n]),u=new c([s,i,o]);return new Z(new c,Math.max(l.length(),u.length()))}faceHalfEdgesIterator(t){return new it(this,t)}faceVerticesIterator(t){return new ot(this,t)}vertexFacesIterator(t){return new ct(this,t)}};class it{constructor(t,e){this.geometry=t,this.faceID=e,this.halfEdgeID=null}reset(){this.halfEdgeID=null}current(){return this.halfEdgeID}next(){const{halfEdgeID:t,faceID:e,geometry:r}=this,{faces:a,halfEdges:n}=r,s=a[e];if(null!==s)if(null===t){const t=s.halfEdgeID??null,e=a[t??-1]?.nextID??null;if(this.halfEdgeID=e,null!==t)return{value:t,done:null===e}}else if(t!==s.halfEdge){const e=n[t].nextID??null;if(this.halfEdgeID=e,null!==t)return{value:t,done:null===e}}return{value:void 0,done:!0}}[Symbol.iterator](){return this.halfEdgeID=null,this}}class ot{constructor(t,e){this.geometry=t,this.faceID=e,this.halfEdgeID=null}reset(){this.halfEdgeID=null}current(){const{halfEdgeID:t,geometry:e}=this,{halfEdges:r}=e;return r[r[t??-1]?.prevID??-1]?.targetID??null}next(){const{halfEdgeID:t,geometry:e,faceID:r}=this,{faces:a,halfEdges:n}=e,s=a[r??-1];if(null!==s){const{halfEdge:e}=s;if(null===t){const t=n[n[e??-1].prevID??-1].targetID??null,r=n[e??-1].nextID??null;if(this.halfEdgeID=r,null!==t)return{value:t,done:null===r}}else if(t!==s.halfEdge){const e=n[n[t].prevID??-1].targetID??null,r=n[t].nextID??null;if(this.halfEdgeID=r,null!==e)return{value:e,done:null===r}}}return{value:void 0,done:!0}}[Symbol.iterator](){return this.halfEdgeID=null,this}}class ct{constructor(t,e){this.geometry=t,this.vertexID=e,this.halfEdgeID=null}reset(){this.halfEdgeID=null}current(){const{geometry:t,halfEdgeID:e}=this,{halfEdges:r}=t;return r[e??-1].faceID??null}next(){const{halfEdgeID:t,vertexID:e,geometry:r}=this,{halfEdges:a,vertices:n}=r,s=n[e??-1];if(s){const{halfEdgeID:e}=s;if(null===t){const t=a[e??-1]?.faceID??null,r=a[a[e??-1]?.prevID??-1]?.twinID??null;if(this.halfEdgeID=r,null!==t)return{value:t,done:null===r}}else if(t!==s.halfEdgeID){const e=a[t]?.faceID??null,r=a[a[t].prevID??-1].twinID??null;if(this.halfEdgeID=r,null!==e)return{value:e,done:null===r}}}return{value:void 0,done:!0}}[Symbol.iterator](){return this.halfEdgeID=null,this}}class ht extends class{toBuilder(){throw new Error("No builder defined.")}}{constructor(t){super();const{width:e,height:r,depth:a,widthSegments:n,heightSegments:s,depthSegments:i}=t??{};this.width=e??1,this.height=r??1,this.depth=a??1,this.widthSegments=n??1,this.heightSegments=s??1,this.depthSegments=i??1}toBuilder(){const t=new st,{width:e,height:r,depth:a}=this;let{widthSegments:n,heightSegments:s,depthSegments:i}=this;n=Math.floor(n),s=Math.floor(s),i=Math.floor(i);const o=[],c=[],h=[];let l=0;[[2,1,0,-1,-1,a,r,e,i,s],[2,1,0,1,-1,a,r,-e,i,s],[0,2,1,1,1,e,a,r,n,i],[0,2,1,1,-1,e,a,-r,n,i],[0,1,2,1,-1,e,r,a,n,s],[0,1,2,-1,-1,e,r,-a,n,s]].forEach((([t,e,r,a,n,s,i,u,f,E])=>{const y=s/f,A=i/E,T=s/2,d=i/2,_=u/2,m=f+1,R=E+1;let g=0;for(let s=0;s<R;s++){const i=s*A-d;for(let o=0;o<m;o++){const l=o*y-T,u=new Array(3);u[t]=l*a,u[e]=i*n,u[r]=_,c.push(...u),h.push(o/f,1-s/E),g++}}for(let t=0;t<E;t++)for(let e=0;e<f;e++){const r=l+e+m*t,a=l+e+m*(t+1),n=l+(e+1)+m*(t+1),s=l+(e+1)+m*t;o.push(r,a,s,n)}l+=g}));const{length:u}=o,f=[],E=[];for(let e=0;e<u;e+=4){const r=3*o[e],a=3*o[e+1],n=3*o[e+2],s=3*o[e+3],i=2*o[e],l=2*o[e+1],u=2*o[e+2],y=2*o[e+3];let A=f[r],T=f[a],d=f[n],_=f[s];void 0===A&&(A=t.addVertex([c[r],c[r+1],c[r+2]]),f[r]=A),void 0===T&&(T=t.addVertex([c[a],c[a+1],c[a+2]]),f[a]=T),void 0===d&&(d=t.addVertex([c[n],c[n+1],c[n+2]]),f[n]=d),void 0===_&&(_=t.addVertex([c[s],c[s+1],c[s+2]]),f[s]=_);let m=E[i],R=E[l],g=E[u],p=E[y];void 0===m&&(m=[h[i],h[i+1]],E[i]=m),void 0===R&&(R=[h[l],h[l+1]],E[l]=R),void 0===g&&(g=[h[u],h[u+1]],E[u]=g),void 0===p&&(p=[h[y],h[y+1]],E[y]=p),t.addQuadFace(A,T,d,_,{uv:[m,R,g,p]})}return t}}!function(t){t[t.VERTICES=0]="VERTICES",t[t.UVS=1]="UVS",t[t.NORMALS=2]="NORMALS",t[t.TANGENTS=3]="TANGENTS"}($||($={}));class lt extends class{toBuilder(){throw new Error("No builder defined.")}}{constructor(t){super(),this.width=t?.width??1,this.height=t?.height??1,this.widthSegments=t?.widthSegments??1,this.heightSegments=t?.heightSegments??1}toBuilder(){const t=new st,{heightSegments:e,widthSegments:r,width:a,height:n}=this,s=a/2,i=n/2,o=Math.floor(r),c=Math.floor(e),h=o+1,l=c+1,u=a/o,f=n/c,E=[],y=[],A=[];for(let t=0;t<l;t++){const e=t*f-i;for(let r=0;r<h;r++){const a=r*u-s;y.push(a,-e,0),A.push(r/o),A.push(1-t/c)}}for(let t=0;t<c;t++)for(let e=0;e<o;e++){const r=e+h*t,a=e+h*(t+1),n=e+1+h*(t+1),s=e+1+h*t;E.push(r,a,s),E.push(a,n,s)}const{length:T}=E,d=[],_=[];for(let e=0;e<T;e+=3){const r=3*E[e],a=3*E[e+1],n=3*E[e+2],s=2*E[e],i=2*E[e+1],o=2*E[e+2];let c=d[r],h=d[a],l=d[n];null==c&&(c=t.addVertex([y[r],y[r+1],y[r+2]]),d[r]=c),null==h&&(h=t.addVertex([y[a],y[a+1],y[a+2]]),d[a]=h),null==l&&(l=t.addVertex([y[n],y[n+1],y[n+2]]),d[n]=l);let u=_[s],f=_[i],T=_[o];null==u&&(u=[A[s],A[s+1]],_[s]=u),null==f&&(f=[A[i],A[i+1]],_[i]=f),null==T&&(T=[A[o],A[o+1]],_[o]=T),t.addTriangleFace(c,h,l,{uv:[u,f,T]})}return t}}!function(t){t[t.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",t[t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",t[t.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED"}(J||(J={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(tt||(tt={})),function(t){t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",t[t.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",t[t.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",t[t.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",t[t.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",t[t.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",t[t.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",t[t.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",t[t.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",t[t.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",t[t.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",t[t.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",t[t.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",t[t.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",t[t.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",t[t.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",t[t.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",t[t.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT"}(et||(et={})),function(t){t[t.R8=33321]="R8",t[t.R8UI=33330]="R8UI",t[t.R8I=33329]="R8I",t[t.R16UI=33332]="R16UI",t[t.R16I=33331]="R16I",t[t.R32UI=33334]="R32UI",t[t.R32I=33333]="R32I",t[t.RG8=33323]="RG8",t[t.RG8UI=33336]="RG8UI",t[t.RG8I=33335]="RG8I",t[t.RG16UI=33338]="RG16UI",t[t.RG16I=33337]="RG16I",t[t.RG32UI=33340]="RG32UI",t[t.RG32I=33339]="RG32I",t[t.RGB8=32849]="RGB8",t[t.RGBA8=32856]="RGBA8",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.RGBA4=32854]="RGBA4",t[t.RGB565=36194]="RGB565",t[t.RGB5_A1=32855]="RGB5_A1",t[t.RGB10_A2=32857]="RGB10_A2",t[t.RGBA8UI=36220]="RGBA8UI",t[t.RGBA8I=36238]="RGBA8I",t[t.RGB10_A2UI=36975]="RGB10_A2UI",t[t.RGBA16UI=36214]="RGBA16UI",t[t.RGBA16I=36232]="RGBA16I",t[t.RGBA32I=36226]="RGBA32I",t[t.RGBA32UI=36208]="RGBA32UI",t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",t[t.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",t[t.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",t[t.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8"}(rt||(rt={})),function(t){t[t.NONE=0]="NONE",t[t.BACK=1029]="BACK",t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",t[t.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",t[t.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",t[t.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",t[t.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",t[t.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",t[t.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",t[t.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",t[t.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",t[t.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",t[t.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",t[t.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",t[t.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",t[t.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",t[t.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"}(at||(at={}));class ut{static createFramebuffer(t){const e=t.createFramebuffer();return null===e?null:{internalFramebuffer:e}}static createRenderbuffer(t,e){const r=t.createRenderbuffer();if(null===r)return null;t.bindRenderbuffer(t.RENDERBUFFER,r);const{samples:a,internalFormat:n,width:s,height:i}=e;return void 0!==a?t.renderbufferStorageMultisample(t.RENDERBUFFER,a,n,s,i):t.renderbufferStorage(t.RENDERBUFFER,n,s,i),t.bindRenderbuffer(t.RENDERBUFFER,null),{...e,internalRenderbuffer:r}}static attachTexture(t,e,...r){const{internalFramebuffer:a}=e;t.getParameter(t.FRAMEBUFFER_BINDING)!==a&&t.bindFramebuffer(t.FRAMEBUFFER,a);const n=r.map((r=>{const{attachment:a,textureTarget:n,texture:s}=r,{internalTexture:i}=s;return t.framebufferTexture2D(t.FRAMEBUFFER,a,n,i,0),{...r,...e}})),s=t.checkFramebufferStatus(t.FRAMEBUFFER);return s!==J.FRAMEBUFFER_COMPLETE&&console.warn(`Incomplete framebuffer status: ${J[s]}`),this.unbindFramebuffer(t),n}static drawBuffers(t,e,r){const{internalFramebuffer:a}=e;t.getParameter(t.FRAMEBUFFER_BINDING)!==a&&t.bindFramebuffer(t.FRAMEBUFFER,a),t.drawBuffers(r);const n=t.checkFramebufferStatus(t.FRAMEBUFFER);n!==J.FRAMEBUFFER_COMPLETE&&console.warn(`Incomplete framebuffer status: ${J[n]}`),this.unbindFramebuffer(t)}static attachRenderbuffer(t,e,...r){const{internalFramebuffer:a}=e;t.getParameter(t.FRAMEBUFFER_BINDING)!==a&&t.bindFramebuffer(t.FRAMEBUFFER,a);const n=r.map((r=>(t.framebufferRenderbuffer(t.FRAMEBUFFER,r.attachment,t.RENDERBUFFER,r.renderbuffer.internalRenderbuffer),{...r,...e}))),s=t.checkFramebufferStatus(t.FRAMEBUFFER);return s!==J.FRAMEBUFFER_COMPLETE&&console.warn(`Incomplete framebuffer status: ${J[s]}`),this.unbindFramebuffer(t),n}static blit(t,e,r,a,n,s,i){if(t.getParameter(t.READ_FRAMEBUFFER_BINDING)!==e){const r=e?.internalFramebuffer??null;t.bindFramebuffer(t.READ_FRAMEBUFFER,r)}if(t.getParameter(t.DRAW_FRAMEBUFFER_BINDING)!==r){const e=r?.internalFramebuffer??null;t.bindFramebuffer(t.DRAW_FRAMEBUFFER,e)}t.blitFramebuffer(a[0],a[1],a[2],a[3],n[0],n[1],n[2],n[3],s,i),this.unbindFramebuffer(t)}static readPixels(t,e,r,a,n,s,i,o){t.readPixels(e,r,a,n,s,i,o)}static bindFramebuffer(t,e){const{internalFramebuffer:r}=e;t.bindFramebuffer(t.FRAMEBUFFER,r)}static unbindFramebuffer(t){t.bindFramebuffer(t.FRAMEBUFFER,null)}static deleteFramebuffer(t,e){const{internalFramebuffer:r}=e;t.isFramebuffer(r)&&t.deleteFramebuffer(r)}static deleteRenderbuffer(t,e){const{internalRenderbuffer:r}=e;t.isRenderbuffer(r)&&t.deleteRenderbuffer(r)}}var ft,Et,yt,At,Tt,dt,_t,mt,Rt,gt,pt,Nt,It,Mt,wt,St=function(t,e,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!a:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(t):a?a.value:e.get(t)};!function(t){t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.RED=6403]="RED",t[t.RG=33319]="RG",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER"}(yt||(yt={})),function(t){t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",t[t.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",t[t.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",t[t.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",t[t.R8=33321]="R8",t[t.R8_SNORM=36756]="R8_SNORM",t[t.RG8=33323]="RG8",t[t.RG8_SNORM=36757]="RG8_SNORM",t[t.RGB8=32849]="RGB8",t[t.RGB8_SNORM=36758]="RGB8_SNORM",t[t.RGB565=36194]="RGB565",t[t.RGBA8=32856]="RGBA8",t[t.RGBA4=32854]="RGBA4",t[t.RGB5_A1=32855]="RGB5_A1",t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGB10_A2UI=36975]="RGB10_A2UI",t[t.SRGB=35904]="SRGB",t[t.SRGB8=35905]="SRGB8",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.R16F=33325]="R16F",t[t.RGB16F=34843]="RGB16F",t[t.RGBA16F=34842]="RGBA16F",t[t.R32F=33326]="R32F",t[t.RG32F=33328]="RG32F",t[t.RGB32F=34837]="RGB32F",t[t.RGBA32F=34836]="RGBA32F",t[t.R11F_G11F_B10F=35898]="R11F_G11F_B10F",t[t.RGB9_E5=35901]="RGB9_E5",t[t.R8UI=33330]="R8UI",t[t.R16I=33331]="R16I",t[t.R16UI=33332]="R16UI",t[t.R32I=33333]="R32I",t[t.R32UI=33334]="R32UI",t[t.RG8I=33335]="RG8I",t[t.RG8UI=33336]="RG8UI",t[t.RG16I=33337]="RG16I",t[t.RG16UI=33338]="RG16UI",t[t.RG32I=33339]="RG32I",t[t.RG32UI=33340]="RG32UI",t[t.RGB8I=36239]="RGB8I",t[t.RGB8UI=36221]="RGB8UI",t[t.RGB16I=36233]="RGB16I",t[t.RGB16UI=36215]="RGB16UI",t[t.RGB32I=36227]="RGB32I",t[t.RGB32UI=36209]="RGB32UI",t[t.RGBA8I=36238]="RGBA8I",t[t.RGBA8UI=36220]="RGBA8UI",t[t.RGBA16I=36232]="RGBA16I",t[t.RGBA16UI=36214]="RGBA16UI",t[t.RGBA32I=36226]="RGBA32I",t[t.RGBA32UI=36208]="RGBA32UI"}(At||(At={})),function(t){t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=5131]="HALF_FLOAT",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV"}(Tt||(Tt={})),function(t){t[t.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",t[t.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",t[t.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",t[t.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",t[t.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",t[t.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",t[t.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",t[t.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",t[t.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",t[t.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",t[t.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE"}(dt||(dt={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_3D=32879]="TEXTURE_3D",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(_t||(_t={})),function(t){t[t.LINEAR=9729]="LINEAR",t[t.NEAREST=9728]="NEAREST"}(mt||(mt={})),function(t){t[t.LINEAR=9729]="LINEAR",t[t.NEAREST=9728]="NEAREST",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(Rt||(Rt={})),function(t){t[t.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",t[t.NONE=0]="NONE"}(gt||(gt={})),function(t){t[t.REPEAT=10497]="REPEAT",t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(pt||(pt={})),function(t){t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS"}(Nt||(Nt={}));class Ct{static getTexturesUnitsEntries(){return St(this,ft,"f",Et).entries()}static createTexture(t,e,r){const a=t.createTexture();if(null===a)return null;let n=St(this,ft,"f",Et).get(e);null==n&&(n=Math.max(-1,...St(this,ft,"f",Et).values())+1,St(this,ft,"f",Et).set(e,n));const{pixels:s,target:i,subimages:o,width:c,height:h,format:l,internalFormat:u,type:f}=r;let{lod:E,border:y,depth:A,mipmap:T}=r;switch(E=E??0,y=y??0,A=A??0,T=T??!0,t.getParameter(t.ACTIVE_TEXTURE)!==n&&(t.activeTexture(t.TEXTURE0+n),t.bindTexture(i,a)),i){case _t.TEXTURE_2D:t.texImage2D(i,E,u,c,h,y,l,f,s),o&&o.forEach((e=>{const{xoffset:r,yoffset:a,width:n,height:s,pixels:o}=e;t.texSubImage2D(i,E,r,a,n,s,l,f,o)}));break;case _t.TEXTURE_CUBE_MAP:if(null===s)t.texImage2D(i,E,u,c,h,y,l,f,null);else if("xPos"in s){const{xPos:e,xNeg:r,yPos:a,yNeg:n,zPos:i,zNeg:o}=s;t.texImage2D(_t.TEXTURE_CUBE_MAP_POSITIVE_X,E,u,c,h,y,l,f,e),t.texImage2D(_t.TEXTURE_CUBE_MAP_NEGATIVE_X,E,u,c,h,y,l,f,r),t.texImage2D(_t.TEXTURE_CUBE_MAP_POSITIVE_Y,E,u,c,h,y,l,f,a),t.texImage2D(_t.TEXTURE_CUBE_MAP_NEGATIVE_Y,E,u,c,h,y,l,f,n),t.texImage2D(_t.TEXTURE_CUBE_MAP_POSITIVE_Z,E,u,c,h,y,l,f,i),t.texImage2D(_t.TEXTURE_CUBE_MAP_NEGATIVE_Z,E,u,c,h,y,l,f,o)}break;case _t.TEXTURE_2D_ARRAY:t.texImage3D(i,E,u,c,h,A,y,l,f,s),o&&o.forEach(((e,r)=>{const{xoffset:a,yoffset:n,zoffset:s,width:o,height:c,depth:h,pixels:u}=e;t.texSubImage3D(i,E,a,n,s,o,c,h,l,f,u)}))}T&&t.generateMipmap(i);const{min:d,mag:_,wrapS:m,wrapT:R,wrapR:g,baseMipmapLevel:p,maxMipmapLevel:N,compareFunction:I,compareMode:M,minLod:w,maxLod:S}=r;return void 0!==d&&t.texParameteri(i,dt.TEXTURE_MIN_FILTER,d),void 0!==_&&t.texParameteri(i,dt.TEXTURE_MAG_FILTER,_),void 0!==m&&t.texParameteri(i,dt.TEXTURE_WRAP_S,m),void 0!==R&&t.texParameteri(i,dt.TEXTURE_WRAP_T,R),void 0!==g&&t.texParameteri(i,dt.TEXTURE_WRAP_R,g),void 0!==p&&t.texParameteri(i,dt.TEXTURE_BASE_LEVEL,p),void 0!==N&&t.texParameteri(i,dt.TEXTURE_MAX_LEVEL,N),void 0!==I&&t.texParameteri(i,dt.TEXTURE_COMPARE_FUNC,I),void 0!==M&&t.texParameteri(i,dt.TEXTURE_COMPARE_MODE,M),void 0!==w&&t.texParameterf(i,dt.TEXTURE_MIN_LOD,w),void 0!==S&&t.texParameterf(i,dt.TEXTURE_MAX_LOD,S),{unit:n,internalTexture:a,name:e,properties:{pixels:s,target:i,subimages:o,lod:E,width:c,height:h,format:l,internalFormat:u,type:f,min:d,mag:_,wrapS:m,wrapT:R,wrapR:g,baseMipmapLevel:p,maxMipmapLevel:N,compareFunction:I,compareMode:M,minLod:w,maxLod:S}}}static setUnpackAlignment(t,e){t.pixelStorei(t.UNPACK_ALIGNMENT,e)}static deleteTexture(t,e){const{internalTexture:r,name:a}=e;t.isTexture(r)&&(t.deleteTexture(r),St(this,ft,"f",Et).delete(a))}}ft=Ct,Et={value:new Map},function(t){t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER"}(It||(It={}));class Ot{static createShader(t,e,r){const a=t.createShader(e);if(null===a)return null;if(t.shaderSource(a,r),t.compileShader(a),t.getShaderParameter(a,t.COMPILE_STATUS))return{type:e,internalShader:a,source:r};const n=t.getShaderInfoLog(a);return null!==n&&console.warn(n),t.deleteShader(a),null}static createProgram(t,e){const{vertexSource:r,fragmentSource:a}=e,n=this.createShader(t,It.VERTEX_SHADER,r);if(null===n)return null;const s=this.createShader(t,It.FRAGMENT_SHADER,a);if(null===s)return null;const i=t.createProgram();if(null===i)return null;const o={internalProgram:i,vertexShader:n,fragmentShader:s};if(t.attachShader(i,n.internalShader),t.attachShader(i,s.internalShader),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS))return o;const c=t.getProgramInfoLog(i);if(null!==c){const e=t.getShaderInfoLog(n.internalShader),r=t.getShaderInfoLog(s.internalShader);console.warn(c),console.warn(e),console.warn(r)}return this.deleteProgram(t,o),null}static recompileProgram(t,e,r){const{internalProgram:a,vertexShader:n,fragmentShader:s}=e;let{vertexSource:i,fragmentSource:o}=r;if("string"==typeof i){const{internalShader:e}=n;t.shaderSource(e,i),t.compileShader(e),n.source=i}if("string"==typeof o){const{internalShader:e}=s;t.shaderSource(e,o),t.compileShader(e),s.source=o}if(t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS))return e;const c=t.getProgramInfoLog(a);if(null!==c){const e=t.getShaderInfoLog(n.internalShader),r=t.getShaderInfoLog(s.internalShader);console.warn(c),console.warn(e),console.warn(r)}return e}static deleteProgram(t,e){const{vertexShader:r,fragmentShader:a,internalProgram:n}=e;t.deleteShader(r.internalShader),t.deleteShader(a.internalShader),t.deleteProgram(n)}static useProgram(t,e){const{internalProgram:r}=e;t.getParameter(t.CURRENT_PROGRAM)!==r&&t.useProgram(r)}}!function(t){t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.INT=5124]="INT",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",t[t.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",t[t.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",t[t.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",t[t.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",t[t.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",t[t.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",t[t.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",t[t.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",t[t.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",t[t.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",t[t.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",t[t.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",t[t.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",t[t.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_3D=35679]="SAMPLER_3D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",t[t.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",t[t.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",t[t.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW"}(Mt||(Mt={})),function(t){t.SCALAR="SCALAR",t.VEC2="VEC2",t.VEC3="VEC3",t.VEC4="VEC4",t.MAT2="MAT2",t.MAT3="MAT3",t.MAT4="MAT4"}(wt||(wt={}));class Pt{static asArrayBufferView(t){return"object"==typeof t?"buffer"in t?t:"unit"in t?Float32Array.of(t.unit):Float32Array.from(t):Float32Array.of(t)}static getUniformSetter(t,e,r,a){const{value:n,srcOffset:s,srcLength:i}=e;let{transpose:o=!1}=e;switch(a){case Mt.FLOAT:if("number"==typeof n)return{type:a,set:e=>{t.uniform1f(r,e)}};break;case Mt.UNSIGNED_INT:if("number"==typeof n)return{type:a,set:e=>{t.uniform1ui(r,e)}};break;case Mt.BOOL:case Mt.INT:if("number"==typeof n)return{type:a,set:e=>{t.uniform1i(r,e)}};break;case Mt.INT_SAMPLER_2D:case Mt.INT_SAMPLER_2D_ARRAY:case Mt.INT_SAMPLER_3D:case Mt.INT_SAMPLER_CUBE:case Mt.SAMPLER_2D:case Mt.SAMPLER_3D:case Mt.SAMPLER_CUBE:case Mt.SAMPLER_2D_SHADOW:case Mt.SAMPLER_2D_ARRAY:case Mt.SAMPLER_2D_ARRAY_SHADOW:case Mt.SAMPLER_CUBE_SHADOW:case Mt.UNSIGNED_INT_SAMPLER_2D:case Mt.UNSIGNED_INT_SAMPLER_3D:case Mt.UNSIGNED_INT_SAMPLER_CUBE:case Mt.UNSIGNED_INT_SAMPLER_2D_ARRAY:if("object"==typeof n&&"unit"in n)return{type:a,set:e=>{const{unit:a}=e;t.uniform1i(r,a)}};break;case Mt.FLOAT_VEC2:if(n instanceof Float32Array||Array.isArray(n))return{type:a,set:e=>{t.uniform2fv(r,e,s,i)}};break;case Mt.BOOL_VEC2:case Mt.INT_VEC2:if(n instanceof Int32Array||Array.isArray(n))return{type:a,set:e=>{t.uniform2iv(r,e)}};break;case Mt.UNSIGNED_INT_VEC2:if(n instanceof Uint32Array||Array.isArray(n))return{type:a,set:e=>{t.uniform2uiv(r,e,s,i)}};break;case Mt.FLOAT_VEC3:if(n instanceof Float32Array||Array.isArray(n))return{type:a,set:e=>{t.uniform3fv(r,e,s,i)}};break;case Mt.BOOL_VEC3:case Mt.INT_VEC3:if(n instanceof Int32Array||Array.isArray(n))return{type:a,set:e=>{t.uniform3iv(r,e,s,i)}};break;case Mt.UNSIGNED_INT_VEC3:if(n instanceof Uint32Array||Array.isArray(n))return{type:a,set:e=>{t.uniform3uiv(r,e,s,i)}};break;case Mt.FLOAT_VEC4:if(n instanceof Float32Array||Array.isArray(n))return{type:a,set:e=>{t.uniform4fv(r,e,s,i)}};break;case Mt.BOOL_VEC4:case Mt.INT_VEC4:if(n instanceof Int32Array||Array.isArray(n))return{type:a,set:e=>{t.uniform4iv(r,e,s,i)}};break;case Mt.UNSIGNED_INT_VEC4:if(n instanceof Uint32Array||Array.isArray(n))return{type:a,set:e=>{t.uniform4uiv(r,e,s,i)}};break;case Mt.FLOAT_MAT2:if(n instanceof Float32Array||Array.isArray(n))return{type:a,set:e=>{t.uniformMatrix2fv(r,o,e,s,i)}};break;case Mt.FLOAT_MAT3:if(n instanceof Float32Array||Array.isArray(n))return{type:a,set:e=>{t.uniformMatrix3fv(r,o,e,s,i)}};break;case Mt.FLOAT_MAT4:if(n instanceof Float32Array||Array.isArray(n))return{type:a,set:e=>{t.uniformMatrix4fv(r,o,e)}};break;case Mt.FLOAT_MAT2x3:if(n instanceof Float32Array||Array.isArray(n))return{type:a,set:e=>{t.uniformMatrix2x3fv(r,o,e,s,i)}};break;case Mt.FLOAT_MAT2x4:if(n instanceof Float32Array||Array.isArray(n))return{type:a,set:e=>{t.uniformMatrix2x4fv(r,o,e,s,i)}};break;case Mt.FLOAT_MAT3x2:if(n instanceof Float32Array||Array.isArray(n))return{type:a,set:e=>{t.uniformMatrix3x2fv(r,o,e,s,i)}};break;case Mt.FLOAT_MAT3x4:if(n instanceof Float32Array||Array.isArray(n))return{type:a,set:e=>{t.uniformMatrix3x4fv(r,o,e,s,i)}};break;case Mt.FLOAT_MAT4x2:if(n instanceof Float32Array||Array.isArray(n))return{type:a,set:e=>{t.uniformMatrix4x2fv(r,o,e,s,i)}};break;case Mt.FLOAT_MAT4x3:if(n instanceof Float32Array||Array.isArray(n))return{type:a,set:e=>{t.uniformMatrix4x3fv(r,o,e,s,i)}}}return null}static getUniformsListSetter(t,e,r){const{internalProgram:a}=e,n=Object.keys(r);let s=t.getUniformIndices(a,n);if(null===s)return console.error("No uniform indices found."),null;const i=t.getProgramParameter(a,t.ACTIVE_UNIFORMS),o=Array.from(s).filter(((t,e)=>{const r=t>=0&&t<i;return r||console.warn(`Uniform ${n[e]} could not be located.`),r})),c={};return o.map((e=>t.getActiveUniform(a,e))).forEach((({name:e,type:n})=>{const s=r[e],i=t.getUniformLocation(a,e);if(null===i)return console.warn(`Uniform ${e} could not be located.`),null;const o=this.getUniformSetter(t,s,i,n);o&&(c[e]=o)})),{setters:c,program:e}}static setUniformsListValues(t,e,r){const{program:a,setters:n}=e;Ot.useProgram(t,a),Object.entries(r).forEach((([t,e])=>{if(t in n){const r=n[t],{value:a}=e;r.set(a)}else console.error(`Uniform ${t} does not match any of the given setters.`)}))}}var bt,vt;class Lt{static getBindingPointsEntries(){return function(t,e,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!a:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(t):a?a.value:e.get(t)}(this,bt,"f",vt).entries()}static createUniformBlock(t,e,r){const{internalProgram:a}=e,n=t.getUniformBlockIndex(a,r);if(n===t.INVALID_INDEX)return console.error(`Block '${r}' does not identify a valid uniform block.`),null;const s=t.getActiveUniformBlockParameter(a,n,t.UNIFORM_BLOCK_DATA_SIZE),i={},o=t.getActiveUniformBlockParameter(a,n,t.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES);return t.getActiveUniforms(a,o,t.UNIFORM_OFFSET).forEach(((e,r)=>{const n=o[r],s=t.getActiveUniform(a,n);if(null!==s){const{name:t}=s;i[t]={byteOffset:e}}})),{name:r,blockIndex:n,blockSize:s,layout:i,program:e}}static createUniformBuffer(t,e,r,a){const n=t.createBuffer();if(null===n)return null;const s=t.UNIFORM_BUFFER;t.bindBuffer(s,n),a=a??V.STATIC_READ;const i=(r=r??!1)?this.lastBindingPoint++:void 0;return t.bufferData(s,e,a),{internalBuffer:n,byteLength:e,bindingPoint:i,target:s,usage:a}}static createRangedUniformBuffers(t,e,r,a){const n=t.getParameter(t.UNIFORM_BUFFER_OFFSET_ALIGNMENT),s=e.reduce(((t,e)=>t+Math.max(Math.ceil(e.blockSize/n),1)*n),0),i=this.createUniformBuffer(t,s,!1,a);if(null===i)return null;r=r??!1;let o=0;return e.map((t=>{const{blockSize:e}=t,a=r?this.lastBindingPoint++:void 0,s={...i,bindingPoint:a,rangeOffset:o,rangeSize:e};return o+=Math.max(Math.ceil(e/n),1)*n,s}))}static setUniformBufferValues(t,e,r,a){const{internalBuffer:n,target:s}=r;t.getParameter(t.UNIFORM_BUFFER_BINDING)!==n&&t.bindBuffer(s,n);const{layout:i,name:o}=e,{rangeOffset:c}=r;Object.entries(a).forEach((([e,r])=>{const{value:a}=r;e in i||console.warn(`${e} does not exist in block ${o}.`);const{byteOffset:n}=i[e];t.bufferSubData(s,n+(c??0),Pt.asArrayBufferView(a))}))}static setUniformBufferData(t,e,r,a,n,s){const{internalBuffer:i,target:o}=e;let{rangeOffset:c}=e;t.bindBuffer(o,i);const h=(c??0)+(a??0);r instanceof ArrayBuffer?t.bufferSubData(o,h,r):(n=n??0,t.bufferSubData(o,h,r,n,s))}static bindUniformBuffer(t,e,r){const{internalBuffer:a,target:n}=r;let{rangeOffset:s,rangeSize:i}=r;const{bindingPoint:o}=r,{program:c,blockIndex:h}=e,{internalProgram:l}=c;void 0!==o&&(e.buffer=r,t.uniformBlockBinding(l,h,o),void 0!==o&&(void 0!==s&&void 0!==i?t.bindBufferRange(n,o,a,s,i):t.bindBufferBase(n,o,a)))}}bt=Lt,vt={value:new Map},Lt.lastBindingPoint=0;var xt,Ut,Bt,Ft,Dt,Gt,Vt,Ht,kt,Xt,Yt,zt,Wt,jt=function(t,e,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!a:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(t):a?a.value:e.get(t)};class qt{static createTextures(t,e){const r={};return Object.entries(e).forEach((([e,a])=>{const n=Ct.createTexture(t,e,a);null!==n&&(r[e]=n)})),r}static createPacket(t,e){const{program:r,vertexArray:a,uniforms:n,uniformBlocks:s,uniformBuffers:i}=e,{drawCommand:o}=e;let c=null;if(c="internalProgram"in r?r:Ot.createProgram(t,r),null===c)return null;let h,l=null;if(l=j.createVertexArray(t,c,a),null===l)return null;if(void 0!==n){if(h=Pt.getUniformsListSetter(t,c,n),null===h)return null;Pt.setUniformsListValues(t,h,n)}let u={};const f=s?Object.entries(s):[],E=(i?.length??0)-1;return f.forEach((([t,e])=>{const{buffer:r}=e;void 0!==r&&r>E&&console.error(`Uniform buffer with index ${r} does not exist.`)})),i&&i.forEach(((e,r)=>{const a=f.filter((([t,e])=>e.buffer===r)),n=a.map((([e,r])=>Lt.createUniformBlock(t,c,e))),{length:s}=n;if("internalBuffer"in e)n.forEach((r=>{const{name:a}=r;Lt.bindUniformBuffer(t,r,e),u[a]=r}));else if(s>0){const{usage:r,data:i}=e;if(s>1){const e=Lt.createRangedUniformBuffers(t,n,!0,r);i&&Lt.setUniformBufferData(t,e[0],i),n.forEach(((r,n)=>{const{name:s}=r,i=e[n];Lt.bindUniformBuffer(t,r,i);const{uniforms:o}=a[n][1];o&&Lt.setUniformBufferValues(t,r,i,o),u[s]=r}))}else{const e=n[0],{blockSize:s,name:o}=e,c=Lt.createUniformBuffer(t,s,!0,r);if(null===c)return null;i&&Lt.setUniformBufferData(t,c,i),Lt.bindUniformBuffer(t,e,c);const{uniforms:h}=a[0][1];h&&Lt.setUniformBufferValues(t,e,c,h),u[o]=e}}})),f.filter((([t,e])=>void 0===e.buffer)).forEach((([e,r])=>{const{uniforms:a}=r,n=Lt.createUniformBlock(t,c,e);if(null===n)return null;const{blockSize:s}=n,i=Lt.createUniformBuffer(t,s,!0);if(null===i)return null;Lt.bindUniformBuffer(t,n,i),void 0!==a&&Lt.setUniformBufferValues(t,n,i,a),u[e]=n})),{program:c,vertexArray:l,uniforms:h,uniformBlocks:u,drawCommand:o}}static setPacketValues(t,e,r){const{vertexArray:a,uniforms:n,uniformBlocks:s}=r,{vertexArray:i,uniforms:o,uniformBlocks:c}=e;void 0!==a&&j.setVertexArrayValues(t,i,a),void 0!==o&&void 0!==n&&Pt.setUniformsListValues(t,o,n),void 0!==c&&void 0!==s&&(s?Object.entries(s):[]).forEach((([e,r])=>{const{uniforms:a}=r,n=c[e],{buffer:s}=n;s&&Lt.setUniformBufferValues(t,n,s,a)}))}static enableMultidrawExtension(t){!function(t,e,r,a,n){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===a?n.call(t,r):n?n.value=r:e.set(t,r)}(this,xt,t.getExtension("WEBGL_multi_draw"),"f",Ut)}static drawPacket(t,e,r=e.drawCommand){const{vertexArray:a}=e,{program:n,internalVertexArray:s,elementBuffer:i}=a,{mode:o,elementsCount:c,instanceCount:h,multiDraw:l}=r;if(Ot.useProgram(t,n),t.getParameter(t.VERTEX_ARRAY_BINDING)!==s&&t.bindVertexArray(s),i){const{indexType:e}=i;if(void 0!==h&&void 0!==c)t.drawElementsInstanced(o,c,e,0,h);else if(l){const t=jt(this,xt,"f",Ut),{countsList:r,countsOffset:a,offsetsList:n,offsetsOffset:s,drawCount:i,instanceCountsList:c,instanceCountsOffset:h}=l;void 0!==c&&void 0!==h?t.multiDrawElementsInstancedWEBGL(o,r,a,e,n,s,c,h,i):t.multiDrawElementsWEBGL(o,r,a,e,n,s,i)}else void 0!==c&&t.drawElements(o,c,e,0)}else if(void 0!==h&&void 0!==c)t.drawArraysInstanced(o,0,c,h);else if(l){const t=jt(this,xt,"f",Ut),{countsList:e,countsOffset:r,firstsList:a,firstsOffset:n,drawCount:s,instanceCountsList:i,instanceCountsOffset:c}=l;void 0!==i&&void 0!==c?t.multiDrawArraysInstancedWEBGL(o,a,n,e,r,i,c,s):t.multiDrawArraysWEBGL(o,a,n,e,r,s)}else void 0!==c&&t.drawArrays(o,0,c)}}xt=qt,Ut={value:null},function(t){t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP"}(Bt||(Bt={})),function(t){t[t.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",t[t.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",t[t.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT"}(Ft||(Ft={})),function(t){t[t.COLOR=6144]="COLOR",t[t.DEPTH=6145]="DEPTH",t[t.STENCIL=6146]="STENCIL",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(Dt||(Dt={})),function(t){t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS"}(Gt||(Gt={})),function(t){t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"}(Vt||(Vt={})),function(t){t[t.FUNC_ADD=32774]="FUNC_ADD",t[t.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",t[t.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",t[t.MIN=32775]="MIN",t[t.MAX=32776]="MAX"}(Ht||(Ht={})),function(t){t[t.BLEND=3042]="BLEND",t[t.CULL_FACE=2884]="CULL_FACE",t[t.DEPTH_TEST=2929]="DEPTH_TEST",t[t.DITHER=3024]="DITHER",t[t.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",t[t.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",t[t.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",t[t.SCISSOR_TEST=3089]="SCISSOR_TEST",t[t.STENCIL_TEST=2960]="STENCIL_TEST",t[t.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD"}(kt||(kt={})),function(t){t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK"}(Xt||(Xt={})),function(t){t[t.CW=2304]="CW",t[t.CCW=2305]="CCW"}(Yt||(Yt={})),function(t){t[t.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",t[t.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT"}(zt||(zt={})),function(t){t[t.DONT_CARE=4352]="DONT_CARE",t[t.FASTEST=4353]="FASTEST",t[t.NICEST=4354]="NICEST"}(Wt||(Wt={}));class Kt{static hint(t,e,r){t.hint(e,r)}static frontFace(t,e){t.frontFace(e)}static scissor(t,e,r,a,n){t.scissor(e,r,a,n)}static viewport(t,e,r,a,n){t.viewport(e,r,a,n)}static clearColor(t,e){t.clearColor(e[0],e[1],e[2],e[3])}static depthFunction(t,e){t.depthFunc(e)}static blendEquation(t,e){t.blendEquation(e)}static blendFunction(t,e,r){t.blendFunc(e,r)}static blendFunctionSeparate(t,e,r,a,n){t.blendFuncSeparate(e,r,a,n)}static stencilFunction(t,e,r,a,n){t.stencilFuncSeparate(n,e,r,a)}static stencilOperations(t,e,r,a,n){t.stencilOpSeparate(n,e,r,a)}static stencilMask(t,e,r){t.stencilMaskSeparate(r,e)}static colorMask(t,e,r,a,n){t.colorMask(e,r,a,n)}static depthMask(t,e){t.depthMask(e)}static enable(t,e){t.enable(e)}static disable(t,e){t.disable(e)}static clear(t,e){t.clear(e)}static getViewport(t){return t.getParameter(t.VIEWPORT)}static getMaxSamples(t){return t.getParameter(t.MAX_SAMPLES)}static drawBuffers(t,e){t.drawBuffers(e)}static clearBuffers(t,e,r,a,n){a instanceof Float32Array?t.clearBufferfv(e,r,a,n):a instanceof Int32Array?t.clearBufferiv(e,r,a,n):a instanceof Uint32Array&&t.clearBufferuiv(e,r,a,n)}}class Zt{constructor(t,e,r,a){this.array=void 0!==a?new Float32Array([t??0,e??0,r??0,a]):new Float32Array([t??0,e??0,r??0])}static rgb(t,e,r){return new Qt(t,e,r)}static rgba(t,e,r,a){if(t instanceof Qt){const{r,g:a,b:n}=t;return new Qt(r,a,n,void 0!==e?e:1)}return new Qt(t,e,r,a)}static array(...t){const e=new Array(4*t.length);let r,a=0;for(const n of t)r=n.array,e[a+0]=r[0],e[a+1]=r[1],e[a+2]=r[2],a+=3;return e}get length(){return 3}get r(){return this.array[0]}set r(t){this.array[0]=t}get g(){return this.array[1]}set g(t){this.array[1]=t}get b(){return this.array[2]}set b(t){this.array[2]=t}get a(){return this.array[3]}set a(t){this.array[3]=t}get 0(){return this.array[0]}set 0(t){this.array[0]=t}get 1(){return this.array[1]}set 1(t){this.array[1]=t}get 2(){return this.array[2]}set 2(t){this.array[2]=t}get 3(){return this.array[3]}set 3(t){this.array[3]=t}setValues(t,e,r){const{array:a}=this;return a[0]=t,a[1]=e,a[2]=r,this}getValues(){const{array:t}=this;return[t[0],t[1],t[2]]}copy(t){const{array:e}=this,{r,g:a,b:n}=t;return e[0]=r,e[1]=a,e[2]=n,this}clone(){return(new Zt).copy(this)}static lerp(t,e,r){return t.lerp(e,r)}lerp(t,e){const{array:r}=this,{r:a,g:n,b:s}=t;return r[0]=e*(a-r[0]),r[1]=e*(n-r[1]),r[2]=e*(s-r[2]),this}normalize(){const{array:t}=this;return t[0]/=255,t[1]/=255,t[2]/=255,this}[Symbol.iterator](){const{array:t}=this,{length:e}=t;let r=0;return{next:()=>r<e?{value:t[r++],done:!1}:{value:void 0,done:!0}}}}Zt.BLACK=new Zt(0,0,0),Zt.RED=new Zt(1,0,0),Zt.YELLOW=new Zt(1,1,0),Zt.GREEN=new Zt(0,1,0),Zt.BLUE=new Zt(0,0,1),Zt.WHITE=new Zt(1,1,1);const Qt=Zt;var $t,Jt,te,ee,re,ae,ne,se,ie,oe,ce,he,le,ue,fe,Ee,ye,Ae,Te,de=function(t,e,r,a,n){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?n.call(t,r):n?n.value=r:e.set(t,r),r},_e=function(t,e,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!a:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(t):a?a.value:e.get(t)};class me{constructor(t){this.target=t.target,this.changeType=t.changeType,this.propertyName=t.propertyName??null,this.oldValue=t.oldValue??void 0,this.newValue=t.newValue??void 0,this.removedIndex=t.removedIndex??0,this.removedItems=new ge(t.removedItems??[]),this.insertedIndex=t.insertedIndex??0,this.insertedItems=new ge(t.insertedItems??[]),this.sortedIndices=t.sortedIndices??[]}static get PROPERTY_CHANGE(){return 1}static get LIST_REMOVE(){return 2}static get LIST_INSERT(){return 3}static get LIST_SORT(){return 4}get PROPERTY_CHANGE(){return me.PROPERTY_CHANGE}get LIST_REMOVE(){return me.LIST_REMOVE}get LIST_INSERT(){return me.LIST_INSERT}get LIST_SORT(){return me.LIST_SORT}}var Re=me;$t=new WeakMap;var ge=class{constructor(t){$t.set(this,void 0),de(this,$t,t.slice(),"f")}get length(){return _e(this,$t,"f").length}item(t){return _e(this,$t,"f")[t]??null}values(){return _e(this,$t,"f").values()}};class pe{constructor(t){Jt.set(this,void 0),te.set(this,void 0),this.type=t,de(this,Jt,null,"f"),de(this,te,null,"f")}get currentTarget(){return _e(this,Jt,"f")}get target(){return _e(this,te,"f")}}Jt=new WeakMap,te=new WeakMap,pe.ModelEventTargetAccessor=new class{setCurrentTarget(t,e){t instanceof pe&&de(t,Jt,e,"f")}setTarget(t,e){t instanceof pe&&de(t,te,e,"f")}};var Ne=pe.ModelEventTargetAccessor;delete pe.ModelEventTargetAccessor;var Ie=pe;ee=new WeakMap;class Me extends class{constructor(){ee.set(this,void 0),de(this,ee,new Map,"f")}receiveEvent(t){const{type:e}=t,r=_e(this,ee,"f").get(e);Ne.setCurrentTarget(t,this),r&&r.forEach((e=>{e(t)}))}addEventListener(t,e){const r=_e(this,ee,"f").get(t);r?r.push(e):_e(this,ee,"f").set(t,[e])}removeEventListener(t,e){const r=_e(this,ee,"f").get(t);if(r){const a=r.findIndex((t=>t==e));a>-1&&r.splice(a,1),0==r.length&&_e(this,ee,"f").delete(t)}}dispatchEvent(t){Ne.setTarget(t,this),this.receiveEvent(t)}}{constructor(){super(),re.add(this),ae.set(this,void 0),ne.set(this,void 0),se.set(this,void 0),de(this,ae,null,"f"),de(this,ne,[],"f"),de(this,se,!1,"f")}get parentNode(){return _e(this,ae,"f")}setParent(t){if(null!==t){let e=t==this,{parentNode:r}=t;for(;!e&&null!==r;)({parentNode:r}=r),e=r==this;if(e)throw new TypeError("Failed to set parent on ModelNode: circular reference detected in the hierarchy.");de(this,ae,t,"f")}else de(this,ae,null,"f")}beginChanges(){de(this,se,!0,"f")}endChanges(){this.dispatchEvent(new Ie("modelchange")),_e(this,ne,"f").splice(0),de(this,se,!1,"f")}getRecords(){return _e(this,ne,"f").slice()}receiveEvent(t){super.receiveEvent(t);const{parentNode:e}=this;e&&e.receiveEvent(t)}}ae=new WeakMap,ne=new WeakMap,se=new WeakMap,re=new WeakSet,ie=function(t,e,r){const a=_e(this,ne,"f"),n=new Re({target:this,changeType:Re.PROPERTY_CHANGE,propertyName:t,oldValue:e,newValue:r});a.push(n),_e(this,se,"f")||(this.dispatchEvent(new Ie("modelchange")),a.splice(0))},oe=function(t){_e(this,ne,"f").push(t),_e(this,se,"f")||(this.dispatchEvent(new Ie("modelchange")),_e(this,ne,"f").splice(0))},Me.ModelNodeRecordsAccessor=new class{triggerChange(t,e,r,a){t instanceof Me&&_e(t,re,"m",ie).call(t,e,r,a)}handleRecord(t,e){t instanceof Me&&_e(t,re,"m",oe).call(t,e)}};var we=Me.ModelNodeRecordsAccessor;delete Me.ModelNodeRecordsAccessor;var Se=Me;class Ce extends Me{constructor(){super(),ce.set(this,void 0),de(this,ce,new Map,"f")}}ce=new WeakMap,Ce.ModelObjectPropertiesAccessor=new class{setProperty(t,e,r){t instanceof Ce&&_e(t,ce,"f").set(e,r)}getProperty(t,e){if(t instanceof Ce)return _e(t,ce,"f").get(e)}},Ce.ModelObjectPropertiesAccessor,delete Ce.ModelObjectPropertiesAccessor,he=new WeakMap;var Oe=class extends Me{constructor(t){super(),he.set(this,void 0),de(this,he,t?.slice()??[],"f")}setParent(t){super.setParent(t),_e(this,he,"f").forEach((e=>{e.setParent(t)}))}get length(){return _e(this,he,"f").length}get(t){return _e(this,he,"f")[t]??null}index(t){return _e(this,he,"f").indexOf(t)}values(){return _e(this,he,"f").values()}sort(t){const e=_e(this,he,"f").map(((t,e)=>({item:t,index:e})));e.sort(((e,r)=>t(e.item,r.item))),de(this,he,e.map((t=>t.item)),"f");const r=new Re({target:this,changeType:Re.LIST_SORT,sortedIndices:e.map((t=>t.index))});we.handleRecord(this,r)}prepend(...t){const e=_e(this,he,"f"),{parentNode:r}=this;r&&t.forEach((t=>{t.setParent(r)})),e.splice(0,0,...t);const a=new Re({target:this,changeType:Re.LIST_INSERT,insertedIndex:0,insertedItems:t});we.handleRecord(this,a)}append(...t){const e=_e(this,he,"f"),{length:r}=e,{parentNode:a}=this;a&&t.forEach((t=>{t.setParent(a)})),e.push(...t);const n=new Re({target:this,changeType:Re.LIST_INSERT,insertedIndex:r,insertedItems:t});we.handleRecord(this,n)}insert(t,...e){const r=_e(this,he,"f"),{length:a}=r;if(Math.abs(t)<=a){if(t>=0){const{parentNode:n}=this;e.forEach((t=>{t.setParent(n)})),t<a?r.splice(t,0,...e):r.push(...e)}else if(t<0){t=a-t;const{parentNode:n}=this;n&&e.forEach((t=>{t.setParent(n)})),r.splice(t,0,...e)}const n=new Re({target:this,changeType:Re.LIST_INSERT,insertedIndex:t,insertedItems:e.slice()});we.handleRecord(this,n)}}remove(t){const e=_e(this,he,"f"),r=e.indexOf(t);if(r>-1){const t=e.splice(r,1)[0],{parentNode:a}=this;a&&t.setParent(null);const n=new Re({target:this,changeType:Re.LIST_REMOVE,removedIndex:r,removedItems:[t]});we.handleRecord(this,n)}}clear(){const t=_e(this,he,"f"),{length:e}=t;if(e>0){const e=t.splice(0),{parentNode:r}=this;r&&e.forEach((t=>{t.setParent(null)}));const a=new Re({target:this,changeType:Re.LIST_REMOVE,removedIndex:0,removedItems:e});we.handleRecord(this,a)}}};ue=new WeakMap,fe=new WeakMap,Ee=new WeakMap,ye=new WeakMap,le=new WeakSet,Ae=function(){const t=_e(this,fe,"f").splice(0);t.length>0&&_e(this,ue,"f").call(this,t)},Te=function(t){if(!_e(this,Ee,"f")){const{target:e,currentTarget:r}=t,a=_e(this,ye,"f").get(r);if(a){const{options:t}=a,{properties:n,propertiesFilter:s,childList:i,subtree:o}=t;o?n&&e instanceof Se?(s?_e(this,fe,"f").push(...e.getRecords().filter((t=>{const{propertyName:e}=t;return s.includes(e)}))):_e(this,fe,"f").push(...e.getRecords()),_e(this,le,"m",Ae).call(this)):i&&e instanceof Oe&&(_e(this,fe,"f").push(...e.getRecords()),_e(this,le,"m",Ae).call(this)):e==r&&(n&&e instanceof Se?(s?_e(this,fe,"f").push(...e.getRecords().filter((t=>{const{propertyName:e}=t;return s.includes(e)}))):_e(this,fe,"f").push(...e.getRecords()),_e(this,le,"m",Ae).call(this)):i&&e instanceof Oe&&(_e(this,fe,"f").push(...e.getRecords()),_e(this,le,"m",Ae).call(this)))}}};var Pe=class{constructor(t){le.add(this),ue.set(this,void 0),fe.set(this,void 0),Ee.set(this,void 0),ye.set(this,void 0),de(this,ue,t,"f"),de(this,fe,[],"f"),de(this,Ee,!1,"f"),de(this,ye,new WeakMap,"f")}observe(t,e){de(this,Ee,!1,"f");const r=_e(this,ye,"f");let a=r.get(t);if(a)r.set(t,a);else{const n=_e(this,le,"m",Te).bind(this);t.addEventListener("modelchange",n),a={listener:n,options:e},r.set(t,a)}}unobserve(t){let e=_e(this,ye,"f").get(t);if(e){const{listener:r}=e;t.removeEventListener("modelchange",r)}}disconnect(){_e(this,fe,"f").splice(0),de(this,Ee,!0,"f")}};function be(t){return t.replace(/(?<!^)(?=[A-Z])/g,"-").toLowerCase()}function ve(t,e){if(e){const{options:r,attributes:a,dataset:n,children:s,listeners:i}=e,o=document.createElement(t,r);if(a&&Object.entries(a).forEach((([t,e])=>{void 0!==e&&("boolean"==typeof e?o.toggleAttribute(be(t),e):o.setAttribute(be(t),String(e)))})),n){const{dataset:t}=o;Object.keys(n).forEach((e=>{t[e]=String(n[e])}))}return s&&("function"==typeof s?s(o):"object"==typeof s&&"length"in s?o.append(...Array.from(s)):o.append(s)),i&&Object.entries(i).forEach((([t,e])=>{Array.isArray(e)?o.addEventListener(t,e[0],e[1]):o.addEventListener(t,e)})),o}return document.createElement(t)}const Le=new WeakMap;new FinalizationRegistry((t=>{const{model:e,reactiveElement:r}=t,a=Le.get(e);if(void 0!==a){const{reactiveElementsArray:t}=a;t.splice(t.indexOf(r),1)}})),new Pe((t=>{t.forEach((t=>{const{target:e,propertyName:r,oldValue:a,newValue:n}=t,{reactiveElementsArray:s}=Le.get(e);s.forEach((t=>{const{elementRef:e,react:s,properties:i}=t,o=e.deref();o&&i.includes(r)&&s(o,r,a,n)}))}))}));const xe=new WeakMap;new FinalizationRegistry((t=>{const{list:e,reactiveChildElement:r}=t,a=xe.get(e);if(a){const{reactiveChildElementsArray:t}=a;t.splice(t.indexOf(r),1)}})),new Pe((t=>{let e=null;Array.from(t.values()).forEach((t=>{const{target:r}=t,a=r,{length:n}=a,{reactiveChildElementsArray:s}=xe.get(a);s.forEach((r=>{const{parentRef:a,mapping:s,placeholder:i}=r,o=a.deref();if(o){const{firstChild:r,children:a}=o,{length:c}=a;i&&n>0&&r==i&&o.removeChild(i);const{changeType:h,LIST_INSERT:l,LIST_REMOVE:u,LIST_SORT:f}=t;switch(h){case l:{const{insertedIndex:e,insertedItems:r}=t,n=Array.from(r.values()).map(s),{length:i}=a;e<i?a[e].before(...n):o.append(...n);break}case u:{const{removedIndex:r,removedItems:n}=t,{length:s}=n;e=e??document.createRange();const i=r+(s-1);i<c&&(e.setStartBefore(a[r]),e.setEndAfter(a[i]),e.deleteContents());break}case f:{const{sortedIndices:e}=t,r=Array.from(a);o.append(...e.filter((t=>t<c)).map((t=>r[t])));break}}0==n&&i&&o.append(i)}}))}))}));var Ue,Be,Fe,De,Ge,Ve=function(t,e,r,a){var n,s=arguments.length,i=s<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,a);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(i=(s<3?n(i):s>3?n(e,r,i):n(e,r))||i);return s>3&&i&&Object.defineProperty(e,r,i),i};let He=class extends HTMLElement{constructor(){super(),Ue.add(this);const t=this.attachShadow({mode:"open"}),e=new CSSStyleSheet;e.replace(Ge),t.adoptedStyleSheets=[e],t.replaceChildren(Fe.content.cloneNode(!0))}attributeChangedCallback(t,e,r){"type"===t&&function(t,e,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!a:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(t):a?a.value:e.get(t)}(this,Ue,"m",Be).call(this)}};var ke;async function Xe(){const t=document.createElement("template");t.innerHTML='\n\x3c!--<link rel="stylesheet" href="./css/main.css"/>--\x3e\n  <div class="flex-auto flex-cols">\n    <main class="flex-rows flex-auto">\n        <section class="centered padded">\n          <div id="ui" class="flex-cols">\n            <button id="playpause">Pause</button>\n            <div class="flex-none">\n              FPS: <span id="canvas-fps">-.-</span>\n            </div>\n          </div>\n          <div id="widgets"></div>\n          <canvas id="canvas" tabindex="0" oncontextmenu="return false;"></canvas>\n          \x3c!--\n          <style>\n            circle:hover {\n              fill: rgb(255, 0, 0);\n            }\n          </style>\n          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">\n            <circle cx="10" cy="10" r="4"/>\n          </svg>\n          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" width="200" height="200" id="save" fill="none">\n            <g>\n              <rect x="0" y="0" width="100" height="100" fill="red"></rect>\n              <text text-anchor="middle" alignment-baseline="middle" x="50" y="50" font-family="Verdana" fill="blue">Hello,World!</text>\n            </g>\n          </svg>\n          --\x3e\n        </section>\n    </main>\n  </div>',document.body.insertBefore(t.content,document.body.firstChild);try{!async function(){let t,e=0,r=!1;const a=document.getElementById("playpause");null!==a&&(a.onclick=()=>{r=!r,a.textContent=r?"Play":"Pause",r||requestAnimationFrame(t)});const n=document.getElementById("canvas-fps");if(!n)return;const i=document.getElementById("canvas");if(!i)return;i.width=900,i.height=600,i.style.width="900px",i.style.height="600px";const l=i.getContext("webgl2");if(!l)return;Ct.setUnpackAlignment(l,1);const u=await fetch("assets/engine/shaders/common/phong.vert.glsl").then((t=>t.text())),E=await fetch("assets/engine/shaders/common/phong.frag.glsl").then((t=>t.text())),y=Ot.createProgram(l,{vertexSource:u,fragmentSource:E});if(null===y)return;const A=await fetch("assets/engine/shaders/common/skybox.vert").then((t=>t.text())),g=await fetch("assets/engine/shaders/common/skybox.frag").then((t=>t.text())),p=Ot.createProgram(l,{vertexSource:A,fragmentSource:g});if(null===p)return;const N=await fetch("assets/engine/shaders/common/texture.vert").then((t=>t.text())),I=await fetch("assets/engine/shaders/common/texture.frag").then((t=>t.text())),M=Ot.createProgram(l,{vertexSource:N,fragmentSource:I});if(null===M)return;const w=await fetch("assets/engine/shaders/common/basic.vert.glsl").then((t=>t.text())),S=await fetch("assets/engine/shaders/common/basic.frag.glsl").then((t=>t.text())),C=Ot.createProgram(l,{vertexSource:w,fragmentSource:S});if(null===C)return;const P=await fetch("assets/engine/shaders/common/depth.vert.glsl").then((t=>t.text())),v=await fetch("assets/engine/shaders/common/depth.frag.glsl").then((t=>t.text())),x=Ot.createProgram(l,{vertexSource:P,fragmentSource:v});if(null===x)return;const B=await fetch("assets/engine/shaders/common/lines.vert.glsl").then((t=>t.text())),F=await fetch("assets/engine/shaders/common/lines.frag.glsl").then((t=>t.text())),D=Ot.createProgram(l,{vertexSource:B,fragmentSource:F});if(null===D)return;async function G(t){return fetch(t).then((e=>{if(e.ok)return new Promise((e=>{const r=new Image;r.onload=()=>{e(r)},r.src=t}));throw new Error(`Image '${t}' not found.`)}))}const H=await G("assets/engine/img/NormalMap.png"),z=await G("assets/engine/img/brickwall.jpg"),q=await G("assets/engine/img/NormalMap_0.png"),Z=await G("assets/engine/img/Normal_Map_1024.png"),Q=await G("assets/engine/img/DisplacementMap.png"),$=await G("assets/engine/img/skybox_x_pos.png"),J=await G("assets/engine/img/skybox_x_neg.png"),at=await G("assets/engine/img/skybox_y_pos.png"),nt=await G("assets/engine/img/skybox_y_neg.png"),st=await G("assets/engine/img/skybox_z_pos.png"),it=await G("assets/engine/img/skybox_z_neg.png"),ot=await G("assets/engine/img/colors.png"),ct=function(t){const e=document.createElement("canvas"),{width:r,height:a}=t,n=r+2,s=a+2;e.width=n,e.height=s;const i=e.getContext("2d");return i.drawImage(t,0,0,n,s),i.drawImage(t,1,1,r,a),{width:r,height:a,paddedWidth:n,paddedHeight:s,data:i.getImageData(0,0,n,s)}},ft=ct(z),Et=ct(H),dt=ct(Z),gt=ct(ot),Nt=qt.createTextures(l,{albedoMap:{pixels:null,width:8,height:8,depth:2,target:_t.TEXTURE_2D_ARRAY,type:Tt.UNSIGNED_BYTE,format:yt.LUMINANCE,internalFormat:At.LUMINANCE,min:Rt.NEAREST,mag:mt.NEAREST,subimages:[{pixels:new Uint8Array([255,204,255,204,255,204,255,204,204,255,204,255,204,255,204,255,255,204,255,204,255,204,255,204,204,255,204,255,204,255,204,255,255,204,255,204,255,204,255,204,204,255,204,255,204,255,204,255,255,204,255,204,255,204,255,204,204,255,204,255,204,255,204,255]),xoffset:0,yoffset:0,zoffset:0,width:8,height:8,depth:1},{pixels:new Uint8Array([204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204]),xoffset:0,yoffset:0,zoffset:1,width:8,height:8,depth:1}]},albedoMaps:{pixels:null,width:ft.paddedWidth,height:ft.paddedHeight,depth:4,target:_t.TEXTURE_2D_ARRAY,type:Tt.UNSIGNED_BYTE,format:yt.RGB,internalFormat:At.RGB,subimages:[{pixels:ft.data,xoffset:0,yoffset:0,zoffset:0,width:ft.paddedWidth,height:ft.paddedHeight,depth:1},{pixels:Et.data,xoffset:0,yoffset:0,zoffset:1,width:Et.paddedWidth,height:Et.paddedHeight,depth:1},{pixels:dt.data,xoffset:0,yoffset:0,zoffset:2,width:dt.paddedWidth,height:dt.paddedHeight,depth:1},{pixels:gt.data,xoffset:0,yoffset:0,zoffset:3,width:gt.paddedWidth,height:gt.paddedHeight,depth:1}],min:Rt.LINEAR,mag:mt.LINEAR},normalMap:{pixels:q,width:q.width,height:q.height,target:_t.TEXTURE_2D,type:Tt.UNSIGNED_BYTE,format:yt.RGB,internalFormat:At.RGB,min:Rt.LINEAR_MIPMAP_LINEAR,mag:mt.LINEAR},displacementMap:{pixels:Q,width:Q.width,height:Q.height,target:_t.TEXTURE_2D,type:Tt.UNSIGNED_BYTE,format:yt.RGBA,internalFormat:At.RGBA},skybox:{pixels:{xPos:$,xNeg:J,yPos:at,yNeg:nt,zPos:st,zNeg:it},width:$.width,height:$.height,target:_t.TEXTURE_CUBE_MAP,type:Tt.UNSIGNED_BYTE,format:yt.RGBA,internalFormat:At.RGBA},fbColorTex:{width:i.width,height:i.height,pixels:null,target:_t.TEXTURE_2D,type:Tt.UNSIGNED_BYTE,format:yt.RGBA,internalFormat:At.RGBA,mag:mt.LINEAR,min:Rt.LINEAR,wrapS:pt.CLAMP_TO_EDGE,wrapT:pt.CLAMP_TO_EDGE,wrapR:pt.CLAMP_TO_EDGE},depthTex:{width:i.width,height:i.height,pixels:null,target:_t.TEXTURE_2D,type:Tt.UNSIGNED_INT,format:yt.DEPTH_COMPONENT,internalFormat:At.DEPTH_COMPONENT24,wrapS:pt.CLAMP_TO_EDGE,wrapT:pt.CLAMP_TO_EDGE,wrapR:pt.CLAMP_TO_EDGE,mag:mt.NEAREST,min:Rt.NEAREST}}),{albedoMap:It,albedoMaps:Mt,normalMap:wt,displacementMap:St,skybox:Pt,fbColorTex:bt,depthTex:vt}=Nt,xt=[Mt],Ut=l.getExtension("EXT_texture_filter_anisotropic");if(Ut){console.log("Extension EXT_texture_filter_anisotropic activated.");const t=l.getParameter(Ut.MAX_TEXTURE_MAX_ANISOTROPY_EXT);xt.forEach((e=>{const{properties:r,internalTexture:a}=e,{target:n}=r;l.bindTexture(n,a),l.texParameterf(n,Ut.TEXTURE_MAX_ANISOTROPY_EXT,t)}))}const Bt=new ht({height:4,width:4,depth:4,heightSegments:32,widthSegments:32,depthSegments:32}),Dt=new lt({height:2,width:2}).toBuilder(),Ht=new U;Ht.setScaling(new c([1,1,1]));const Xt=1/3*Math.PI,Yt=l.canvas.width/l.canvas.height,zt=new class extends class extends class{constructor(){this.transform=new U(this)}}{constructor(t){super(),this.uuid=L.newUUID(),this.projection=t||new b,this.frustum=(new W).setFromMatrix(this.viewProjection)}getFront(t){return this.transform.getBackward(t)}get view(){return this.transform.matrix.clone().invert()}get viewProjection(){return this.projection.clone().mult(this.view)}isViewing(t){return!0}updateFrustum(){this.frustum.setFromMatrix(this.viewProjection)}}{constructor(t,e,r,a){super(b.perspective(t,e,r,a))}setValues(t,e,r,a){return this.projection.setPerspective(t,e,r,a),this.updateFrustum(),this}}(Xt,Yt,.1,100);zt.transform.setTranslation(new c([0,8,8])),zt.transform.lookAt(new c([0,0,0]),h.up);const Wt=new U;Wt.setTranslation(new c([0,2,2])),Wt.setScaling(new c([.2,.2,.2])),zt.transform.setTranslation(Wt.getTranslation(new c).scale(2)),zt.transform.lookAt(new c([0,0,0]),h.up);const jt=zt.projection.clone().mult(b.identity().setRotation(zt.view.getRotation())).invert(),Zt=Bt.toBuilder(),$t=Zt.verticesArray(),Jt=Zt.trianglesIndicesArray(),te=Zt.normalsArray(),ee=Zt.uvsArray(),re=Zt.tangentsArray(),ae=Zt.verticesArray(),ne=new K({a_position:{array:$t,type:Y.VEC3},a_tangent:{array:re,type:Y.VEC3},a_normal:{array:te,type:Y.VEC3},a_uv:{array:ee,type:Y.VEC2}},Jt,!1),se=ne.getAttribute("a_position"),ie=(ne.indices,ne.getAttribute("a_normal")),oe=ne.getAttribute("a_uv"),ce=ne.getAttribute("a_tangent"),he=ne.getAttribute("a_normal"),le={program:y,vertexArray:{vertexBuffers:[{interleaved:!1},{usage:V.DYNAMIC_READ}],vertexAttributes:{a_position:{buffer:0,type:Y.VEC3,componentType:X.FLOAT,byteLength:ie.array.byteLength},a_tangent:{buffer:0,type:Y.VEC3,componentType:X.FLOAT,byteLength:ce.array.byteLength},a_normal:{...ie,buffer:0},a_uv:{...oe,buffer:0},a_color:{buffer:1,type:Y.VEC3,componentType:X.FLOAT,byteLength:he.array.byteLength}},elementIndices:ne.indices},uniformBuffers:[{usage:V.DYNAMIC_READ},{usage:V.DYNAMIC_READ}],uniformBlocks:{subTexture:{uniforms:{u_xOffset:{value:1/ft.paddedWidth},u_yOffset:{value:1/ft.paddedHeight},u_zOffset:{value:1},u_xScaling:{value:Et.width/ft.paddedWidth},u_yScaling:{value:Et.height/ft.paddedHeight}}},viewBlock:{buffer:0},modelBlock:{buffer:0},lightsBlock:{buffer:0},phongBlock:{buffer:1}},uniforms:{u_albedoMap:{value:It},u_normalMap:{value:wt},u_displacementMap:{value:St},u_albedoMaps:{value:Mt}},drawCommand:{mode:k.TRIANGLES,elementsCount:ne.indices.length}},ue={program:y,uniformBlocks:{viewBlock:{uniforms:{u_view:{value:zt.view.array},u_projection:{value:zt.projection.array}}},modelBlock:{uniforms:{"models[0].u_model":{value:Ht.matrix.array},"models[0].u_modelView":{value:zt.view.mult(Ht.matrix).array},"models[0].u_normal":{value:zt.view.mult(Ht.matrix).invert().transpose().array}}},lightsBlock:{uniforms:{"lights[0].u_lightWorldPos":{value:Array.from(Wt.getTranslation(new c))},"lights[0].u_lightDirection":{value:Array.from(Wt.getBackward(new c))},"lights[0].u_cutOff":{value:2/360*Math.PI},"lights[0].u_lightColor":{value:Array.from(Qt.RED)}}},phongBlock:{uniforms:{"phong.u_ambientColor":{value:[.1,.1,.1]},"phong.u_diffuseColor":{value:[.8,0,0]},"phong.u_specularColor":{value:[1,1,1]},"phong.u_ambientFactor":{value:8e-4},"phong.u_diffuseFactor":{value:1},"phong.u_specularFactor":{value:1},"phong.u_shininess":{value:36},"phong.u_constant":{value:1},"phong.u_linear":{value:.09},"phong.u_quadratic":{value:.032}}}}};let fe=qt.createPacket(l,le);j.setVertexArrayBufferData(l,fe.vertexArray.verticesBuffers[1],he.array),j.setVertexArrayBufferData(l,fe.vertexArray.verticesBuffers[0],new Uint8Array(ne.buffer)),j.setVertexArrayValues(l,fe.vertexArray,{attributes:{a_position:{array:se.array}}}),Lt.setUniformBufferData(l,fe.uniformBlocks.phongBlock.buffer,Qt.lerp(Qt.WHITE,Qt.GREEN,.5).array,fe.uniformBlocks.phongBlock.layout["phong.u_ambientColor"].byteOffset);const Ee={program:D,vertexArray:{vertexAttributes:{a_position:{array:ae,type:Y.VEC3}}},uniformBuffers:[fe.uniformBlocks.modelBlock.buffer,fe.uniformBlocks.viewBlock.buffer],uniformBlocks:{modelBlock:{buffer:0},viewBlock:{buffer:1}},uniforms:{u_color:{value:new Float32Array([1,0,0])}},drawCommand:{mode:k.LINES,elementsCount:ae.length/2}},ye={program:C,vertexArray:{vertexBuffers:[fe.vertexArray.verticesBuffers[0]],elementBuffer:fe.vertexArray.elementBuffer},uniformBuffers:[fe.uniformBlocks.viewBlock.buffer],uniformBlocks:{basicModelBlock:{uniforms:{u_model:{value:Wt.matrix.array},u_color:{value:[1,1,0]}}},viewBlock:{buffer:0}},drawCommand:{mode:k.TRIANGLES,elementsCount:fe.drawCommand.elementsCount}},Ae=Dt.trianglesIndicesArray(),Te=Dt.verticesArray(),de=Dt.uvsArray(),_e=(new b).setIdentity(),me={program:p,vertexArray:{vertexAttributes:{a_position:{array:Te,type:Y.VEC3}},elementIndices:Ae},uniforms:{u_world:{value:_e.array},u_viewDirectionProjectionInverse:{value:jt.array},u_skybox:{value:Pt}},drawCommand:{mode:k.TRIANGLES,elementsCount:Ae.length}},Re={program:x,vertexArray:{vertexAttributes:{a_position:{array:Te,type:Y.VEC3},a_uv:{array:de,type:Y.VEC2}},elementIndices:Ae},uniforms:{u_depthWorld:{value:_e.array},u_depthTex:{value:vt}},drawCommand:{mode:k.TRIANGLES,elementsCount:Ae.length}},ge={program:M,vertexArray:{vertexAttributes:{a_position:{array:Te,type:Y.VEC3},a_uv:{array:de,type:Y.VEC2}},elementIndices:Ae},uniforms:{u_world:{value:_e.array},u_tex:{value:bt}},drawCommand:{mode:k.TRIANGLES,elementsCount:Ae.length}},pe=(qt.createPacket(l,Ee),qt.createPacket(l,ye),qt.createPacket(l,me)),Ne=qt.createPacket(l,Re),Ie=qt.createPacket(l,ge),Me=ut.createFramebuffer(l),we=Kt.getMaxSamples(l);ut.attachRenderbuffer(l,Me,{renderbuffer:ut.createRenderbuffer(l,{internalFormat:rt.DEPTH_COMPONENT24,width:i.width,height:i.height,samples:we}),attachment:et.DEPTH_ATTACHMENT},{renderbuffer:ut.createRenderbuffer(l,{internalFormat:rt.RGBA8,width:i.width,height:i.height,samples:we}),attachment:et.COLOR_ATTACHMENT0});const Se=ut.createFramebuffer(l);ut.attachTexture(l,Se,{textureTarget:tt.TEXTURE_2D,texture:bt,attachment:et.COLOR_ATTACHMENT0},{textureTarget:tt.TEXTURE_2D,texture:vt,attachment:et.DEPTH_ATTACHMENT}),Kt.viewport(l,0,0,l.canvas.width,l.canvas.height),Kt.enable(l,kt.DEPTH_TEST),Kt.enable(l,kt.CULL_FACE),Kt.enable(l,kt.BLEND),Kt.blendFunction(l,Vt.SRC_ALPHA,Vt.ONE_MINUS_SRC_ALPHA);let Ce=0,Oe=0,Pe=0,be=1;Ht.getRotation(new O),Ht.getTranslation(new c),new c([2,-2,-2]),O.fromAxisAngle(h.down,Math.PI/3),d.initialize(i),ut.unbindFramebuffer(l);const Le=new class{constructor(t,e){T.set(this,void 0),this.camera=t,this.rotationSpeed=e?.rotationSpeed??50,this.translationSpeed=e?.translationSpeed??8,function(t,e,r,a,n){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===a?n.call(t,r):n?n.value=r:e.set(t,r)}(this,T,new s,"f")}update(t){const{camera:e,rotationSpeed:r,translationSpeed:a}=this,n=function(t,e,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!a:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(t):a?a.value:e.get(t)}(this,T,"f"),{transform:s}=e,i=s.getTranslation(_),c=s.getBackward(m),{array:l}=c,{origin:u,up:E,down:y}=h;let A=s.getUp(R).dot(E);if(d.getKey(o.Z)||d.getKey(o.ARROW_UP)){const e=s.getBackward(R).scale(a*t);s.translate(e)}if(d.getKey(o.Q)||d.getKey(o.ARROW_LEFT)){const e=s.getLeft(R).scale(a*t);s.translate(e)}if(d.getKey(o.S)||d.getKey(o.ARROW_DOWN)){const e=s.getForward(R).scale(a*t);s.translate(e)}if(d.getKey(o.D)||d.getKey(o.ARROW_RIGHT)){const e=s.getRight(R).scale(a*t);s.translate(e)}if(d.getMouseButtonDown(f.RIGHT)&&n.copy(d.getPointerScreenPosition()),d.getMouseButton(f.RIGHT)){const e=d.getPointerScreenPosition();if(!e.equals(n)){const a=(n.x-e.x)*r*t,o=(n.y-e.y)*r*t;if(i.copy(s.getTranslation(R)),0!==a||0!==o){A=Math.sign(s.getUp(R).dot(E)),c.toSpherical(u);const t=l[1],e=l[2],r=t+A*-o;r<=0||r>=Math.PI?(l[2]=(e-a+Math.PI)%(2*Math.PI),l[1]=r<0?-r:Math.PI-(r-Math.PI),A*=-1):(l[2]=(e-a)%(2*Math.PI),l[1]=t+A*-o),c.toCartesian(u),s.lookAt(i.add(c),A>0?E:y)}n.copy(e)}}}}(zt);qt.setPacketValues(l,fe,ue),Kt.clearColor(l,Qt.BLACK.normalize()),t=function(a){if(r)return;Oe=(a*=.001)-Ce,Ce=a,e=1/Oe,n.textContent=e.toFixed(1),Le.update(Oe),Wt.setMatrix(zt.transform.matrix),Ht.rotate(O.fromAxisAngle(h.down,Math.PI/128)),Pe+=Oe*be*.5,(Pe>1||Pe<0)&&(be*=-1),Kt.clear(l,Ft.COLOR_BUFFER_BIT|Ft.DEPTH_BUFFER_BIT),jt.copy(zt.projection).mult((new b).setIdentity().setRotation(zt.view.getRotation())).invert(),Kt.viewport(l,0,0,i.width,i.height),ut.bindFramebuffer(l,Me),Kt.clear(l,Ft.COLOR_BUFFER_BIT|Ft.DEPTH_BUFFER_BIT),Kt.depthFunction(l,Gt.LEQUAL),qt.drawPacket(l,pe),Kt.depthFunction(l,Gt.LESS),qt.setPacketValues(l,fe,{uniformBlocks:{modelBlock:{uniforms:{"models[0].u_model":{value:Ht.matrix.array},"models[0].u_modelView":{value:zt.view.mult(Ht.matrix).array},"models[0].u_normal":{value:zt.view.mult(Ht.matrix).invert().transpose().array}}},viewBlock:{uniforms:{u_view:{value:zt.view.array},u_projection:{value:zt.projection.array}}},lightsBlock:{uniforms:{"lights[0].u_lightWorldPos":{value:Array.from(Wt.getTranslation(new c))},"lights[0].u_lightDirection":{value:Array.from(Wt.getBackward(new c))}}}}}),qt.drawPacket(l,fe),qt.setPacketValues(l,pe,{uniforms:{u_viewDirectionProjectionInverse:{value:jt.array}}}),ut.blit(l,Me,Se,[0,0,i.width,i.height],[0,0,i.width,i.height],Ft.COLOR_BUFFER_BIT,mt.LINEAR),ut.blit(l,Me,Se,[0,0,i.width,i.height],[0,0,i.width,i.height],Ft.DEPTH_BUFFER_BIT,mt.NEAREST),ut.unbindFramebuffer(l),qt.drawPacket(l,Ie);const s=i.width/4,o=i.height/4;Kt.viewport(l,0,i.height-o,s,o),Kt.depthFunction(l,Gt.ALWAYS),qt.drawPacket(l,Ne),d.clear(),requestAnimationFrame(t)},requestAnimationFrame(t),document.body.append(ve("e-loader"))}()}catch(t){console.trace(t)}}async function Ye(){Xe()}Ue=new WeakSet,Be=function(){const{type:t,shadowRoot:e}=this;switch(t){case"spinner":e.replaceChildren(De.content.cloneNode(!0));break;case"bar":e.replaceChildren(Fe.content.cloneNode(!0))}},(Fe=ve("template")).content.append(ve("div",{attributes:{part:"bar"},children:[ve("div",{attributes:{part:"slider"},children:[ve("div",{attributes:{part:"cursor"}})]})]})),(De=ve("template")).content.append(ve("div",{attributes:{part:"spinner"}})),Ge='\n            :host {\n                display: inline-block;\n            }\n\n            :host(:is(:not([type]), [type="bar"])) {\n                border: 1px solid gainsboro;\n                border-radius: 4px;\n            }\n        \n            [part="bar"] {\n                position: relative;\n                overflow: hidden;\n                height: 6px;\n                width: 100%;\n                width: 86px;\n                border-radius: 4px;\n            }\n        \n            [part="slider"] {\n                display: flex;\n                position: absolute;\n                width: 100%;\n                height: 100%;\n                animation-name: slider;\n            }\n        \n            [part="slider"],\n            [part="cursor"] {\n                border-radius: 4px;\n                will-change: transform;\n                animation-duration: 1s;\n                animation-timing-function: linear;\n                animation-iteration-count: infinite;\n            }\n        \n            [part="cursor"] {\n                display: block;\n                width: 32px;\n                background-color: rgb(0, 128, 255);\n                animation-name: cursor;\n            }\n        \n            :host([type="spinner"]) {\n                display: inline-block;\n                width: 20px;\n                height: 20px;\n            }\n        \n            [part="spinner"] {\n                display: inline-block;\n                width: 18px;\n                height: 18px;\n            }\n        \n            [part="spinner"]::after {\n                content: " ";\n                display: block;\n                width: 12px;\n                height: 12px;\n                border-radius: 50%;\n                border-width: 4px;\n                border-style: solid;\n                border-color: transparent rgb(0, 128, 255);\n                animation: spin 1.2s linear infinite;\n            }\n        \n            @keyframes slider {\n                0% {\n                    transform: translateX(0%);\n                }\n                100% {\n                    transform: translateX(100%);\n                }\n            }\n        \n            @keyframes cursor {\n                0% {\n                    transform: translateX(-100%);\n                }\n                100% {\n                    transform: translateX(100%);\n                }\n            }\n        \n            @keyframes spin {\n                0% {\n                    transform: rotate(0);\n                }\n                100% {\n                    transform: rotate(360deg);\n                }\n            }\n        ',Ve([(ke={type:String,defaultValue:"bar",observed:!0},(t,e)=>{const{constructor:r}=t,{prototype:a}=r,n=String(e),{defaultValue:s=null,observed:i=!1,name:o=be(n)}=ke;if(i){const t=Reflect.get(r,"observedAttributes",r);Array.isArray(t)?t.push(o):Object.defineProperty(r,"observedAttributes",{value:[o],writable:!1})}const{type:c}=ke;switch(c){case Boolean:Object.defineProperty(a,n,{get:function(){return this.hasAttribute(o)},set:function(t){t?this.setAttribute(o,""):this.removeAttribute(o)}});break;case Object:Object.defineProperty(a,n,{get:function(){const t=this.getAttribute(o);return null!==t?JSON.parse(t):s},set:function(t){null!==t?this.setAttribute(o,JSON.stringify(t)):this.removeAttribute(o)}});break;case Number:Object.defineProperty(a,n,{get:function(){const t=this.getAttribute(o);return null!==t?parseFloat(t):s},set:function(t){null!==t?this.setAttribute(o,t):this.removeAttribute(o)}});break;default:Object.defineProperty(a,n,{get:function(){const t=this.getAttribute(o);return null!==t?t:s},set:function(t){null!==t?this.setAttribute(o,t):this.removeAttribute(o)}})}})],He.prototype,"type",void 0),He=Ve([function(t){return e=>{const{name:r,options:a}=t;return customElements.get(r)||customElements.define(r,e,a),e}}({name:"e-loader"})],He)})(),main=e})();
//# sourceMappingURL=main.js.map