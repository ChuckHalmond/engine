var main;(()=>{"use strict";var t={d:(r,e)=>{for(var s in e)t.o(e,s)&&!t.o(r,s)&&Object.defineProperty(r,s,{enumerable:!0,get:e[s]})},o:(t,r)=>Object.prototype.hasOwnProperty.call(t,r),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},r={};(()=>{t.r(r),t.d(r,{main:()=>Mr});const e=class{constructor(t){this._defaultCtor=t.defaultCtor,this._onDefaultOverride=t.onDefaultOverride,this._constructors=new Map}get defaultCtor(){return this._defaultCtor}overrideDefaultCtor(t){this._defaultCtor=t,this._onDefaultOverride(t)}forceQualifier(t){this._forcedQualifier=t}unforceQualifier(){delete this._forcedQualifier}getConstructor(t){const r=this._forcedQualifier||t;if(void 0===r)return this._defaultCtor;const e=this._constructors.get(r);if(void 0===e)throw new Error(`No constructor for qualifier ${r}`);return e}inject(t){const r=this.getConstructor(null==t?void 0:t.qualifier);return(null==t?void 0:t.args)?new r(...Array.from(t.args)):new r}register(t,r){this._constructors.has(r)||this._constructors.set(r,t)}};class s extends Error{constructor(){super(...arguments),this.name="MathError"}}class _{constructor(t){this._array=t?[t[0],t[1]]:[0,0]}get array(){return this._array}get values(){return[this._array[0],this._array[1]]}set values(t){this._array[0]=t[0],this._array[1]=t[1]}get x(){return this._array[0]}set x(t){this._array[0]=t}get y(){return this._array[1]}set y(t){this._array[1]=t}setArray(t){if(t.length<2)throw new s("Array must be of length 2 at least.");return this._array=t,this}setValues(t){const r=this._array;return r[0]=t[0],r[1]=t[1],this}equals(t){const r=t._array,e=this._array;return r[0]===e[0]&&r[1]===e[1]}copy(t){const r=this._array,e=t._array;return r[0]=e[0],r[1]=e[1],this}clone(){return new _(this.values)}setZeros(){const t=this._array;return t[0]=0,t[1]=0,this}add(t){const r=t._array,e=this._array;return e[0]=e[0]+r[0],e[1]=e[1]+r[1],this}addScalar(t){const r=this._array;return r[0]=r[0]+t,r[1]=r[1]+t,this}sub(t){const r=t._array,e=this._array;return e[0]=e[0]-r[0],e[1]=e[1]-r[1],this}lerp(t,r){const e=t._array,s=this._array;return s[0]=r*(e[0]-s[0]),s[1]=r*(e[1]-s[1]),this}clamp(t,r){const e=this._array,s=t._array,_=r._array;return e[0]=Math.min(_[0],Math.min(e[0],s[0])),e[1]=Math.min(_[1],Math.min(e[1],s[1])),this}multScalar(t){const r=this._array;return r[0]=r[0]*t,r[1]=r[1]*t,this}cross(t){const r=this._array,e=t._array;return r[0]*e[1]-r[1]*e[0]}dot(t){const r=this._array,e=t._array;return r[0]*e[0]+r[1]*e[1]}len(){const t=this._array;return Math.sqrt(t[0]*t[0]+t[1]*t[1])}lenSq(){const t=this._array;return t[0]*t[0]+t[1]*t[1]}dist(t){const r=this._array,e=t._array,s=r[0]-e[0],_=r[1]-e[1];return Math.sqrt(s*s+_*_)}distSq(t){const r=this._array,e=t._array,s=r[0]-e[0],_=r[1]-e[1];return s*s+_*_}normalize(){const t=this._array,r=t[0]*t[0]+t[1]*t[1],e=Math.sqrt(r);return e>Number.EPSILON?(t[0]=t[0]/e,t[1]=t[1]/e):(t[0]=0,t[1]=0),this}negate(){const t=this._array;return t[0]=-t[0],t[1]=-t[1],this}mult(t){const r=t._array,e=this._array;return e[0]=e[0]*r[0],e[1]=e[1]*r[1],this}addScaled(t,r){const e=t._array,s=this._array;return s[0]=s[0]+e[0]*r,s[1]=s[1]+e[1]*r,this}writeIntoArray(t,r=0){const e=this._array;t[r]=e[0],t[r+1]=e[1]}readFromArray(t,r=0){const e=this._array;return e[0]=t[r],e[1]=t[r+1],this}copyAndSub(t,r){const e=this._array,s=t._array,_=r._array;return e[0]=s[0]-_[0],e[1]=s[1]-_[1],this}}var a,i,n,E=_;new e({defaultCtor:_,onDefaultOverride:t=>{E=t}}),function(t){t.A="a",t.B="b",t.C="c",t.D="d",t.E="e",t.F="f",t.G="g",t.H="h",t.I="i",t.J="j",t.K="k",t.L="l",t.M="m",t.O="o",t.P="p",t.Q="q",t.R="r",t.S="s",t.T="t",t.U="u",t.V="v",t.W="w",t.X="x",t.Y="y",t.Z="z",t.ENTER="Enter",t.BACKSPACE="Backspace",t.ARROW_DOWN="ArrowDown",t.ARROW_LEFT="ArrowLeft",t.ARROW_RIGHT="ArrowRight",t.ARROW_UP="ArrowUp",t.SHIFT="Shift"}(a||(a={})),function(t){t.Alt="Alt",t.Control="Control",t.Shift="Shift"}(i||(i={})),function(t){t[t.LEFT=1]="LEFT",t[t.WHEEL=2]="WHEEL",t[t.RIGHT=3]="RIGHT",t[t.FORWARD=4]="FORWARD",t[t.BACK=5]="BACK"}(n||(n={}));const o=[n.LEFT,n.WHEEL,n.RIGHT,n.BACK,n.FORWARD],A=Object.values(a).reduce(((t,r,e)=>(t[r]=e,t)),{}),T={DOWN:0,REPEAT:1,UP:2};class R{static clear(){this.keyFlags.fill(!1),this.mouseFlags.fill(!1,T.DOWN*this.mouseButtonsCount,T.REPEAT*this.mouseButtonsCount),this.mouseFlags.fill(!1,T.UP*this.mouseButtonsCount),this.wheelDelta=0}static initializePointerHandlers(t){t.addEventListener("pointerdown",(t=>{this.mouseFlags[T.DOWN*this.mouseButtonsCount+o[t.button]]=!0,this.mouseFlags[T.REPEAT*this.mouseButtonsCount+o[t.button]]=!0})),t.addEventListener("pointerup",(t=>{this.mouseFlags[T.REPEAT*this.mouseButtonsCount+o[t.button]]=!1,this.mouseFlags[T.UP*this.mouseButtonsCount+o[t.button]]=!0})),t.addEventListener("contextmenu",(t=>{t.preventDefault()})),t.addEventListener("pointermove",(r=>{this.mousePos.setValues([r.clientX/t.clientWidth-.5,r.clientY/t.clientHeight-.5])})),t.addEventListener("wheel",(t=>{this.wheelDelta=Math.min(t.deltaY,1e3)/1e3}),{passive:!0})}static initializeKeyboardHandlers(t){t.addEventListener("keydown",(t=>{this.keyFlags[(t.repeat?T.REPEAT:T.DOWN)*this.keysCount+A[t.key]]=!0})),t.addEventListener("keyup",(t=>{this.keyFlags[T.UP*this.keysCount+A[t.key]]=!0,this.keyFlags[T.DOWN*this.keysCount+A[t.key]]=!1,this.keyFlags[T.REPEAT*this.keysCount+A[t.key]]=!1}))}static initialize(t){this.initializePointerHandlers(t),this.initializeKeyboardHandlers(t)}static getKey(t){return this.keyFlags[T.REPEAT*this.keysCount+A[t]]}static getKeyUp(t){return this.keyFlags[T.UP*this.keysCount+A[t]]}static getKeyDown(t){return this.keyFlags[T.DOWN*this.keysCount+A[t]]}static getMouseButton(t){return this.mouseFlags[T.REPEAT*this.mouseButtonsCount+t]}static getMouseButtonPosition(){return this.mousePos}static getWheelDelta(){return this.wheelDelta}static getMouseButtonDown(t){return this.mouseFlags[T.DOWN*this.mouseButtonsCount+t]}static getMouseButtonUp(t){return this.mouseFlags[T.UP*this.mouseButtonsCount+t]}}function h(t,r){const e=r.length,s=[];let _=-1;for(;++_<e;)s.push(...t[r[_]]);return s}var c;R.keysCount=Object.keys(a).length,R.mouseButtonsCount=Object.keys(n).length,R.keyFlags=new Array(Object.keys(T).length*R.keysCount),R.mouseFlags=new Array(Object.keys(T).length*R.mouseButtonsCount),R.mousePos=new E,R.wheelDelta=0,function(t){t[t.NO_AUTO_EXTEND=0]="NO_AUTO_EXTEND",t[t.AUTO_EXTEND_ONE=1]="AUTO_EXTEND_ONE",t[t.AUTO_EXTEND_POW2=2]="AUTO_EXTEND_POW2"}(c||(c={}));const u=class extends class{constructor(t,r){this._ctor=t,this._autoExtendPolicy=r||c.AUTO_EXTEND_ONE,this._autoExtendTicks=0,this._autoExtend=this.getAutoExtendFunction(this._autoExtendPolicy)}get ctor(){return this._ctor}get autoExtendPolicy(){return this._autoExtendPolicy}setAutoExtendPolicy(t){this._autoExtendPolicy=t,this._autoExtend=this.getAutoExtendFunction(this._autoExtendPolicy)}getAutoExtendFunction(t){switch(t){case c.NO_AUTO_EXTEND:return()=>{this._autoExtendTicks++};case c.AUTO_EXTEND_ONE:return()=>{this.extend(1),this._autoExtendTicks++};case c.AUTO_EXTEND_POW2:return()=>{this.extend(Math.pow(2,this._autoExtendTicks)),this._autoExtendTicks++}}}}{constructor(t,r){super(t,null==r?void 0:r.policy),this._objects=Array((null==r?void 0:r.size)||0).fill(0).map((()=>new this.ctor(null==r?void 0:r.args))),this._top=0}acquireTemp(t,r){const e=this._top,s=e+t,_=this._objects;for(;_.length<s;)this._autoExtend();switch(this._top=s,t){case 1:r(_[e]);break;case 2:r(_[e],_[e+1]);break;case 3:r(_[e],_[e+1],_[e+2]);break;case 4:r(_[e],_[e+1],_[e+2],_[e+3]);break;case 5:r(_[e],_[e+1],_[e+2],_[e+3],_[e+4]);break;case 6:r(_[e],_[e+1],_[e+2],_[e+3],_[e+4],_[e+5]);break;case 7:r(_[e],_[e+1],_[e+2],_[e+3],_[e+4],_[e+5],_[e+6]);break;case 8:r(_[e],_[e+1],_[e+2],_[e+3],_[e+4],_[e+5],_[e+6],_[e+7]);break;default:r(..._.slice(e,e+t))}this._top=e}acquire(){return this._top+1>this._objects.length&&this._autoExtend(),this._objects[this._top++]}release(t){const r=this._top-t;this._top=r>0?r:0}extend(t){this._objects.push(...Array(t).fill(0).map((()=>new this.ctor)))}clear(){this._objects=[],this._top=0,this._autoExtendTicks=0}};class N{constructor(t){this._array=t?[t[0],t[1],t[2]]:[0,0,0]}get array(){return this._array}get values(){return[this._array[0],this._array[1],this._array[2]]}set values(t){this._array[0]=t[0],this._array[1]=t[1],this._array[2]=t[2]}get x(){return this._array[0]}set x(t){this._array[0]=t}get y(){return this._array[1]}set y(t){this._array[1]=t}get z(){return this._array[2]}set z(t){this._array[2]=t}setArray(t){if(t.length<3)throw new s("Array must be of length 3 at least.");return this._array=t,this}setValues(t){const r=this._array;return r[0]=t[0],r[1]=t[1],r[2]=t[2],this}copy(t){const r=this._array,e=t.array;return r[0]=e[0],r[1]=e[1],r[2]=e[2],this}clone(){return new N(this.values)}equals(t){const r=this._array,e=t.array;return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]}setZeros(){const t=this._array;return t[0]=0,t[1]=0,t[2]=0,this}add(t){const r=this._array,e=t.array;return r[0]=r[0]+e[0],r[1]=r[1]+e[1],r[2]=r[2]+e[2],this}addScalar(t){const r=this._array;return r[0]=r[0]+t,r[1]=r[1]+t,r[2]=r[2]+t,this}sub(t){const r=this._array,e=t.array;return r[0]=r[0]-e[0],r[1]=r[1]-e[1],r[2]=r[2]-e[2],this}lerp(t,r){const e=this._array,s=t.array;return e[0]=r*(s[0]-e[0]),e[1]=r*(s[1]-e[1]),e[2]=r*(s[2]-e[2]),this}max(t){const r=this._array,e=t.array;return r[0]=Math.max(r[0],e[0]),r[1]=Math.max(r[1],e[1]),r[2]=Math.max(r[2],e[2]),this}min(t){const r=this._array,e=t.array;return r[0]=Math.min(r[0],e[0]),r[1]=Math.min(r[1],e[1]),r[2]=Math.min(r[2],e[2]),this}clamp(t,r){const e=this._array,s=t.array,_=r.array;return e[0]=Math.min(_[0],Math.max(e[0],s[0])),e[1]=Math.min(_[1],Math.max(e[1],s[1])),e[2]=Math.min(_[2],Math.max(e[2],s[2])),this}multScalar(t){const r=this._array;return r[0]=r[0]*t,r[1]=r[1]*t,r[2]=r[2]*t,this}cross(t){const r=this._array,e=t.array,s=r[1]*e[2]-r[2]*e[1],_=r[2]*e[0]-r[0]*e[2],a=r[0]*e[1]-r[1]*e[0];return r[0]=s,r[1]=_,r[2]=a,this}dot(t){const r=this._array,e=t.array;return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}len(){const t=this._array;return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}lenSq(){const t=this._array;return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}dist(t){const r=this._array,e=t.array,s=r[0]-e[0],_=r[1]-e[1],a=r[2]-e[2];return Math.sqrt(s*s+_*_+a*a)}distSq(t){const r=this._array,e=t.array,s=r[0]-e[0],_=r[1]-e[1],a=r[2]-e[2];return s*s+_*_+a*a}normalize(){const t=this._array,r=this.len();return r>Number.EPSILON?(t[0]=t[0]/r,t[1]=t[1]/r,t[2]=t[2]/r):(t[0]=0,t[1]=0,t[2]=0),this}negate(){const t=this._array;return t[0]=-t[0],t[1]=-t[1],t[2]=-t[2],this}mult(t){const r=this._array;if(t instanceof I){const e=t.array;return r[0]=r[0]*e[0],r[1]=r[1]*e[1],r[2]=r[2]*e[2],this}{const r=this.x,e=this.y,s=this.z,_=t.array;return this.x=r*_[0]+e*_[3]+s*_[6],this.y=r*_[1]+e*_[4]+s*_[7],this.z=r*_[2]+e*_[5]+s*_[8],this}}static mult(t,r){const e=t.array,s=r.array;return new N([e[0]*s[0]+e[1]*s[1]+e[2]*s[2],e[3]*s[0]+e[4]*s[1]+e[5]*s[2],e[6]*s[0]+e[7]*s[1]+e[8]*s[2]])}writeIntoArray(t,r=0){const e=this._array;t[r]=e[0],t[r+1]=e[1],t[r+2]=e[2]}readFromArray(t,r=0){const e=this._array;return e[0]=t[r],e[1]=t[r+1],e[2]=t[r+2],this}addScaled(t,r){const e=this._array,s=t.array;return e[0]=e[0]+s[0]*r,e[1]=e[1]+s[1]*r,e[2]=e[2]+s[2]*r,this}copyAndSub(t,r){const e=this._array,s=t.array,_=r.array;return e[0]=s[0]-_[0],e[1]=s[1]-_[1],e[2]=s[2]-_[2],this}copyAndCross(t,r){const e=this._array,s=t.array,_=r.array,a=s[1]*_[2]-s[2]*_[1],i=s[2]*_[0]-s[0]*_[2],n=s[0]*_[1]-s[1]*_[0];return e[0]=a,e[1]=i,e[2]=n,this}}var I=N;new e({defaultCtor:N,onDefaultOverride:t=>{I=t}});const l=new u(N);class y{constructor(t,r,e){this._point1=t||new I,this._point2=r||new I,this._point3=e||new I}get point1(){return this._point1}set point1(t){this._point1=t}get point2(){return this._point2}set point2(t){this._point2=t}get point3(){return this._point3}set point3(t){this._point3=t}getValues(){const t=this._point1,r=this._point2,e=this._point3;return[t.x,t.y,t.z,r.x,r.y,r.z,e.x,e.y,e.z]}set(t,r,e){return this._point1.copy(t),this._point2.copy(r),this._point3.copy(e),this}setValues(t){return this._point1.setValues([t[0],t[1],t[2]]),this._point2.setValues([t[3],t[4],t[5]]),this._point3.setValues([t[6],t[7],t[8]]),this}clone(){return(new y).copy(this)}copy(t){return this._point1=t._point1,this._point2=t._point2,this._point3=t._point3,this}getNormal(t){return l.acquireTemp(1,(r=>{t.copyAndSub(this._point2,this.point1),r.copyAndSub(this._point3,this.point1),t.cross(r).normalize()})),t}getBarycentricCoordinates(t,r){return l.acquireTemp(3,((e,s,_)=>{e.copyAndSub(this._point2,this._point1),s.copyAndSub(this._point3,this._point1),_.copyAndSub(t,this._point1);const a=e.dot(e),i=e.dot(s),n=e.dot(_),E=s.dot(s),o=s.dot(_),A=a*E-i*i;if(0===A)return void r.setValues([-2,-1,-1]);const T=1/A,R=(E*n-i*o)*T,h=(a*o-i*n)*T;r.setValues([1-R-h,h,R])})),r}*sharedPointsWith(t){(this._point1.equals(t._point1)||this._point1.equals(t._point2)||this._point1.equals(t._point3))&&(yield this._point1),(this._point2.equals(t._point1)||this._point2.equals(t._point2)||this._point2.equals(t._point3))&&(yield this._point2),(this._point3.equals(t._point1)||this._point3.equals(t._point2)||this._point3.equals(t._point3))&&(yield this._point3)}indexOfPoint(t){return t.equals(this._point1)?0:t.equals(this._point2)?1:t.equals(this._point3)?2:-1}containsPoint(t){let r=!1;return l.acquireTemp(1,(e=>{this.getBarycentricCoordinates(t,e),r=e.x>=0&&e.y>=0&&e.x+e.y<=1})),r}getUV(t,r,e,s,_){return l.acquireTemp(1,(a=>{this.getBarycentricCoordinates(t,a),_.setZeros(),_.addScaled(r,a.x),_.addScaled(e,a.y),_.addScaled(s,a.z)})),_}isFrontFacing(t){let r=!1;return l.acquireTemp(2,((e,s)=>{e.copyAndSub(this._point2,this._point1),s.copyAndSub(this._point3,this._point1),r=e.cross(s).dot(t)<0})),r}getArea(){let t=0;return l.acquireTemp(2,((r,e)=>{r.copyAndSub(this._point2,this._point1),e.copyAndSub(this._point3,this._point1),t=.5*r.cross(e).len()})),t}getMidpoint(t){return t.copy(this._point1).add(this._point2).add(this._point3).multScalar(1/3)}getPlane(t){throw Error("Not implemented yet.")}closestPointToPoint(t,r){const e=this._point1,s=this._point2,_=this._point3;let a,i;return l.acquireTemp(4,((n,E,o,A)=>{n.copyAndSub(s,e),E.copyAndSub(_,e),o.copyAndSub(t,e);const T=n.dot(o),R=E.dot(o);if(T<=0&&R<=0)return r.copy(e);A.copyAndSub(t,s);const h=e.dot(A),c=E.dot(A);if(h>=0&&c<=h)return r.copy(s);const u=T*c-h*R;if(u<=0&&T>=0&&h<=0)return a=T/(T-h),r.copy(e).addScaled(n,a);o.copyAndSub(t,_);const N=n.dot(o),I=E.dot(o);if(I>=0&&N<=I)return r.copy(_);const l=N*R-T*I;if(l<=0&&R>=0&&I<=0)return i=R/(R-I),r.copy(e).addScaled(E,i);const y=h*I-N*c;if(y<=0&&c-h>=0&&N-I>=0)return E.copyAndSub(_,s),i=(c-h)/(c-h+(N-I)),r.copy(s).addScaled(E,i);const S=1/(y+l+u);a=l*S,i=u*S,r.copy(e).addScaled(n,a).addScaled(E,i)})),r}equals(t){return t._point1.equals(this._point1)&&t._point2.equals(this._point2)&&t._point3.equals(this._point3)}translate(t){this._point1.add(t),this._point2.add(t),this._point3.add(t)}transform(t){this._point1.setValues(t.transformDirection(this._point1)),this._point2.setValues(t.transformDirection(this._point2)),this._point3.setValues(t.transformDirection(this._point3))}readFromArray(t,r){return this.point1.readFromArray(t,r),this.point2.readFromArray(t,r+3),this.point3.readFromArray(t,r+6),this}writeIntoArray(t,r){this.point1.writeIntoArray(t,r),this.point2.writeIntoArray(t,r+3),this.point3.writeIntoArray(t,r+6)}}new e({defaultCtor:y,onDefaultOverride:t=>{}});const S=new u(y),M=(Math.PI,Math.PI,new ArrayBuffer(Float32Array.BYTES_PER_ELEMENT)),F=new Float32Array(M),O=new Uint32Array(M),C=function(t,r,e){return Math.max(r,Math.min(e,t))};class L{constructor(t){this._array=t||[]}get array(){return this._array}get count(){return Math.floor(this._array.length/9)}setArray(t){return this._array=t,this}get(t,r){if(t>=this.count)throw new Error(`Index ${t} out of bounds.`);return r.readFromArray(this._array,9*t)}set(t,r){if(t>=this.count)throw new Error(`Index ${t} out of bounds.`);r.writeIntoArray(this._array,9*t)}indexOf(t){const r=this.count;let e=0,s=0,_=-1;const a=S.acquire();for(;e<r;){if(a.readFromArray(this._array,e),t.equals(a)){_=s,s+=1;break}s+=1,e+=9}return S.release(1),_}forEach(t,r={idxTo:this.count,idxFrom:0}){const e=C(r.idxTo,0,this.count);let s=C(r.idxFrom,0,e);const _=S.acquire();for(;s<e;)this.get(s,_),t(_,s),s+=1;S.release(1)}getIndexedPoints(t,r){r.point1.readFromArray(this._array,t[0]),r.point2.readFromArray(this._array,t[1]),r.point3.readFromArray(this._array,t[2])}forIndexedPoints(t,r,e={idxTo:r.length/3,idxFrom:0}){const s=C(e.idxTo,0,r.length/3),_=C(e.idxFrom,0,s);let a=3*_;const i=S.acquire();{const e=[0,0,0];for(let n=_;n<s;n++)e[0]=r[a],e[1]=r[a+1],e[2]=r[a+2],i.point1.readFromArray(this._array,3*e[0]),i.point2.readFromArray(this._array,3*e[1]),i.point3.readFromArray(this._array,3*e[2]),t(i,n,e),a+=3}S.release(1)}}const U=L,P=new u(_),B=class{constructor(t){this._array=t||[]}get array(){return this._array}get count(){return Math.floor(this._array.length/2)}setArray(t){return this._array=t,this}forEach(t,r={idxTo:this.count,idxFrom:0}){const e=this.count,s=C(r.idxTo,0,e);let _=C(r.idxFrom,0,s);P.acquireTemp(1,(r=>{for(;_<e;)this.get(_,r),t(r,_),_+=1}))}indexOf(t){const r=this.count;let e=0,s=0,_=-1;return P.acquireTemp(1,(a=>{for(;e<r;){if(a.readFromArray(this._array,e),a.equals(t)){_=s;break}s+=1,e+=2}})),_}get(t,r){if(t>=this.count)throw new Error(`Index ${t} out of bounds.`);return r.readFromArray(this._array,2*t)}set(t,r){if(t>=this.count)throw new Error(`Index ${t} out of bounds.`);r.readFromArray(this._array,2*t)}};class d{constructor(t){this._array=t||[]}get array(){return this._array}get count(){return Math.floor(this._array.length/3)}setArray(t){return this._array=t,this}forEach(t,r={idxTo:this.count,idxFrom:0}){const e=this.count,s=C(r.idxTo,0,e);let _=C(r.idxFrom,0,s);const a=l.acquire();for(;_<e;)this.get(_,a),t(a,_),_+=1;l.release(1)}forEachFromIndices(t,r,e={idxTo:r.length/3,idxFrom:0}){const s=C(e.idxTo,0,r.length/3),_=C(e.idxFrom,0,s);let a=3*_;const i=l.acquire();for(let e=_;e<s;e++){const s=r[a];this.get(s,i),t(i,e,s)}l.release(1)}indexOf(t){const r=this.count;let e=0,s=0,_=-1;const a=l.acquire();for(;e<r;){if(a.readFromArray(this._array,e),t.equals(a)){_=s;break}s+=1,e+=3}return l.release(1),_}get(t,r){if(t>=this.count)throw new Error(`Index ${t} out of bounds.`);return r.readFromArray(this._array,3*t)}set(t,r){if(t>=this.count)throw new Error(`Index ${t} out of bounds.`);r.writeIntoArray(this._array,3*t)}}const m=d,f=new class{constructor(){this._count=0}newUUID(){return(++this._count).toString(16)}};class D{constructor(){this._min=new I([-1/0,-1/0,-1/0]),this._max=new I([1/0,1/0,1/0])}get min(){return this._min}set min(t){this._min=t}get max(){return this._max}set max(t){this._max=t}set(t,r){this._min.copy(t),this._max.copy(r)}copy(t){return this._min=t._min,this._max=t._max,this}clone(t){return(new D).copy(t)}makeEmpty(){this._min.setValues([1/0,1/0,1/0]),this._max.setValues([1/0,1/0,1/0])}isEmpty(){return this._max.x<this._min.x||this._max.y<this._min.y||this._max.z<this._min.z}getCenter(t){return this.isEmpty()?t.setValues([0,0,0]):t.copy(this._min).add(this._max).multScalar(.5),t}getSize(t){return this.isEmpty()?t.setValues([0,0,0]):t.copy(this._max).sub(this._min),t}setFromLengths(t,r,e,s){return this._min.setValues([t.x-r/2,t.y-e/2,t.z-s/2]),this._max.setValues([t.x+r/2,t.y+e/2,t.z+s/2]),this}setFromPoints(t){return this.makeEmpty(),t.forEach((t=>{this.expandByPoint(t)})),this}expandByPoint(t){return this._min.min(t),this._max.min(t),this}expandByVector(t){return this._min.sub(t),this._max.add(t),this}expandByScalar(t){return this._min.addScalar(-t),this._max.addScalar(t),this}clampPoint(t,r){return r.copy(t).clamp(this._min,this._max)}distanceToPoint(t){let r=0;return l.acquireTemp(1,(e=>{const s=e.copy(t).clamp(this._min,this._max);r=s.sub(t).len()})),r}intersectsPlane(t){let r=0,e=0;return t.normal.x>0?(r=t.normal.x*this._min.x,e=t.normal.x*this._max.x):(r=t.normal.x*this._max.x,e=t.normal.x*this._min.x),t.normal.y>0?(r+=t.normal.y*this._min.y,e+=t.normal.y*this._max.y):(r+=t.normal.y*this._max.y,e+=t.normal.y*this._min.y),t.normal.z>0?(r+=t.normal.z*this._min.z,e+=t.normal.z*this._max.z):(r+=t.normal.z*this._max.z,e+=t.normal.z*this._min.z),r<=-t.constant&&e>=-t.constant}intersectsSphere(t){let r=!1;return l.acquireTemp(1,(e=>{this.clampPoint(t.center,e),r=e.distSq(t.center)<=t.radius*t.radius})),r}intersectsBox(t){return!(t._max.x<this._min.x||t._min.x>this._max.x||t._max.y<this._min.y||t._min.y>this._max.y||t._max.z<this._min.z||t._min.z>this._max.z)}getBoundingSphere(t){return t.radius=.5*this.getSize(t.center).len(),this.getCenter(t.center),t}intersectsTriangle(t){if(this.isEmpty())return!1;const r=t.point1,e=t.point2,s=t.point3;let _=!1;return l.acquireTemp(8,((t,a,i,n,E,o,A,T)=>{this.getCenter(t),a.copyAndSub(this._max,t),i.copyAndSub(r,t),n.copyAndSub(e,t),E.copyAndSub(s,t),o.copyAndSub(e,r),A.copyAndSub(s,e),T.copyAndSub(r,s);let R=new Float32Array([0,-o.z,o.y,0,-A.z,A.y,0,-T.z,T.y,o.z,0,-o.x,A.z,0,-A.x,T.z,0,-T.x,-o.y,o.x,0,-A.y,A.x,0,-T.y,T.x,0]);if(!this.satForAxes(R,i,n,E,a))return void(_=!1);if(R=new Float32Array([1,0,0,0,1,0,0,0,1]),!this.satForAxes(R,i,n,E,a))return void(_=!1);const h=t.copyAndCross(o,A);_=this.satForAxes(h.values,i,n,E,a)})),_}satForAxes(t,r,e,s,_){let a=!0;return l.acquireTemp(1,(i=>{for(let n=0,E=t.length-3;n<=E;n+=3){i.x=t[n],i.y=t[n+1],i.z=t[n+2];const E=_.x*Math.abs(i.x)+_.y*Math.abs(i.y)+_.z*Math.abs(i.z),o=r.dot(i),A=e.dot(i),T=s.dot(i);Math.max(-Math.max(o,A,T),Math.min(o,A,T))>E&&(a=!1)}})),a}}var g=D;new e({defaultCtor:D,onDefaultOverride:t=>{g=t}});const p=new u(D);class G{constructor(){this._center=new I([-1/0,-1/0,-1/0]),this._radius=0}get center(){return this._center}set center(t){this._center=t}get radius(){return this._radius}set radius(t){this._radius=t}set(t,r){return this._center.copy(t),this._radius=r,this}copy(t){return this._center.copy(t._center),this._radius=t._radius,this}clone(){return(new G).copy(this)}setFromPoints(t,r){void 0!==r?this._center.copy(r):p.acquireTemp(1,(r=>{r.setFromPoints(t).getCenter(this._center)}));let e=0;return t.forEach((t=>{e=Math.max(e,this._center.distSq(t))})),this._radius=Math.sqrt(e),this}isEmpty(){return this._radius<0}makeEmpty(){return this._center.setZeros(),this._radius=-1,this}containsPoint(t){return t.distSq(this._center)<=this._radius*this._radius}dist(t){return t.dist(this._center)-this._radius}distToPlane(t){return t.distanceToPoint(this._center)-this._radius}intersectsSphere(t){const r=this._radius+t._radius;return this._center.distSq(t._center)<=r*r}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this._center))<=this._radius}clampPoint(t,r){const e=this._center.distSq(t);return r.copy(t),e>this._radius*this._radius&&(r.sub(this._center).normalize(),r.multScalar(this._radius).add(this._center)),r}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this._center,this._center),t.expandByScalar(this._radius),t)}transform(t){this._center.setValues(t.transformPoint(this._center)),this._radius=this._radius*t.getMaxScaleOnAxis()}translate(t){this._center.add(t)}}var x=G;new e({defaultCtor:G,onDefaultOverride:t=>{x=t}});const b=new u(L),X=new u(d);class w{static computeTangentsAndBitangents(t,r,e,s){const _=new s(t.length),a=new s(t.length);for(let s=0;s<t.length;s+=3){const i=3,n=t[e[s]*i],E=t[e[s]*i+1],o=t[e[s]*i+2],A=t[e[s+1]*i]-n,T=t[e[s+1]*i+1]-E,R=t[e[s+1]*i+2]-o,h=t[e[s+2]*i]-n,c=t[e[s+2]*i+1]-E,u=t[e[s+2]*i+2]-o,N=2,I=r[e[s+1]*N]-r[e[s]*N],l=r[e[s+1]*N+1]-r[e[s]*N+1],y=r[e[s+2]*N]-r[e[s]*N],S=r[e[s+2]*N+1]-r[e[s]*N+1],M=1/(I*S-l*y),F=(A*S-h*l)*M,O=(T*S-c*l)*M,C=(R*S-u*l)*M,L=(h*I-A*y)*M,U=(c*I-T*y)*M,P=(u*I-R*y)*M;_[e[s]*i]=F,_[e[s]*i+1]=O,_[e[s]*i+2]=C,_[e[s+1]*i]=F,_[e[s+1]*i+1]=O,_[e[s+1]*i+2]=C,_[e[s+2]*i]=F,_[e[s+2]*i+1]=O,_[e[s+2]*i+2]=C,a[e[s]*i]=L,a[e[s]*i+1]=U,a[e[s]*i+2]=P,a[e[s+1]*i]=L,a[e[s+1]*i+1]=U,a[e[s+1]*i+2]=P,a[e[s+2]*i]=L,a[e[s+2]*i+1]=U,a[e[s+2]*i+2]=P}return{tangentsArray:_,bitangentsArray:a}}static computeFacesNormals(t,r,e){const s=new e(r.length);let _=b.acquire().setArray(t),a=X.acquire().setArray(s),i=l.acquire();return _.forIndexedPoints(((t,r)=>{t.getNormal(i),a.set(r,i)}),r),l.release(1),X.release(1),b.release(1),s}static computeVerticesNormals(t,r,e,s,_){const a=new s(t.length);let i=X.acquire().setArray(a),n=X.acquire().setArray(t),E=b.acquire().setArray(t),o=X.acquire().setArray(_||this.computeFacesNormals(t,r,s));return l.acquireTemp(2,((t,s)=>{e?n.forEach(((e,_)=>{i.get(_,t),E.forIndexedPoints(((r,_)=>{r.indexOfPoint(e)>-1&&(o.get(_,s),t.add(s.multScalar(r.getArea())))}),r),t.normalize(),i.set(_,t)})):E.forIndexedPoints(((t,r,e)=>{t.getNormal(s),i.set(e[0],s),i.set(e[1],s),i.set(e[2],s)}),r)})),a}}var V;!function(t){t[t.vertices=0]="vertices",t[t.indices=1]="indices",t[t.uvs=2]="uvs",t[t.facesNormals=3]="facesNormals",t[t.verticesNormals=4]="verticesNormals",t[t.tangents=5]="tangents",t[t.bitangents=6]="bitangents"}(V||(V={}));class H{constructor(t){this.uuid=f.newUUID(),this.isGeometry=!0,this._verticesArray=t.vertices,this._vertices=new m(this._verticesArray),this._faces=new U(this._verticesArray),this._indicesArray=t.indices,this._uvsArray=t.uvs,this._uvs=new B(this._uvsArray),this._weightedVerticesNormals=t.weightedVerticesNormals||!1,this._facesNormalsArray=w.computeFacesNormals(this._verticesArray,this._indicesArray,Float32Array),this._facesNormals=new m(this._facesNormalsArray),this._verticesNormalsArray=w.computeVerticesNormals(this._verticesArray,this._indicesArray,this._weightedVerticesNormals,Float32Array,this._facesNormalsArray),this._verticesNormals=new m(this._verticesNormalsArray);const{tangentsArray:r,bitangentsArray:e}=w.computeTangentsAndBitangents(this._verticesArray,this._uvsArray,this._indicesArray,Float32Array);this._tangentsArray=r,this._bitangentsArray=e,this._tangents=new m(this._tangentsArray),this._bitangents=new m(this._bitangentsArray)}get indices(){return this._indicesArray}get vertices(){return this._vertices}get uvs(){return this._uvs}get faces(){return this._faces}get facesNormals(){return this._facesNormals}get verticesNormals(){return this._verticesNormals}get tangents(){return this._tangents}get bitangents(){return this._bitangents}get boundingBox(){return this._boundingBox}get boundingSphere(){return this._boundingSphere}computeBoundingBox(){return void 0===this._boundingBox?this._boundingBox=(new g).setFromPoints(this._vertices):this._boundingBox.setFromPoints(this._vertices),this._boundingBox}computeBoundingSphere(){return void 0===this._boundingSphere?this._boundingSphere=(new x).setFromPoints(this._vertices):this._boundingSphere.setFromPoints(this._vertices),this._boundingSphere}}class v extends H{constructor(){super({vertices:new Float32Array(Y),indices:new Uint8Array(W),uvs:new Float32Array(K)})}}const Y=h([[-1,1,-1],[1,1,-1],[-1,1,1],[1,1,1],[-1,-1,-1],[-1,-1,1],[1,-1,1],[1,-1,-1]],[0,2,3,1,0,4,5,2,2,5,6,3,3,6,7,1,5,4,7,6,4,0,1,7]),K=h([[0,0],[1,0],[0,1],[1,1]],[0,1,3,2,0,1,3,2,0,1,3,2,0,1,3,2,0,1,3,2,0,1,3,2]),W=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23];class k extends H{constructor(){super({vertices:new Float32Array(z),uvs:new Float32Array(q),indices:new Uint8Array(Z)})}}const z=h([[0,1.618,1],[1,0,1.618],[1.618,1,0],[0,1.618,-1],[-1.618,1,0],[-1,0,1.618],[1.618,-1,0],[1,0,-1.618],[-1,0,-1.618],[-1.618,-1,0],[0,-1.618,1],[0,-1.618,-1]],[0,1,2,0,2,3,0,3,4,0,4,5,0,5,1,1,6,2,2,6,7,2,7,3,3,7,8,3,8,4,4,8,9,4,9,5,5,9,10,5,10,1,1,10,6,6,11,7,7,11,8,8,11,9,9,11,10,10,11,6]),q=h([[0,0],[1,0],[0,1],[1,1]],[1,2,0,1,2,0,1,2,0,1,2,0,1,2,0,1,2,0,1,2,0,1,2,0,1,2,0,1,2,0,1,2,0,1,2,0,1,2,0,1,2,0,1,2,0,1,2,0,1,2,0,1,2,0,1,2,0,1,2,0]),Z=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59];var j;!function(t){t[t.vertices=0]="vertices",t[t.indices=1]="indices",t[t.uvs=2]="uvs",t[t.facesNormals=3]="facesNormals",t[t.verticesNormals=4]="verticesNormals",t[t.tangents=5]="tangents",t[t.bitangents=6]="bitangents"}(j||(j={}));class Q extends class{constructor(t){this.uuid=f.newUUID(),this.isGeometry=!0,this._verticesArray=t.vertices,this._vertices=new m(this._verticesArray),this._faces=new U(this._verticesArray),this._indicesArray=t.indices,this._uvsArray=t.uvs,this._uvs=new B(this._uvsArray),this._weightedVerticesNormals=t.weightedVerticesNormals||!1,this._facesNormalsArray=w.computeFacesNormals(this._verticesArray,this._indicesArray,Float32Array),this._facesNormals=new m(this._facesNormalsArray),this._verticesNormalsArray=w.computeVerticesNormals(this._verticesArray,this._indicesArray,this._weightedVerticesNormals,Float32Array,this._facesNormalsArray),this._verticesNormals=new m(this._verticesNormalsArray);const{tangentsArray:r,bitangentsArray:e}=w.computeTangentsAndBitangents(this._verticesArray,this._uvsArray,this._indicesArray,Float32Array);this._tangentsArray=r,this._bitangentsArray=e,this._tangents=new m(this._tangentsArray),this._bitangents=new m(this._bitangentsArray)}get indices(){return this._indicesArray}get vertices(){return this._vertices}get uvs(){return this._uvs}get faces(){return this._faces}get facesNormals(){return this._facesNormals}get verticesNormals(){return this._verticesNormals}get tangents(){return this._tangents}get bitangents(){return this._bitangents}get boundingBox(){return this._boundingBox}get boundingSphere(){return this._boundingSphere}computeBoundingBox(){return void 0===this._boundingBox?this._boundingBox=(new g).setFromPoints(this._vertices):this._boundingBox.setFromPoints(this._vertices),this._boundingBox}computeBoundingSphere(){return void 0===this._boundingSphere?this._boundingSphere=(new x).setFromPoints(this._vertices):this._boundingSphere.setFromPoints(this._vertices),this._boundingSphere}}{constructor(){super({vertices:new Float32Array($),uvs:new Float32Array(J),indices:new Uint8Array(tt)})}}const $=h([[-1,1,1],[1,1,1],[-1,-1,1],[1,-1,1]],[0,2,3,1]),J=h([[0,0],[1,0],[0,1],[1,1]],[0,2,3,1]),tt=[0,1,2,0,2,3],rt=document.createElement("canvas").getContext("webgl2");var et,st,_t,at,it,nt,Et,ot,At,Tt,Rt,ht,ct,ut,Nt,It,lt,yt,St,Mt,Ft,Ot,Ct,Lt,Ut,Pt,Bt,dt,mt,ft,Dt,gt,pt,Gt,xt,bt,Xt,wt,Vt,Ht;!function(t){t[t.ZERO=rt.ZERO]="ZERO",t[t.ONE=rt.ONE]="ONE",t[t.SRC_COLOR=rt.SRC_COLOR]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=rt.ONE_MINUS_SRC_COLOR]="ONE_MINUS_SRC_COLOR",t[t.DST_COLOR=rt.DST_COLOR]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=rt.ONE_MINUS_DST_COLOR]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA=rt.SRC_ALPHA]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=rt.ONE_MINUS_SRC_ALPHA]="ONE_MINUS_SRC_ALPHA",t[t.ONE_MINUS_DST_ALPHA=rt.ONE_MINUS_DST_ALPHA]="ONE_MINUS_DST_ALPHA",t[t.CONSTANT_COLOR=rt.CONSTANT_COLOR]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=rt.ONE_MINUS_CONSTANT_COLOR]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=rt.CONSTANT_ALPHA]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=rt.ONE_MINUS_CONSTANT_ALPHA]="ONE_MINUS_CONSTANT_ALPHA",t[t.SRC_ALPHA_SATURATE=rt.SRC_ALPHA_SATURATE]="SRC_ALPHA_SATURATE"}(et||(et={})),function(t){t[t.FUNC_ADD=rt.FUNC_ADD]="FUNC_ADD",t[t.FUNC_SUBTRACT=rt.FUNC_SUBTRACT]="FUNC_SUBTRACT",t[t.FUNC_REVERSE_SUBTRACT=rt.FUNC_REVERSE_SUBTRACT]="FUNC_REVERSE_SUBTRACT",t[t.MIN=rt.MIN]="MIN",t[t.MAX=rt.MAX]="MAX"}(st||(st={})),function(t){t[t.DEPTH_BUFFER_BIT=rt.DEPTH_BUFFER_BIT]="DEPTH_BUFFER_BIT",t[t.STENCIL_BUFFER_BIT=rt.STENCIL_BUFFER_BIT]="STENCIL_BUFFER_BIT",t[t.COLOR_BUFFER_BIT=rt.COLOR_BUFFER_BIT]="COLOR_BUFFER_BIT"}(_t||(_t={})),function(t){t[t.DEPTH=rt.DEPTH]="DEPTH",t[t.STENCIL=rt.STENCIL]="STENCIL",t[t.COLOR=rt.COLOR]="COLOR",t[t.DEPTH_STENCIL=rt.DEPTH_STENCIL]="DEPTH_STENCIL"}(at||(at={})),function(t){t[t.STATIC_DRAW=rt.STATIC_DRAW]="STATIC_DRAW",t[t.DYNAMIC_DRAW=rt.DYNAMIC_DRAW]="DYNAMIC_DRAW",t[t.STREAM_DRAW=rt.STREAM_DRAW]="STREAM_DRAW",t[t.STATIC_READ=rt.STATIC_READ]="STATIC_READ",t[t.DYNAMIC_READ=rt.DYNAMIC_READ]="DYNAMIC_READ",t[t.STREAM_READ=rt.STREAM_READ]="STREAM_READ",t[t.STATIC_COPY=rt.STATIC_COPY]="STATIC_COPY",t[t.DYNAMIC_COPY=rt.DYNAMIC_COPY]="DYNAMIC_COPY",t[t.STREAM_COPY=rt.STREAM_COPY]="STREAM_COPY"}(it||(it={})),function(t){t[t.ARRAY_BUFFER=rt.ARRAY_BUFFER]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=rt.ELEMENT_ARRAY_BUFFER]="ELEMENT_ARRAY_BUFFER",t[t.COPY_READ_BUFFER=rt.COPY_READ_BUFFER]="COPY_READ_BUFFER",t[t.COPY_WRITE_BUFFER=rt.COPY_WRITE_BUFFER]="COPY_WRITE_BUFFER",t[t.TRANSFORM_FEEDBACK_BUFFER=rt.TRANSFORM_FEEDBACK_BUFFER]="TRANSFORM_FEEDBACK_BUFFER",t[t.UNIFORM_BUFFER=rt.UNIFORM_BUFFER]="UNIFORM_BUFFER",t[t.PIXEL_PACK_BUFFER=rt.PIXEL_PACK_BUFFER]="PIXEL_PACK_BUFFER",t[t.PIXEL_UNPACK_BUFFER=rt.PIXEL_UNPACK_BUFFER]="PIXEL_UNPACK_BUFFER"}(nt||(nt={})),function(t){t[t.UNSIGNED_BYTE=rt.UNSIGNED_BYTE]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=rt.UNSIGNED_SHORT]="UNSIGNED_SHORT",t[t.UNSIGNED_INT=rt.UNSIGNED_INT]="UNSIGNED_INT"}(Et||(Et={})),function(t){t[t.LINEAR=rt.LINEAR]="LINEAR",t[t.NEAREST=rt.NEAREST]="NEAREST"}(ot||(ot={})),function(t){t[t.ARRAY_BUFFER=rt.ARRAY_BUFFER]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=rt.ELEMENT_ARRAY_BUFFER]="ELEMENT_ARRAY_BUFFER",t[t.COPY_READ_BUFFER=rt.COPY_READ_BUFFER]="COPY_READ_BUFFER",t[t.COPY_WRITE_BUFFER=rt.COPY_WRITE_BUFFER]="COPY_WRITE_BUFFER",t[t.TRANSFORM_FEEDBACK_BUFFER=rt.TRANSFORM_FEEDBACK_BUFFER]="TRANSFORM_FEEDBACK_BUFFER",t[t.UNIFORM_BUFFER=rt.UNIFORM_BUFFER]="UNIFORM_BUFFER",t[t.PIXEL_PACK_BUFFER=rt.PIXEL_PACK_BUFFER]="PIXEL_PACK_BUFFER",t[t.PIXEL_UNPACK_BUFFER=rt.PIXEL_UNPACK_BUFFER]="PIXEL_UNPACK_BUFFER"}(At||(At={})),function(t){t[t.BLEND=rt.BLEND]="BLEND",t[t.CULL_FACE=rt.CULL_FACE]="CULL_FACE",t[t.DEPTH_TEST=rt.DEPTH_TEST]="DEPTH_TEST",t[t.DITHER=rt.DITHER]="DITHER",t[t.POLYGON_OFFSET_FILL=rt.POLYGON_OFFSET_FILL]="POLYGON_OFFSET_FILL",t[t.SAMPLE_ALPHA_TO_COVERAGE=rt.SAMPLE_ALPHA_TO_COVERAGE]="SAMPLE_ALPHA_TO_COVERAGE",t[t.SAMPLE_COVERAGE=rt.SAMPLE_COVERAGE]="SAMPLE_COVERAGE",t[t.SCISSOR_TEST=rt.SCISSOR_TEST]="SCISSOR_TEST",t[t.STENCIL_TEST=rt.STENCIL_TEST]="STENCIL_TEST",t[t.RASTERIZER_DISCARD=rt.RASTERIZER_DISCARD]="RASTERIZER_DISCARD"}(Tt||(Tt={})),function(t){t[t.FRONT=rt.FRONT]="FRONT",t[t.BACK=rt.BACK]="BACK",t[t.FRONT_AND_BACK=rt.FRONT_AND_BACK]="FRONT_AND_BACK"}(Rt||(Rt={})),function(t){t[t.POINTS=rt.POINTS]="POINTS",t[t.LINE_STRIP=rt.LINE_STRIP]="LINE_STRIP",t[t.LINE_LOOP=rt.LINE_LOOP]="LINE_LOOP",t[t.LINES=rt.LINES]="LINES",t[t.TRIANGLE_STRIP=rt.TRIANGLE_STRIP]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=rt.TRIANGLE_FAN]="TRIANGLE_FAN",t[t.TRIANGLES=rt.TRIANGLES]="TRIANGLES"}(ht||(ht={})),function(t){t[t.BYTE=rt.BYTE]="BYTE",t[t.SHORT=rt.SHORT]="SHORT",t[t.UNSIGNED_BYTE=rt.UNSIGNED_BYTE]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=rt.UNSIGNED_SHORT]="UNSIGNED_SHORT",t[t.FLOAT=rt.FLOAT]="FLOAT",t[t.HALF_FLOAT=rt.HALF_FLOAT]="HALF_FLOAT"}(ct||(ct={})),function(t){t[t.NO_ERROR=rt.NO_ERROR]="NO_ERROR",t[t.INVALID_ENUM=rt.INVALID_ENUM]="INVALID_ENUM",t[t.INVALID_OPERATION=rt.INVALID_OPERATION]="INVALID_OPERATION",t[t.OUT_OF_MEMORY=rt.OUT_OF_MEMORY]="OUT_OF_MEMORY",t[t.CONTEXT_LOST_WEBGL=rt.CONTEXT_LOST_WEBGL]="CONTEXT_LOST_WEBGL"}(ut||(ut={})),function(t){t[t.COLOR_ATTACHMENT0=rt.COLOR_ATTACHMENT0]="COLOR_ATTACHMENT0",t[t.COLOR_ATTACHMENT1=rt.COLOR_ATTACHMENT1]="COLOR_ATTACHMENT1",t[t.COLOR_ATTACHMENT2=rt.COLOR_ATTACHMENT2]="COLOR_ATTACHMENT2",t[t.COLOR_ATTACHMENT3=rt.COLOR_ATTACHMENT3]="COLOR_ATTACHMENT3",t[t.COLOR_ATTACHMENT4=rt.COLOR_ATTACHMENT4]="COLOR_ATTACHMENT4",t[t.COLOR_ATTACHMENT5=rt.COLOR_ATTACHMENT5]="COLOR_ATTACHMENT5",t[t.COLOR_ATTACHMENT6=rt.COLOR_ATTACHMENT6]="COLOR_ATTACHMENT6",t[t.COLOR_ATTACHMENT7=rt.COLOR_ATTACHMENT7]="COLOR_ATTACHMENT7",t[t.COLOR_ATTACHMENT8=rt.COLOR_ATTACHMENT8]="COLOR_ATTACHMENT8",t[t.COLOR_ATTACHMENT9=rt.COLOR_ATTACHMENT9]="COLOR_ATTACHMENT9",t[t.COLOR_ATTACHMENT10=rt.COLOR_ATTACHMENT10]="COLOR_ATTACHMENT10",t[t.COLOR_ATTACHMENT11=rt.COLOR_ATTACHMENT11]="COLOR_ATTACHMENT11",t[t.COLOR_ATTACHMENT12=rt.COLOR_ATTACHMENT12]="COLOR_ATTACHMENT12",t[t.COLOR_ATTACHMENT13=rt.COLOR_ATTACHMENT13]="COLOR_ATTACHMENT13",t[t.COLOR_ATTACHMENT14=rt.COLOR_ATTACHMENT14]="COLOR_ATTACHMENT14",t[t.COLOR_ATTACHMENT15=rt.COLOR_ATTACHMENT15]="COLOR_ATTACHMENT15",t[t.DEPTH_ATTACHMENT=rt.DEPTH_ATTACHMENT]="DEPTH_ATTACHMENT",t[t.STENCIL_ATTACHMENT=rt.STENCIL_ATTACHMENT]="STENCIL_ATTACHMENT",t[t.DEPTH_STENCIL_ATTACHMENT=rt.DEPTH_STENCIL_ATTACHMENT]="DEPTH_STENCIL_ATTACHMENT"}(Nt||(Nt={})),function(t){t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=rt.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=rt.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=rt.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=rt.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",t[t.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=rt.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=rt.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=rt.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",t[t.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=rt.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=rt.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=rt.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_RED_SIZE=rt.FRAMEBUFFER_ATTACHMENT_RED_SIZE]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=rt.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=rt.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER"}(It||(It={})),function(t){t[t.FRAMEBUFFER=rt.FRAMEBUFFER]="FRAMEBUFFER",t[t.DRAW_FRAMEBUFFER=rt.DRAW_FRAMEBUFFER]="DRAW_FRAMEBUFFER",t[t.READ_FRAMEBUFFER=rt.READ_FRAMEBUFFER]="READ_FRAMEBUFFER"}(lt||(lt={})),function(t){t[t.TEXTURE_2D=rt.TEXTURE_2D]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=rt.TEXTURE_CUBE_MAP_POSITIVE_X]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=rt.TEXTURE_CUBE_MAP_NEGATIVE_X]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=rt.TEXTURE_CUBE_MAP_POSITIVE_Y]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=rt.TEXTURE_CUBE_MAP_NEGATIVE_Y]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=rt.TEXTURE_CUBE_MAP_POSITIVE_Z]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=rt.TEXTURE_CUBE_MAP_NEGATIVE_Z]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(yt||(yt={})),function(t){t[t.CW=rt.CW]="CW",t[t.CCW=rt.CCW]="CCW"}(St||(St={})),function(t){t[t.GENERATE_MIPMAP_HINT=rt.GENERATE_MIPMAP_HINT]="GENERATE_MIPMAP_HINT",t[t.FRAGMENT_SHADER_DERIVATIVE_HINT=rt.FRAGMENT_SHADER_DERIVATIVE_HINT]="FRAGMENT_SHADER_DERIVATIVE_HINT"}(Mt||(Mt={})),function(t){t[t.FASTEST=rt.FASTEST]="FASTEST",t[t.NICEST=rt.NICEST]="NICEST",t[t.DONT_CARE=rt.DONT_CARE]="DONT_CARE"}(Ft||(Ft={})),function(t){t[t.ACTIVE_TEXTURE=rt.ACTIVE_TEXTURE]="ACTIVE_TEXTURE",t[t.ALIASED_LINE_WIDTH_RANGE=rt.ALIASED_LINE_WIDTH_RANGE]="ALIASED_LINE_WIDTH_RANGE",t[t.ALIASED_POINT_SIZE_RANGE=rt.ALIASED_POINT_SIZE_RANGE]="ALIASED_POINT_SIZE_RANGE",t[t.ALPHA_BITS=rt.ALPHA_BITS]="ALPHA_BITS",t[t.ARRAY_BUFFER_BINDING=rt.ARRAY_BUFFER_BINDING]="ARRAY_BUFFER_BINDING",t[t.BLEND=rt.BLEND]="BLEND",t[t.BLEND_COLOR=rt.BLEND_COLOR]="BLEND_COLOR",t[t.BLEND_DST_ALPHA=rt.BLEND_DST_ALPHA]="BLEND_DST_ALPHA",t[t.BLEND_DST_RGB=rt.BLEND_DST_RGB]="BLEND_DST_RGB",t[t.BLEND_EQUATION=rt.BLEND_EQUATION]="BLEND_EQUATION",t[t.BLEND_EQUATION_ALPHA=rt.BLEND_EQUATION_ALPHA]="BLEND_EQUATION_ALPHA",t[t.BLEND_EQUATION_RGB=rt.BLEND_EQUATION_RGB]="BLEND_EQUATION_RGB",t[t.BLEND_SRC_ALPHA=rt.BLEND_SRC_ALPHA]="BLEND_SRC_ALPHA",t[t.BLEND_SRC_RGB=rt.BLEND_SRC_RGB]="BLEND_SRC_RGB",t[t.BLUE_BITS=rt.BLUE_BITS]="BLUE_BITS",t[t.COLOR_CLEAR_VALUE=rt.COLOR_CLEAR_VALUE]="COLOR_CLEAR_VALUE",t[t.COLOR_WRITEMASK=rt.COLOR_WRITEMASK]="COLOR_WRITEMASK",t[t.COMPRESSED_TEXTURE_FORMATS=rt.COMPRESSED_TEXTURE_FORMATS]="COMPRESSED_TEXTURE_FORMATS",t[t.CULL_FACE=rt.CULL_FACE]="CULL_FACE",t[t.CULL_FACE_MODE=rt.CULL_FACE_MODE]="CULL_FACE_MODE",t[t.CURRENT_PROGRAM=rt.CURRENT_PROGRAM]="CURRENT_PROGRAM",t[t.DEPTH_BITS=rt.DEPTH_BITS]="DEPTH_BITS",t[t.DEPTH_CLEAR_VALUE=rt.DEPTH_CLEAR_VALUE]="DEPTH_CLEAR_VALUE",t[t.DEPTH_FUNC=rt.DEPTH_FUNC]="DEPTH_FUNC",t[t.DEPTH_RANGE=rt.DEPTH_RANGE]="DEPTH_RANGE",t[t.DEPTH_TEST=rt.DEPTH_TEST]="DEPTH_TEST",t[t.DEPTH_WRITEMASK=rt.DEPTH_WRITEMASK]="DEPTH_WRITEMASK",t[t.DITHER=rt.DITHER]="DITHER",t[t.ELEMENT_ARRAY_BUFFER_BINDING=rt.ELEMENT_ARRAY_BUFFER_BINDING]="ELEMENT_ARRAY_BUFFER_BINDING",t[t.FRAMEBUFFER_BINDING=rt.FRAMEBUFFER_BINDING]="FRAMEBUFFER_BINDING",t[t.FRONT_FACE=rt.FRONT_FACE]="FRONT_FACE",t[t.GENERATE_MIPMAP_HINT=rt.GENERATE_MIPMAP_HINT]="GENERATE_MIPMAP_HINT",t[t.GREEN_BITS=rt.GREEN_BITS]="GREEN_BITS",t[t.IMPLEMENTATION_COLOR_READ_FORMAT=rt.IMPLEMENTATION_COLOR_READ_FORMAT]="IMPLEMENTATION_COLOR_READ_FORMAT",t[t.IMPLEMENTATION_COLOR_READ_TYPE=rt.IMPLEMENTATION_COLOR_READ_TYPE]="IMPLEMENTATION_COLOR_READ_TYPE",t[t.LINE_WIDTH=rt.LINE_WIDTH]="LINE_WIDTH",t[t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=rt.MAX_COMBINED_TEXTURE_IMAGE_UNITS]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t.MAX_CUBE_MAP_TEXTURE_SIZE=rt.MAX_CUBE_MAP_TEXTURE_SIZE]="MAX_CUBE_MAP_TEXTURE_SIZE",t[t.MAX_FRAGMENT_UNIFORM_VECTORS=rt.MAX_FRAGMENT_UNIFORM_VECTORS]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t.MAX_RENDERBUFFER_SIZE=rt.MAX_RENDERBUFFER_SIZE]="MAX_RENDERBUFFER_SIZE",t[t.MAX_TEXTURE_IMAGE_UNITS=rt.MAX_TEXTURE_IMAGE_UNITS]="MAX_TEXTURE_IMAGE_UNITS",t[t.MAX_TEXTURE_SIZE=rt.MAX_TEXTURE_SIZE]="MAX_TEXTURE_SIZE",t[t.MAX_VARYING_VECTORS=rt.MAX_VARYING_VECTORS]="MAX_VARYING_VECTORS",t[t.MAX_VERTEX_ATTRIBS=rt.MAX_VERTEX_ATTRIBS]="MAX_VERTEX_ATTRIBS",t[t.MAX_VERTEX_UNIFORM_VECTORS=rt.MAX_VERTEX_UNIFORM_VECTORS]="MAX_VERTEX_UNIFORM_VECTORS",t[t.MAX_VIEWPORT_DIMS=rt.MAX_VIEWPORT_DIMS]="MAX_VIEWPORT_DIMS",t[t.PACK_ALIGNMENT=rt.PACK_ALIGNMENT]="PACK_ALIGNMENT",t[t.POLYGON_OFFSET_FACTOR=rt.POLYGON_OFFSET_FACTOR]="POLYGON_OFFSET_FACTOR",t[t.POLYGON_OFFSET_FILL=rt.POLYGON_OFFSET_FILL]="POLYGON_OFFSET_FILL",t[t.POLYGON_OFFSET_UNITS=rt.POLYGON_OFFSET_UNITS]="POLYGON_OFFSET_UNITS",t[t.RED_BITS=rt.RED_BITS]="RED_BITS",t[t.RENDERBUFFER_BINDING=rt.RENDERBUFFER_BINDING]="RENDERBUFFER_BINDING",t[t.RENDERER=rt.RENDERER]="RENDERER",t[t.SAMPLE_BUFFERS=rt.SAMPLE_BUFFERS]="SAMPLE_BUFFERS",t[t.SAMPLE_COVERAGE_INVERT=rt.SAMPLE_COVERAGE_INVERT]="SAMPLE_COVERAGE_INVERT",t[t.SAMPLE_COVERAGE_VALUE=rt.SAMPLE_COVERAGE_VALUE]="SAMPLE_COVERAGE_VALUE",t[t.SAMPLES=rt.SAMPLES]="SAMPLES",t[t.SCISSOR_BOX=rt.SCISSOR_BOX]="SCISSOR_BOX",t[t.SCISSOR_TEST=rt.SCISSOR_TEST]="SCISSOR_TEST",t[t.SHADING_LANGUAGE_VERSION=rt.SHADING_LANGUAGE_VERSION]="SHADING_LANGUAGE_VERSION",t[t.STENCIL_BACK_FAIL=rt.STENCIL_BACK_FAIL]="STENCIL_BACK_FAIL",t[t.STENCIL_BACK_FUNC=rt.STENCIL_BACK_FUNC]="STENCIL_BACK_FUNC",t[t.STENCIL_BACK_PASS_DEPTH_FAIL=rt.STENCIL_BACK_PASS_DEPTH_FAIL]="STENCIL_BACK_PASS_DEPTH_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_PASS=rt.STENCIL_BACK_PASS_DEPTH_PASS]="STENCIL_BACK_PASS_DEPTH_PASS",t[t.STENCIL_BACK_REF=rt.STENCIL_BACK_REF]="STENCIL_BACK_REF",t[t.STENCIL_BACK_VALUE_MASK=rt.STENCIL_BACK_VALUE_MASK]="STENCIL_BACK_VALUE_MASK",t[t.STENCIL_BACK_WRITEMASK=rt.STENCIL_BACK_WRITEMASK]="STENCIL_BACK_WRITEMASK",t[t.STENCIL_BITS=rt.STENCIL_BITS]="STENCIL_BITS",t[t.STENCIL_CLEAR_VALUE=rt.STENCIL_CLEAR_VALUE]="STENCIL_CLEAR_VALUE",t[t.STENCIL_FAIL=rt.STENCIL_FAIL]="STENCIL_FAIL",t[t.STENCIL_FUNC=rt.STENCIL_FUNC]="STENCIL_FUNC",t[t.STENCIL_PASS_DEPTH_FAIL=rt.STENCIL_PASS_DEPTH_FAIL]="STENCIL_PASS_DEPTH_FAIL",t[t.STENCIL_PASS_DEPTH_PASS=rt.STENCIL_PASS_DEPTH_PASS]="STENCIL_PASS_DEPTH_PASS",t[t.STENCIL_REF=rt.STENCIL_REF]="STENCIL_REF",t[t.STENCIL_TEST=rt.STENCIL_TEST]="STENCIL_TEST",t[t.STENCIL_VALUE_MASK=rt.STENCIL_VALUE_MASK]="STENCIL_VALUE_MASK",t[t.STENCIL_WRITEMASK=rt.STENCIL_WRITEMASK]="STENCIL_WRITEMASK",t[t.SUBPIXEL_BITS=rt.SUBPIXEL_BITS]="SUBPIXEL_BITS",t[t.TEXTURE_BINDING_2D=rt.TEXTURE_BINDING_2D]="TEXTURE_BINDING_2D",t[t.TEXTURE_BINDING_CUBE_MAP=rt.TEXTURE_BINDING_CUBE_MAP]="TEXTURE_BINDING_CUBE_MAP",t[t.UNPACK_ALIGNMENT=rt.UNPACK_ALIGNMENT]="UNPACK_ALIGNMENT",t[t.UNPACK_COLORSPACE_CONVERSION_WEBGL=rt.UNPACK_COLORSPACE_CONVERSION_WEBGL]="UNPACK_COLORSPACE_CONVERSION_WEBGL",t[t.UNPACK_FLIP_Y_WEBGL=rt.UNPACK_FLIP_Y_WEBGL]="UNPACK_FLIP_Y_WEBGL",t[t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=rt.UNPACK_PREMULTIPLY_ALPHA_WEBGL]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t.VENDOR=rt.VENDOR]="VENDOR",t[t.VERSION=rt.VERSION]="VERSION",t[t.VIEWPORT=rt.VIEWPORT]="VIEWPORT",t[t.COPY_READ_BUFFER_BINDING=rt.COPY_READ_BUFFER_BINDING]="COPY_READ_BUFFER_BINDING",t[t.COPY_WRITE_BUFFER_BINDING=rt.COPY_WRITE_BUFFER_BINDING]="COPY_WRITE_BUFFER_BINDING",t[t.DRAW_FRAMEBUFFER_BINDING=rt.DRAW_FRAMEBUFFER_BINDING]="DRAW_FRAMEBUFFER_BINDING",t[t.FRAGMENT_SHADER_DERIVATIVE_HINT=rt.FRAGMENT_SHADER_DERIVATIVE_HINT]="FRAGMENT_SHADER_DERIVATIVE_HINT",t[t.MAX_3D_TEXTURE_SIZE=rt.MAX_3D_TEXTURE_SIZE]="MAX_3D_TEXTURE_SIZE",t[t.MAX_ARRAY_TEXTURE_LAYERS=rt.MAX_ARRAY_TEXTURE_LAYERS]="MAX_ARRAY_TEXTURE_LAYERS",t[t.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=rt.MAX_CLIENT_WAIT_TIMEOUT_WEBGL]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",t[t.MAX_COLOR_ATTACHMENTS=rt.MAX_COLOR_ATTACHMENTS]="MAX_COLOR_ATTACHMENTS",t[t.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=rt.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",t[t.MAX_COMBINED_UNIFORM_BLOCKS=rt.MAX_COMBINED_UNIFORM_BLOCKS]="MAX_COMBINED_UNIFORM_BLOCKS",t[t.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=rt.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",t[t.MAX_DRAW_BUFFERS=rt.MAX_DRAW_BUFFERS]="MAX_DRAW_BUFFERS",t[t.MAX_ELEMENT_INDEX=rt.MAX_ELEMENT_INDEX]="MAX_ELEMENT_INDEX",t[t.MAX_ELEMENTS_INDICES=rt.MAX_ELEMENTS_INDICES]="MAX_ELEMENTS_INDICES",t[t.MAX_ELEMENTS_VERTICES=rt.MAX_ELEMENTS_VERTICES]="MAX_ELEMENTS_VERTICES",t[t.MAX_FRAGMENT_INPUT_COMPONENTS=rt.MAX_FRAGMENT_INPUT_COMPONENTS]="MAX_FRAGMENT_INPUT_COMPONENTS",t[t.MAX_FRAGMENT_UNIFORM_BLOCKS=rt.MAX_FRAGMENT_UNIFORM_BLOCKS]="MAX_FRAGMENT_UNIFORM_BLOCKS",t[t.MAX_FRAGMENT_UNIFORM_COMPONENTS=rt.MAX_FRAGMENT_UNIFORM_COMPONENTS]="MAX_FRAGMENT_UNIFORM_COMPONENTS",t[t.MAX_PROGRAM_TEXEL_OFFSET=rt.MAX_PROGRAM_TEXEL_OFFSET]="MAX_PROGRAM_TEXEL_OFFSET",t[t.MAX_SAMPLES=rt.MAX_SAMPLES]="MAX_SAMPLES",t[t.MAX_SERVER_WAIT_TIMEOUT=rt.MAX_SERVER_WAIT_TIMEOUT]="MAX_SERVER_WAIT_TIMEOUT",t[t.MAX_TEXTURE_LOD_BIAS=rt.MAX_TEXTURE_LOD_BIAS]="MAX_TEXTURE_LOD_BIAS",t[t.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=rt.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=rt.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=rt.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",t[t.MAX_UNIFORM_BLOCK_SIZE=rt.MAX_UNIFORM_BLOCK_SIZE]="MAX_UNIFORM_BLOCK_SIZE",t[t.MAX_UNIFORM_BUFFER_BINDINGS=rt.MAX_UNIFORM_BUFFER_BINDINGS]="MAX_UNIFORM_BUFFER_BINDINGS",t[t.MAX_VARYING_COMPONENTS=rt.MAX_VARYING_COMPONENTS]="MAX_VARYING_COMPONENTS",t[t.MAX_VERTEX_OUTPUT_COMPONENTS=rt.MAX_VERTEX_OUTPUT_COMPONENTS]="MAX_VERTEX_OUTPUT_COMPONENTS",t[t.MAX_VERTEX_UNIFORM_BLOCKS=rt.MAX_VERTEX_UNIFORM_BLOCKS]="MAX_VERTEX_UNIFORM_BLOCKS",t[t.MAX_VERTEX_UNIFORM_COMPONENTS=rt.MAX_VERTEX_UNIFORM_COMPONENTS]="MAX_VERTEX_UNIFORM_COMPONENTS",t[t.MIN_PROGRAM_TEXEL_OFFSET=rt.MIN_PROGRAM_TEXEL_OFFSET]="MIN_PROGRAM_TEXEL_OFFSET",t[t.PACK_ROW_LENGTH=rt.PACK_ROW_LENGTH]="PACK_ROW_LENGTH",t[t.PACK_SKIP_PIXELS=rt.PACK_SKIP_PIXELS]="PACK_SKIP_PIXELS",t[t.PACK_SKIP_ROWS=rt.PACK_SKIP_ROWS]="PACK_SKIP_ROWS",t[t.PIXEL_PACK_BUFFER_BINDING=rt.PIXEL_PACK_BUFFER_BINDING]="PIXEL_PACK_BUFFER_BINDING",t[t.PIXEL_UNPACK_BUFFER_BINDING=rt.PIXEL_UNPACK_BUFFER_BINDING]="PIXEL_UNPACK_BUFFER_BINDING",t[t.RASTERIZER_DISCARD=rt.RASTERIZER_DISCARD]="RASTERIZER_DISCARD",t[t.READ_BUFFER=rt.READ_BUFFER]="READ_BUFFER",t[t.READ_FRAMEBUFFER_BINDING=rt.READ_FRAMEBUFFER_BINDING]="READ_FRAMEBUFFER_BINDING",t[t.SAMPLE_ALPHA_TO_COVERAGE=rt.SAMPLE_ALPHA_TO_COVERAGE]="SAMPLE_ALPHA_TO_COVERAGE",t[t.SAMPLE_COVERAGE=rt.SAMPLE_COVERAGE]="SAMPLE_COVERAGE",t[t.SAMPLER_BINDING=rt.SAMPLER_BINDING]="SAMPLER_BINDING",t[t.TEXTURE_BINDING_2D_ARRAY=rt.TEXTURE_BINDING_2D_ARRAY]="TEXTURE_BINDING_2D_ARRAY",t[t.TEXTURE_BINDING_3D=rt.TEXTURE_BINDING_3D]="TEXTURE_BINDING_3D",t[t.TRANSFORM_FEEDBACK_ACTIVE=rt.TRANSFORM_FEEDBACK_ACTIVE]="TRANSFORM_FEEDBACK_ACTIVE",t[t.TRANSFORM_FEEDBACK_BINDING=rt.TRANSFORM_FEEDBACK_BINDING]="TRANSFORM_FEEDBACK_BINDING",t[t.TRANSFORM_FEEDBACK_BUFFER_BINDING=rt.TRANSFORM_FEEDBACK_BUFFER_BINDING]="TRANSFORM_FEEDBACK_BUFFER_BINDING",t[t.TRANSFORM_FEEDBACK_PAUSED=rt.TRANSFORM_FEEDBACK_PAUSED]="TRANSFORM_FEEDBACK_PAUSED",t[t.UNIFORM_BUFFER_BINDING=rt.UNIFORM_BUFFER_BINDING]="UNIFORM_BUFFER_BINDING",t[t.UNIFORM_BUFFER_OFFSET_ALIGNMENT=rt.UNIFORM_BUFFER_OFFSET_ALIGNMENT]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",t[t.UNPACK_IMAGE_HEIGHT=rt.UNPACK_IMAGE_HEIGHT]="UNPACK_IMAGE_HEIGHT",t[t.UNPACK_ROW_LENGTH=rt.UNPACK_ROW_LENGTH]="UNPACK_ROW_LENGTH",t[t.UNPACK_SKIP_IMAGES=rt.UNPACK_SKIP_IMAGES]="UNPACK_SKIP_IMAGES",t[t.UNPACK_SKIP_PIXELS=rt.UNPACK_SKIP_PIXELS]="UNPACK_SKIP_PIXELS",t[t.UNPACK_SKIP_ROWS=rt.UNPACK_SKIP_ROWS]="UNPACK_SKIP_ROWS",t[t.VERTEX_ARRAY_BINDING=rt.VERTEX_ARRAY_BINDING]="VERTEX_ARRAY_BINDING"}(Ot||(Ot={})),function(t){t[t.ALPHA=rt.ALPHA]="ALPHA",t[t.LUMINANCE=rt.LUMINANCE]="LUMINANCE",t[t.LUMINANCE_ALPHA=rt.LUMINANCE_ALPHA]="LUMINANCE_ALPHA",t[t.RGB=rt.RGB]="RGB",t[t.RGBA=rt.RGBA]="RGBA",t[t.RGBA4=rt.RGBA4]="RGBA4",t[t.RGB565=rt.RGB565]="RGB565",t[t.RGB5_A1=rt.RGB5_A1]="RGB5_A1",t[t.DEPTH_COMPONENT=rt.DEPTH_COMPONENT]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=rt.DEPTH_STENCIL]="DEPTH_STENCIL",t[t.STENCIL_INDEX8=rt.STENCIL_INDEX8]="STENCIL_INDEX8",t[t.R8=rt.R8]="R8",t[t.R8UI=rt.R8UI]="R8UI",t[t.R8I=rt.R8I]="R8I",t[t.R16UI=rt.R16UI]="R16UI",t[t.R16I=rt.R16I]="R16I",t[t.R32UI=rt.R32UI]="R32UI",t[t.R32I=rt.R32I]="R32I",t[t.RG8=rt.RG8]="RG8",t[t.RG8UI=rt.RG8UI]="RG8UI",t[t.RG8I=rt.RG8I]="RG8I",t[t.RG16UI=rt.RG16UI]="RG16UI",t[t.RG16I=rt.RG16I]="RG16I",t[t.RG32UI=rt.RG32UI]="RG32UI",t[t.RG32I=rt.RG32I]="RG32I",t[t.RGB8=rt.RGB8]="RGB8",t[t.RGBA8=rt.RGBA8]="RGBA8",t[t.SRGB8_ALPHA8=rt.SRGB8_ALPHA8]="SRGB8_ALPHA8",t[t.RGB10_A2=rt.RGB10_A2]="RGB10_A2",t[t.RGBA8UI=rt.RGBA8UI]="RGBA8UI",t[t.RGBA8I=rt.RGBA8I]="RGBA8I",t[t.RGB10_A2UI=rt.RGB10_A2UI]="RGB10_A2UI",t[t.RGBA16UI=rt.RGBA16UI]="RGBA16UI",t[t.RGBA16I=rt.RGBA16I]="RGBA16I",t[t.RGBA32I=rt.RGBA32I]="RGBA32I",t[t.RGBA32UI=rt.RGBA32UI]="RGBA32UI",t[t.DEPTH_COMPONENT24=rt.DEPTH_COMPONENT24]="DEPTH_COMPONENT24",t[t.DEPTH_COMPONENT32F=rt.DEPTH_COMPONENT32F]="DEPTH_COMPONENT32F",t[t.DEPTH24_STENCIL8=rt.DEPTH24_STENCIL8]="DEPTH24_STENCIL8",t[t.DEPTH32F_STENCIL8=rt.DEPTH32F_STENCIL8]="DEPTH32F_STENCIL8"}(Ct||(Ct={})),function(t){t[t.UNPACK_FLIP_Y_WEBGL=rt.UNPACK_FLIP_Y_WEBGL]="UNPACK_FLIP_Y_WEBGL",t[t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=rt.UNPACK_PREMULTIPLY_ALPHA_WEBGL]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t.UNPACK_COLORSPACE_CONVERSION_WEBGL=rt.UNPACK_COLORSPACE_CONVERSION_WEBGL]="UNPACK_COLORSPACE_CONVERSION_WEBGL"}(Lt||(Lt={})),function(t){t[t.BYTE=rt.BYTE]="BYTE",t[t.FLOAT=rt.FLOAT]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=rt.FLOAT_32_UNSIGNED_INT_24_8_REV]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=rt.HALF_FLOAT]="HALF_FLOAT",t[t.INT=rt.INT]="INT",t[t.SHORT=rt.SHORT]="SHORT",t[t.UNSIGNED_BYTE=rt.UNSIGNED_BYTE]="UNSIGNED_BYTE",t[t.UNSIGNED_INT=rt.UNSIGNED_INT]="UNSIGNED_INT",t[t.UNSIGNED_INT_2_10_10_10_REV=rt.UNSIGNED_INT_2_10_10_10_REV]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_10F_11F_11F_REV=rt.UNSIGNED_INT_10F_11F_11F_REV]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_5_9_9_9_REV=rt.UNSIGNED_INT_5_9_9_9_REV]="UNSIGNED_INT_5_9_9_9_REV",t[t.UNSIGNED_INT_24_8=rt.UNSIGNED_INT_24_8]="UNSIGNED_INT_24_8",t[t.UNSIGNED_SHORT=rt.UNSIGNED_SHORT]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=rt.UNSIGNED_SHORT_5_6_5]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=rt.UNSIGNED_SHORT_4_4_4_4]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=rt.UNSIGNED_SHORT_5_5_5_1]="UNSIGNED_SHORT_5_5_5_1"}(Ut||(Ut={})),function(t){t[t.RENDERBUFFER=rt.RENDERBUFFER]="RENDERBUFFER"}(Pt||(Pt={})),function(t){t[t.FRAGMENT_SHADER=rt.FRAGMENT_SHADER]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=rt.VERTEX_SHADER]="VERTEX_SHADER",t[t.COMPILE_STATUS=rt.COMPILE_STATUS]="COMPILE_STATUS",t[t.DELETE_STATUS=rt.DELETE_STATUS]="DELETE_STATUS",t[t.LINK_STATUS=rt.LINK_STATUS]="LINK_STATUS",t[t.VALIDATE_STATUS=rt.VALIDATE_STATUS]="VALIDATE_STATUS",t[t.ATTACHED_SHADERS=rt.ATTACHED_SHADERS]="ATTACHED_SHADERS",t[t.ACTIVE_ATTRIBUTES=rt.ACTIVE_ATTRIBUTES]="ACTIVE_ATTRIBUTES",t[t.ACTIVE_UNIFORMS=rt.ACTIVE_UNIFORMS]="ACTIVE_UNIFORMS",t[t.MAX_VERTEX_ATTRIBS=rt.MAX_VERTEX_ATTRIBS]="MAX_VERTEX_ATTRIBS",t[t.MAX_VERTEX_UNIFORM_VECTORS=rt.MAX_VERTEX_UNIFORM_VECTORS]="MAX_VERTEX_UNIFORM_VECTORS",t[t.MAX_VARYING_VECTORS=rt.MAX_VARYING_VECTORS]="MAX_VARYING_VECTORS",t[t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=rt.MAX_COMBINED_TEXTURE_IMAGE_UNITS]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=rt.MAX_VERTEX_TEXTURE_IMAGE_UNITS]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",t[t.MAX_TEXTURE_IMAGE_UNITS=rt.MAX_TEXTURE_IMAGE_UNITS]="MAX_TEXTURE_IMAGE_UNITS",t[t.MAX_FRAGMENT_UNIFORM_VECTORS=rt.MAX_FRAGMENT_UNIFORM_VECTORS]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t.SHADER_TYPE=rt.SHADER_TYPE]="SHADER_TYPE",t[t.SHADING_LANGUAGE_VERSION=rt.SHADING_LANGUAGE_VERSION]="SHADING_LANGUAGE_VERSION",t[t.CURRENT_PROGRAM=rt.CURRENT_PROGRAM]="CURRENT_PROGRAM"}(Bt||(Bt={})),function(t){t[t.FRAGMENT_SHADER=rt.FRAGMENT_SHADER]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=rt.VERTEX_SHADER]="VERTEX_SHADER"}(dt||(dt={})),function(t){t[t.LOW_FLOAT=rt.LOW_FLOAT]="LOW_FLOAT",t[t.MEDIUM_FLOAT=rt.MEDIUM_FLOAT]="MEDIUM_FLOAT",t[t.HIGH_FLOAT=rt.HIGH_FLOAT]="HIGH_FLOAT",t[t.LOW_INT=rt.LOW_INT]="LOW_INT",t[t.MEDIUM_INT=rt.MEDIUM_INT]="MEDIUM_INT",t[t.HIGH_INT=rt.HIGH_INT]="HIGH_INT"}(mt||(mt={})),function(t){t[t.KEEP=rt.KEEP]="KEEP",t[t.REPLACE=rt.REPLACE]="REPLACE",t[t.INCR=rt.INCR]="INCR",t[t.DECR=rt.DECR]="DECR",t[t.INVERT=rt.INVERT]="INVERT",t[t.INCR_WRAP=rt.INCR_WRAP]="INCR_WRAP",t[t.DECR_WRAP=rt.DECR_WRAP]="DECR_WRAP"}(ft||(ft={})),function(t){t[t.NEVER=rt.NEVER]="NEVER",t[t.LESS=rt.LESS]="LESS",t[t.EQUAL=rt.EQUAL]="EQUAL",t[t.LEQUAL=rt.LEQUAL]="LEQUAL",t[t.GREATER=rt.GREATER]="GREATER",t[t.NOTEQUAL=rt.NOTEQUAL]="NOTEQUAL",t[t.GEQUAL=rt.GEQUAL]="GEQUAL",t[t.ALWAYS=rt.ALWAYS]="ALWAYS"}(Dt||(Dt={})),function(t){t[t.TEXTURE=rt.TEXTURE]="TEXTURE",t[t.TEXTURE0=rt.TEXTURE0]="TEXTURE0"}(gt||(gt={})),function(t){t[t.TEXTURE_MAG_FILTER=rt.TEXTURE_MAG_FILTER]="TEXTURE_MAG_FILTER",t[t.TEXTURE_MIN_FILTER=rt.TEXTURE_MIN_FILTER]="TEXTURE_MIN_FILTER",t[t.TEXTURE_WRAP_S=rt.TEXTURE_WRAP_S]="TEXTURE_WRAP_S",t[t.TEXTURE_WRAP_T=rt.TEXTURE_WRAP_T]="TEXTURE_WRAP_T",t[t.TEXTURE_BASE_LEVEL=rt.TEXTURE_BASE_LEVEL]="TEXTURE_BASE_LEVEL",t[t.TEXTURE_MAX_LEVEL=rt.TEXTURE_MAX_LEVEL]="TEXTURE_MAX_LEVEL",t[t.TEXTURE_MAX_LOD=rt.TEXTURE_MAX_LOD]="TEXTURE_MAX_LOD",t[t.TEXTURE_MIN_LOD=rt.TEXTURE_MIN_LOD]="TEXTURE_MIN_LOD",t[t.TEXTURE_WRAP_R=rt.TEXTURE_WRAP_R]="TEXTURE_WRAP_R"}(pt||(pt={})),function(t){t[t.TEXTURE_2D=rt.TEXTURE_2D]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=rt.TEXTURE_CUBE_MAP]="TEXTURE_CUBE_MAP",t[t.TEXTURE_3D=rt.TEXTURE_3D]="TEXTURE_3D",t[t.TEXTURE_2D_ARRAY=rt.TEXTURE_2D_ARRAY]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=rt.TEXTURE_CUBE_MAP_POSITIVE_X]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=rt.TEXTURE_CUBE_MAP_NEGATIVE_X]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=rt.TEXTURE_CUBE_MAP_POSITIVE_Y]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=rt.TEXTURE_CUBE_MAP_NEGATIVE_Y]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=rt.TEXTURE_CUBE_MAP_POSITIVE_Z]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=rt.TEXTURE_CUBE_MAP_NEGATIVE_Z]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(Gt||(Gt={})),function(t){t[t.LINEAR=rt.LINEAR]="LINEAR",t[t.NEAREST=rt.NEAREST]="NEAREST"}(xt||(xt={})),function(t){t[t.LINEAR=rt.LINEAR]="LINEAR",t[t.NEAREST=rt.NEAREST]="NEAREST",t[t.NEAREST_MIPMAP_NEAREST=rt.NEAREST_MIPMAP_NEAREST]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=rt.LINEAR_MIPMAP_NEAREST]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=rt.NEAREST_MIPMAP_LINEAR]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=rt.LINEAR_MIPMAP_LINEAR]="LINEAR_MIPMAP_LINEAR"}(bt||(bt={})),function(t){t[t.REPEAT=rt.REPEAT]="REPEAT",t[t.CLAMP_TO_EDGE=rt.CLAMP_TO_EDGE]="CLAMP_TO_EDGE",t[t.MIRRORED_REPEAT=rt.MIRRORED_REPEAT]="MIRRORED_REPEAT"}(Xt||(Xt={})),function(t){t[t.UNIFORM_TYPE=rt.UNIFORM_TYPE]="UNIFORM_TYPE",t[t.UNIFORM_SIZE=rt.UNIFORM_SIZE]="UNIFORM_SIZE",t[t.UNIFORM_BLOCK_INDEX=rt.UNIFORM_BLOCK_INDEX]="UNIFORM_BLOCK_INDEX",t[t.UNIFORM_OFFSET=rt.UNIFORM_OFFSET]="UNIFORM_OFFSET",t[t.UNIFORM_ARRAY_STRIDE=rt.UNIFORM_ARRAY_STRIDE]="UNIFORM_ARRAY_STRIDE",t[t.UNIFORM_MATRIX_STRIDE=rt.UNIFORM_MATRIX_STRIDE]="UNIFORM_MATRIX_STRIDE",t[t.UNIFORM_IS_ROW_MAJOR=rt.UNIFORM_IS_ROW_MAJOR]="UNIFORM_IS_ROW_MAJOR"}(wt||(wt={})),function(t){t[t.BOOL=rt.BOOL]="BOOL",t[t.BOOL_VEC2=rt.BOOL_VEC2]="BOOL_VEC2",t[t.BOOL_VEC3=rt.BOOL_VEC3]="BOOL_VEC3",t[t.BOOL_VEC4=rt.BOOL_VEC4]="BOOL_VEC4",t[t.INT=rt.INT]="INT",t[t.INT_VEC2=rt.INT_VEC2]="INT_VEC2",t[t.INT_VEC3=rt.INT_VEC3]="INT_VEC3",t[t.INT_VEC4=rt.INT_VEC4]="INT_VEC4",t[t.INT_SAMPLER_2D=rt.INT_SAMPLER_2D]="INT_SAMPLER_2D",t[t.INT_SAMPLER_3D=rt.INT_SAMPLER_3D]="INT_SAMPLER_3D",t[t.INT_SAMPLER_CUBE=rt.INT_SAMPLER_CUBE]="INT_SAMPLER_CUBE",t[t.INT_SAMPLER_2D_ARRAY=rt.INT_SAMPLER_2D_ARRAY]="INT_SAMPLER_2D_ARRAY",t[t.UNSIGNED_INT_SAMPLER_2D=rt.UNSIGNED_INT_SAMPLER_2D]="UNSIGNED_INT_SAMPLER_2D",t[t.UNSIGNED_INT_SAMPLER_3D=rt.UNSIGNED_INT_SAMPLER_3D]="UNSIGNED_INT_SAMPLER_3D",t[t.UNSIGNED_INT_SAMPLER_CUBE=rt.UNSIGNED_INT_SAMPLER_CUBE]="UNSIGNED_INT_SAMPLER_CUBE",t[t.UNSIGNED_INT_SAMPLER_2D_ARRAY=rt.UNSIGNED_INT_SAMPLER_2D_ARRAY]="UNSIGNED_INT_SAMPLER_2D_ARRAY",t[t.UNSIGNED_INT=rt.UNSIGNED_INT]="UNSIGNED_INT",t[t.UNSIGNED_INT_VEC2=rt.UNSIGNED_INT_VEC2]="UNSIGNED_INT_VEC2",t[t.UNSIGNED_INT_VEC3=rt.UNSIGNED_INT_VEC3]="UNSIGNED_INT_VEC3",t[t.UNSIGNED_INT_VEC4=rt.UNSIGNED_INT_VEC4]="UNSIGNED_INT_VEC4",t[t.FLOAT=rt.FLOAT]="FLOAT",t[t.FLOAT_VEC2=rt.FLOAT_VEC2]="FLOAT_VEC2",t[t.FLOAT_VEC3=rt.FLOAT_VEC3]="FLOAT_VEC3",t[t.FLOAT_VEC4=rt.FLOAT_VEC4]="FLOAT_VEC4",t[t.FLOAT_MAT2=rt.FLOAT_MAT2]="FLOAT_MAT2",t[t.FLOAT_MAT3=rt.FLOAT_MAT3]="FLOAT_MAT3",t[t.FLOAT_MAT4=rt.FLOAT_MAT4]="FLOAT_MAT4",t[t.FLOAT_MAT2x3=rt.FLOAT_MAT2x3]="FLOAT_MAT2x3",t[t.FLOAT_MAT2x4=rt.FLOAT_MAT2x4]="FLOAT_MAT2x4",t[t.FLOAT_MAT3x2=rt.FLOAT_MAT3x2]="FLOAT_MAT3x2",t[t.FLOAT_MAT3x4=rt.FLOAT_MAT3x4]="FLOAT_MAT3x4",t[t.FLOAT_MAT4x2=rt.FLOAT_MAT4x2]="FLOAT_MAT4x2",t[t.FLOAT_MAT4x3=rt.FLOAT_MAT4x3]="FLOAT_MAT4x3",t[t.SAMPLER_2D=rt.SAMPLER_2D]="SAMPLER_2D",t[t.SAMPLER_3D=rt.SAMPLER_3D]="SAMPLER_3D",t[t.SAMPLER_CUBE=rt.SAMPLER_CUBE]="SAMPLER_CUBE",t[t.SAMPLER_2D_SHADOW=rt.SAMPLER_2D_SHADOW]="SAMPLER_2D_SHADOW",t[t.SAMPLER_2D_ARRAY=rt.SAMPLER_2D_ARRAY]="SAMPLER_2D_ARRAY",t[t.SAMPLER_2D_ARRAY_SHADOW=rt.SAMPLER_2D_ARRAY_SHADOW]="SAMPLER_2D_ARRAY_SHADOW",t[t.SAMPLER_CUBE_SHADOW=rt.SAMPLER_CUBE_SHADOW]="SAMPLER_CUBE_SHADOW"}(Vt||(Vt={})),function(t){t[t.CURRENT_VERTEX_ATTRIB=rt.CURRENT_VERTEX_ATTRIB]="CURRENT_VERTEX_ATTRIB",t[t.VERTEX_ATTRIB_ARRAY_ENABLED=rt.VERTEX_ATTRIB_ARRAY_ENABLED]="VERTEX_ATTRIB_ARRAY_ENABLED",t[t.VERTEX_ATTRIB_ARRAY_SIZE=rt.VERTEX_ATTRIB_ARRAY_SIZE]="VERTEX_ATTRIB_ARRAY_SIZE",t[t.VERTEX_ATTRIB_ARRAY_STRIDE=rt.VERTEX_ATTRIB_ARRAY_STRIDE]="VERTEX_ATTRIB_ARRAY_STRIDE",t[t.VERTEX_ATTRIB_ARRAY_TYPE=rt.VERTEX_ATTRIB_ARRAY_TYPE]="VERTEX_ATTRIB_ARRAY_TYPE",t[t.VERTEX_ATTRIB_ARRAY_NORMALIZED=rt.VERTEX_ATTRIB_ARRAY_NORMALIZED]="VERTEX_ATTRIB_ARRAY_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_POINTER=rt.VERTEX_ATTRIB_ARRAY_POINTER]="VERTEX_ATTRIB_ARRAY_POINTER",t[t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=rt.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING"}(Ht||(Ht={}));class vt{constructor(){}static createFramebuffer(t){const r=t.createFramebuffer();return null===r?(console.error("Could not create WebGLFramebuffer."),null):{glFb:r}}static attachTexture(t,r,e){const s=lt.FRAMEBUFFER;return t.bindFramebuffer(s,r.glFb),t.framebufferTexture2D(s,e.attachment,e.texTarget,e.glTex,0),t.bindFramebuffer(s,null),{...e,...r}}static attachTextures(t,r,e){const s=t.FRAMEBUFFER;t.bindFramebuffer(s,r.glFb);const _=e.map((e=>(t.framebufferTexture2D(s,e.attachment,e.texTarget,e.glTex,0),{...e,...r})));return t.bindFramebuffer(s,null),_}static attachRenderbuffers(t,r,e){const s=t.FRAMEBUFFER;t.bindFramebuffer(s,r.glFb);const _=e.map((e=>(t.framebufferRenderbuffer(s,e.attachment,t.RENDERBUFFER,e.glRb),{...e,...r})));return t.bindFramebuffer(s,null),_}static attachRenderbuffer(t,r,e){const s=t.FRAMEBUFFER;return t.bindFramebuffer(s,r.glFb),t.framebufferRenderbuffer(s,e.attachment,t.RENDERBUFFER,e.glRb),t.bindFramebuffer(s,null),{...e,...r}}static blit(t,r,e,s,_,a,i){t.bindFramebuffer(t.READ_FRAMEBUFFER,null!==r?r.glFb:null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null!==e?e.glFb:null),t.blitFramebuffer(s[0],s[1],s[2],s[3],_[0],_[1],_[2],_[3],a,i),t.bindFramebuffer(t.FRAMEBUFFER,null)}static clearColor(t,r,e,s=0){t.bindFramebuffer(t.DRAW_FRAMEBUFFER,r.glFb),t.clearBufferfv(t.COLOR,0,e,s)}static clearDepthStencil(t,r,e,s){t.bindFramebuffer(t.DRAW_FRAMEBUFFER,r.glFb),t.clearBufferfi(t.DEPTH_STENCIL,0,e,s)}static checkFramebufferStatus(t){return t.checkFramebufferStatus(t.FRAMEBUFFER)}static deleteFramebuffer(t,r){const e=r.glFb;t.isFramebuffer(e)&&t.deleteFramebuffer(e)}static bindFramebuffer(t,r){t.bindFramebuffer(t.FRAMEBUFFER,r.glFb)}static unbindFramebuffer(t){t.bindFramebuffer(t.FRAMEBUFFER,null)}}class Yt{static createBuffer(t){const r=t.createBuffer();return null==r&&console.error("Could not create WebGLBuffer."),r}}class Kt{static getAttributesListSetter(t,r,e){const s=class{constructor(){}static createVertexArray(t){const r=t.createVertexArray();return null===r&&console.error("Could not create WebGLVertexArrayObject."),r}}.createVertexArray(t);if(null===s)return null;const _=Yt.createBuffer(t);if(null===_)return null;const a=Yt.createBuffer(t);if(null===a)return null;const i=e.list,n=e.props,E=(null==n?void 0:n.instanced)||!1,o=(null==n?void 0:n.divisor)||1,A=(null==n?void 0:n.target)||At.ARRAY_BUFFER,T=(null==n?void 0:n.usage)||it.STATIC_DRAW,R=Object.keys(i),h=R.map((t=>i[t])),c=void 0!==e.indices?e.indices.length:this.getAttributesListNumElements(e),u=void 0!==e.indices?this.getAttributeIndicesBufferType(e.indices):Et.UNSIGNED_SHORT,N={setters:{}};let I=0;h.forEach((t=>{I+=t.array.byteLength+(32-t.array.byteLength%32)%32}));let l=0;t.bindVertexArray(s),t.bindBuffer(A,_),t.bufferData(A,I,T);for(const e of R){const s=i[e],_=s.props,a=t.getAttribLocation(r,e);if(-1==a){console.warn(`Attribute ${e} could not be located.`);continue}t.enableVertexAttribArray(a);const n=this.getAttributeArrayDataType(s.array),A=void 0!==_.normalized&&_.normalized;t.vertexAttribPointer(a,_.numComponents,n,A,0,l),E&&t.vertexAttribDivisor(a,o),N.setters[e]={location:a,bufferBytesOffset:l},l+=s.array.byteLength+(32-s.array.byteLength%32)%32}let y=!1;return void 0!==e.indices&&(y=!0,t.bindBuffer(At.ELEMENT_ARRAY_BUFFER,a),t.bufferData(At.ELEMENT_ARRAY_BUFFER,e.indices.byteLength,it.STATIC_READ)),t.bindVertexArray(null),N.glBuffer=_,N.glIndicesBuffer=a,N.glProg=r,N.glVao=s,N.props={instanced:E,divisor:o,target:A,usage:T},N.bufferByteLength=I,N.numElements=c,N.indexType=u,N.hasIndices=y,N}static setAttributesListValues(t,r,e){const s=e.list;t.bindVertexArray(r.glVao),t.bindBuffer(r.props.target,r.glBuffer),Object.keys(s).forEach((e=>{const _=s[e],a=r.setters[e],i=void 0===_.props.srcOffset?0:_.props.srcOffset,n=void 0===_.props.srcLength?_.array.length:_.props.srcLength;void 0!==a?t.bufferSubData(r.props.target,a.bufferBytesOffset,_.array,i,n):console.warn(`Attribute ${e} does not exist in the setters.`)})),void 0!==e.indices&&(t.bindBuffer(At.ELEMENT_ARRAY_BUFFER,r.glIndicesBuffer),t.bufferSubData(At.ELEMENT_ARRAY_BUFFER,0,e.indices)),t.bindVertexArray(null)}static bindAttributesList(t,r){t.bindVertexArray(r.glVao)}static unbindAttributesList(t){t.bindVertexArray(null)}static getAttributeArrayDataType(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint32Array?ct.FLOAT:t instanceof Int16Array?ct.SHORT:t instanceof Uint16Array?ct.UNSIGNED_SHORT:t instanceof Int8Array?ct.BYTE:t instanceof Uint8Array?ct.UNSIGNED_BYTE:(console.error(`Unsupported attribute array ${t.constructor.name}.`),-1)}static getDataTypeByteLength(t){switch(t){case ct.FLOAT:return 4;case ct.SHORT:case ct.UNSIGNED_SHORT:return 2;case ct.BYTE:case ct.UNSIGNED_BYTE:return 1}return console.error(`Unsupported data type ${ct[t]}.`),-1}static getAttributeIndicesBufferType(t){return t instanceof Uint8Array?Et.UNSIGNED_BYTE:t instanceof Uint16Array?Et.UNSIGNED_SHORT:Et.UNSIGNED_INT}static getAttributesListNumElements(t){const r=t.list,e=Object.keys(r);let s=0;for(const t of e){const e=r[t];0==s?s=Math.floor(e.array.length/e.props.numComponents):Math.floor(e.array.length/e.props.numComponents)!==s&&console.error(`Attribute ${t} should have ${s} elements.`)}return s}}class Wt{constructor(){}static createBindingsContext(t){const r=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{maxTextureUnits:r,registeredTextureUnits:new Array(r)}}static createTexture(t,r,e){const s=t.createTexture();if(null===s)return console.error("Could not create WebGLTexture."),null;const _=this._allocateTextureUnit(r);if(_<0)return console.error("Could not allocate another texture unit."),null;const a={...e,unit:_,glTex:s};return this.setTexture(t,a),a}static deleteTexture(t,r,e){t.deleteTexture(e.glTex),this._freeTextureUnit(r,e.unit)}static setTexture(t,r){t.activeTexture(gt.TEXTURE0+r.unit),t.bindTexture(r.target,r.glTex),this.setTextureParameters(t,r);const e=r.pixels,s=r.internalFormat||r.format;null==e?t.texImage2D(r.target,r.lod,s,r.width,r.height,0,r.format,r.type,null):("xPos"in e?(t.texImage2D(Gt.TEXTURE_CUBE_MAP_POSITIVE_X,r.lod,s,r.width,r.height,0,r.format,r.type,e.xPos),t.texImage2D(Gt.TEXTURE_CUBE_MAP_NEGATIVE_X,r.lod,s,r.width,r.height,0,r.format,r.type,e.xNeg),t.texImage2D(Gt.TEXTURE_CUBE_MAP_POSITIVE_Y,r.lod,s,r.width,r.height,0,r.format,r.type,e.yPos),t.texImage2D(Gt.TEXTURE_CUBE_MAP_NEGATIVE_Y,r.lod,s,r.width,r.height,0,r.format,r.type,e.yNeg),t.texImage2D(Gt.TEXTURE_CUBE_MAP_POSITIVE_Z,r.lod,s,r.width,r.height,0,r.format,r.type,e.zPos),t.texImage2D(Gt.TEXTURE_CUBE_MAP_NEGATIVE_Z,r.lod,s,r.width,r.height,0,r.format,r.type,e.zNeg)):void 0!==r.subimage?(t.texImage2D(r.target,r.lod,s,r.width,r.height,0,r.format,r.type,r.pixels),t.texSubImage2D(r.target,r.lod,r.subimage.xoffset,r.subimage.yoffset,r.subimage.width,r.subimage.height,r.format,r.type,r.pixels)):t.texImage2D(r.target,r.lod,s,r.width,r.height,0,r.format,r.type,r.pixels),t.generateMipmap(r.target))}static setTextureParameters(t,r){t.activeTexture(gt.TEXTURE0+r.unit),t.bindTexture(r.target,r.glTex),void 0!==r.min&&t.texParameteri(r.target,pt.TEXTURE_MIN_FILTER,r.min),void 0!==r.mag&&t.texParameteri(r.target,pt.TEXTURE_MAG_FILTER,r.mag),void 0!==r.wrapS&&t.texParameteri(r.target,pt.TEXTURE_WRAP_S,r.wrapS),void 0!==r.wrapT&&t.texParameteri(r.target,pt.TEXTURE_WRAP_T,r.wrapT),void 0!==r.wrapR&&t.texParameteri(r.target,pt.TEXTURE_WRAP_R,r.wrapR),void 0!==r.baseLod&&t.texParameteri(r.target,pt.TEXTURE_BASE_LEVEL,r.baseLod),void 0!==r.maxLod&&t.texParameteri(r.target,pt.TEXTURE_MAX_LEVEL,r.maxLod)}static bindTexture(t,r){t.bindTexture(r.target,r.glTex)}static guessTextureProperties(t){void 0===t.target&&(t.target=Gt.TEXTURE_2D),void 0===t.format&&(t.format=Ct.RGBA),void 0===t.type&&(t.type=Ut.UNSIGNED_BYTE),void 0===t.lod&&(t.lod=0),void 0===t.pixels&&(t.pixels=null);const r=t.pixels;if(null!==r)if("xPos"in r)t.target=Gt.TEXTURE_CUBE_MAP,t.width=r.xPos.width,t.height=r.xPos.height;else if(t.target=Gt.TEXTURE_2D,"width"in r)t.width=r.width,t.height=r.height;else{let e=0;r instanceof Uint8Array||Array.isArray(r)?(t.type=Ut.UNSIGNED_BYTE,e=r.length):r instanceof Uint16Array?(t.type=Ut.UNSIGNED_SHORT_4_4_4_4,e=r.length):r instanceof Uint32Array?(t.type=Ut.UNSIGNED_INT,e=r.length):r instanceof Float32Array&&(t.type=Ut.FLOAT,e=r.length);const s=e/this.getNumChannelsFromPixelFormat(t.format),_=Math.sqrt(s);t.width=_,t.height=_}return t}static getNumBytesFromPixelTypeAndFormat(t,r){switch(r){case Ct.LUMINANCE:case Ct.ALPHA:return 1;case Ct.LUMINANCE_ALPHA:return 2;case Ct.RGB:switch(t){case Ut.UNSIGNED_BYTE:return 3;case Ut.UNSIGNED_SHORT_5_6_5:return 2}case Ct.RGBA:switch(t){case Ut.UNSIGNED_BYTE:return 4;case Ut.UNSIGNED_SHORT_4_4_4_4:case Ut.UNSIGNED_SHORT_5_5_5_1:return 2}default:return 4}}static getNumChannelsFromPixelFormat(t){switch(t){case Ct.LUMINANCE:case Ct.ALPHA:return 1;case Ct.LUMINANCE_ALPHA:return 2;case Ct.RGB:return 3;case Ct.RGBA:default:return 4}}static _allocateTextureUnit(t){for(let r=0;r<t.maxTextureUnits;r++)if(!t.registeredTextureUnits[r])return t.registeredTextureUnits[r]=!0,r;return-1}static _freeTextureUnit(t,r){t.registeredTextureUnits[r]=!1}}class kt{constructor(){}static getUniformValueArrayBufferView(t){return"number"==typeof t?new Float32Array([t]):"unit"in t?new Float32Array(t.unit):Array.isArray(t)?new Float32Array(t):t}static getUniformsListSetter(t,r,e){const s={setters:{}};return Object.keys(e).forEach((_=>{const a=e[_],i=this.getUniformSetter(t,r,_,a);s.setters[_]=i})),s.glProg=r,s}static setUniformsListValues(t,r,e){Object.keys(e).forEach((t=>{const s=e[t],_=r.setters[t];_?_.func(s.value):console.warn(`Uniform ${t} does not match with the given setters.`)}))}static isTexture(t){return"number"!=typeof t&&"unit"in t}static getUniformSetter(t,r,e,s){const _=t.getUniformLocation(r,e);if(null==_)return console.error(`Uniform ${e} could not be located.`),null;const a=t.getUniformIndices(r,[e]);if(null==a)return console.error(`Uniform ${e} could not be found.`),null;const i=t.getActiveUniforms(r,a,wt.UNIFORM_TYPE)[0],n=s.value,E=void 0===s.props?{srcOffset:void 0,srcLength:void 0,transpose:!1}:{srcOffset:s.props.srcOffset||void 0,srcLength:s.props.srcLength||void 0,transpose:s.props.transpose||!1},o=(t,r)=>{console.warn(`Uniform ${e} of type ${Vt[t]} should have a value of type ${r}`)};switch(i){case Vt.FLOAT:if("number"==typeof n)return{type:i,func:r=>{t.uniform1f(_,r)}};o(i,"number");break;case Vt.UNSIGNED_INT:if("number"==typeof n)return{type:i,func:r=>{t.uniform1ui(_,r)}};o(i,"number");break;case Vt.BOOL:case Vt.INT:if("number"==typeof n)return{type:i,func:r=>{t.uniform1i(_,r)}};o(i,"number");break;case Vt.INT_SAMPLER_2D:case Vt.INT_SAMPLER_2D_ARRAY:case Vt.INT_SAMPLER_3D:case Vt.INT_SAMPLER_CUBE:case Vt.SAMPLER_2D:case Vt.SAMPLER_3D:case Vt.SAMPLER_CUBE:case Vt.SAMPLER_2D_SHADOW:case Vt.SAMPLER_2D_ARRAY:case Vt.SAMPLER_2D_ARRAY_SHADOW:case Vt.SAMPLER_CUBE_SHADOW:case Vt.UNSIGNED_INT_SAMPLER_2D:case Vt.UNSIGNED_INT_SAMPLER_3D:case Vt.UNSIGNED_INT_SAMPLER_CUBE:case Vt.UNSIGNED_INT_SAMPLER_2D_ARRAY:if("number"!=typeof n&&"unit"in n)return{type:i,func:r=>{t.activeTexture(gt.TEXTURE0+r.unit),t.bindTexture(r.target,r.glTex),t.uniform1i(_,r.unit)}};o(i,"TextureSetter");break;case Vt.FLOAT_VEC2:if(n instanceof Float32Array||Array.isArray(n))return{type:i,func:r=>{t.uniform2fv(_,r,E.srcOffset,E.srcLength)}};o(i,"Float32List");break;case Vt.BOOL_VEC2:case Vt.INT_VEC2:if(n instanceof Int32Array||Array.isArray(n))return{type:i,func:r=>{t.uniform2iv(_,r)}};o(i,"Int32List");break;case Vt.UNSIGNED_INT_VEC2:if(n instanceof Uint32Array||Array.isArray(n))return{type:i,func:r=>{t.uniform2uiv(_,r,E.srcOffset,E.srcLength)}};o(i,"Uint32List");break;case Vt.FLOAT_VEC3:if(n instanceof Float32Array||Array.isArray(n))return{type:i,func:r=>{t.uniform3fv(_,r,E.srcOffset,E.srcLength)}};o(i,"Float32List");break;case Vt.BOOL_VEC3:case Vt.INT_VEC3:if(n instanceof Int32Array||Array.isArray(n))return{type:i,func:r=>{t.uniform3iv(_,r,E.srcOffset,E.srcLength)}};o(i,"Int32List");break;case Vt.UNSIGNED_INT_VEC3:if(n instanceof Uint32Array||Array.isArray(n))return{type:i,func:r=>{t.uniform3uiv(_,r,E.srcOffset,E.srcLength)}};o(i,"Uint32List");break;case Vt.FLOAT_VEC4:if(n instanceof Float32Array||Array.isArray(n))return{type:i,func:r=>{t.uniform4fv(_,r,E.srcOffset,E.srcLength)}};o(i,"Float32List");break;case Vt.BOOL_VEC4:case Vt.INT_VEC4:if(n instanceof Int32Array||Array.isArray(n))return{type:i,func:r=>{t.uniform4iv(_,r,E.srcOffset,E.srcLength)}};o(i,"Int32List");break;case Vt.UNSIGNED_INT_VEC4:if(n instanceof Uint32Array||Array.isArray(n))return{type:i,func:r=>{t.uniform4uiv(_,r,E.srcOffset,E.srcLength)}};o(i,"Uint32List");break;case Vt.FLOAT_MAT2:if(n instanceof Float32Array||Array.isArray(n))return{type:i,func:r=>{t.uniformMatrix2fv(_,E.transpose,r,E.srcOffset,E.srcLength)}};o(i,"Float32List");break;case Vt.FLOAT_MAT3:if(n instanceof Float32Array||Array.isArray(n))return{type:i,func:r=>{t.uniformMatrix3fv(_,E.transpose,r,E.srcOffset,E.srcLength)}};o(i,"Float32List");break;case Vt.FLOAT_MAT4:if(n instanceof Float32Array||Array.isArray(n))return{type:i,func:r=>{t.uniformMatrix4fv(_,E.transpose,r)}};o(i,"Float32List");break;case Vt.FLOAT_MAT2x3:if(n instanceof Float32Array||Array.isArray(n))return{type:i,func:r=>{t.uniformMatrix2x3fv(_,E.transpose,r,E.srcOffset,E.srcLength)}};o(i,"Float32List");break;case Vt.FLOAT_MAT2x4:if(n instanceof Float32Array||Array.isArray(n))return{type:i,func:r=>{t.uniformMatrix2x4fv(_,E.transpose,r,E.srcOffset,E.srcLength)}};o(i,"Float32List");break;case Vt.FLOAT_MAT3x2:if(n instanceof Float32Array||Array.isArray(n))return{type:i,func:r=>{t.uniformMatrix3x2fv(_,E.transpose,r,E.srcOffset,E.srcLength)}};o(i,"Float32List");break;case Vt.FLOAT_MAT3x4:if(n instanceof Float32Array||Array.isArray(n))return{type:i,func:r=>{t.uniformMatrix3x4fv(_,E.transpose,r,E.srcOffset,E.srcLength)}};o(i,"Float32List");break;case Vt.FLOAT_MAT4x2:if(n instanceof Float32Array||Array.isArray(n))return{type:i,func:r=>{t.uniformMatrix4x2fv(_,E.transpose,r,E.srcOffset,E.srcLength)}};o(i,"Float32List");break;case Vt.FLOAT_MAT4x3:if(n instanceof Float32Array||Array.isArray(n))return{type:i,func:r=>{t.uniformMatrix4x3fv(_,E.transpose,r,E.srcOffset,E.srcLength)}};o(i,"Float32List")}return console.error(`Uniform ${e} has an unknown type.`),null}}class zt{constructor(){}static createBindingsContext(t){const r=t.MAX_UNIFORM_BUFFER_BINDINGS;return{maxBindingPoints:r,registeredBindingPoints:new Array(r)}}static createUniformBlock(t,r,e){const s=Yt.createBuffer(t);if(null===s)return null;const _=this._allocateBindingPoint(r);return null===_?(console.error("Could not allocate another binding point."),null):{name:e,bindingPoint:_,glBuffer:s}}static getUniformBlockSetter(t,r,e){t.bindBuffer(At.UNIFORM_BUFFER,e.glBuffer);const s=t.getUniformBlockIndex(r,e.name);if(s===t.INVALID_INDEX)return console.error(`Block '${e.name}' does not identify a valid uniform block.`),null;const _=void 0===e.usage?t.DYNAMIC_DRAW:e.usage,a=e.bindingPoint;t.uniformBlockBinding(r,s,a);const i=t.getActiveUniformBlockParameter(r,s,t.UNIFORM_BLOCK_DATA_SIZE);t.bufferData(t.UNIFORM_BUFFER,i,_);const n={},E=t.getActiveUniformBlockParameter(r,s,t.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES);return t.getActiveUniforms(r,E,t.UNIFORM_OFFSET).forEach(((e,s)=>{const _=E[s],a=t.getActiveUniform(r,_);if(null!==a){const t=a.name;n[t]={offset:e}}})),{name:e.name,usage:_,bindingPoint:a,index:s,uniforms:n,bufferByteLength:i,glBuffer:e.glBuffer,glProg:r}}static setUniformBlockValues(t,r,e){t.bindBuffer(t.UNIFORM_BUFFER,r.glBuffer),t.bindBufferRange(t.UNIFORM_BUFFER,r.bindingPoint,r.glBuffer,0,r.bufferByteLength),Object.keys(e).forEach((s=>{const _=r.uniforms[s],a=kt.getUniformValueArrayBufferView(e[s].value);t.bufferSubData(t.UNIFORM_BUFFER,_.offset,a)}))}static bindUniformBlock(t,r){t.bindBufferBase(At.UNIFORM_BUFFER,r.bindingPoint,r.glBuffer)}static _allocateBindingPoint(t){for(let r=0;r<t.maxBindingPoints;r++)if(!t.registeredBindingPoints[r])return t.registeredBindingPoints[r]=!0,r;return null}static _freeBindingPoint(t,r){t.registeredBindingPoints[r]=!1}}class qt{constructor(){}static drawElements(t,r,e,s,_){t.drawElements(r,s,e,_)}static drawElementsInstanced(t,r,e,s,_,a){t.drawElementsInstanced(r,s,e,_,a)}static drawRangeElements(t,r,e,s,_,a,i){t.drawRangeElements(r,e,s,_,a,i)}static drawArrays(t,r,e,s){t.drawArrays(r,e,s)}static drawArraysInstanced(t,r,e,s,_){t.drawArraysInstanced(r,e,s,_)}}class Zt{constructor(){}static createPacketBindings(t,r){const e={},s={},_=r.texturesCtx||Wt.createBindingsContext(t),a=r.blocksCtx||zt.createBindingsContext(t),i=r.texturesProps,n=r.blocksProps;return void 0!==i&&Object.keys(i).forEach((r=>{const s=i[r],a=Wt.createTexture(t,_,s);if(null==a)return null;e[r]=a})),void 0!==n&&Object.keys(n).forEach((r=>{const e=n[r],_=zt.createUniformBlock(t,a,e.name);if(null==_)return null;s[r]=_})),{textures:e,blocks:s,texturesCtx:_,blocksCtx:a}}static getPacketSetter(t,r,e){const s=e.attributes,_=e.uniforms,a=e.uniformBlocks,i=e.options,n=void 0===i||void 0===i.drawMode?ht.TRIANGLES:i.drawMode,E=void 0!==i&&void 0!==i.instanced&&i.instanced,o=void 0===i||void 0===i.instanceCount?0:i.instanceCount;let A,T,R;return void 0!==s&&(A=Kt.getAttributesListSetter(t,r,s),null==A)?null:(void 0!==a&&(T={},Object.keys(a).forEach((e=>{const s=a[e],_=zt.getUniformBlockSetter(t,r,s.block);if(null==_)return null;T[e]=_}))),void 0!==_&&(R=kt.getUniformsListSetter(t,r,_),null==R)?null:{attributesSetter:A,uniformsSetter:R,uniformBlockSetters:T,drawMode:n,instanced:E,instanceCount:o})}static setPacketValues(t,r,e){const s=e.attributes,_=e.uniforms,a=e.uniformBlocks,i=r.attributesSetter,n=r.uniformsSetter,E=r.uniformBlockSetters;void 0!==s&&i&&Kt.setAttributesListValues(t,i,s),void 0!==_&&n&&kt.setUniformsListValues(t,n,_),void 0!==a&&void 0!==E&&Object.keys(a).forEach((r=>{const e=E[r],s=a[r];e&&zt.setUniformBlockValues(t,e,s.list)}))}static drawPacket(t,r){const e=r.attributesSetter;void 0!==e?(Kt.bindAttributesList(t,e),e.hasIndices?r.instanced?qt.drawElementsInstanced(t,r.drawMode,e.indexType,e.numElements,0,r.instanceCount):qt.drawElements(t,r.drawMode,e.indexType,e.numElements,0):r.instanced?qt.drawArraysInstanced(t,r.drawMode,0,e.numElements,r.instanceCount):qt.drawArrays(t,r.drawMode,0,e.numElements),Kt.unbindAttributesList(t)):console.error("No attributes to draw.")}}class jt{constructor(){}static createShader(t,r,e){const s=t.createShader(r);if(null==s)return null;if(t.shaderSource(s,e),t.compileShader(s),t.getShaderParameter(s,t.COMPILE_STATUS))return s;const _=t.getShaderInfoLog(s);return null!==_&&console.warn(_),t.deleteShader(s),null}static deleteShader(t,r){t.deleteShader(r)}}class Qt{constructor(){}static createProgramFromSources(t,r,e){const s=jt.createShader(t,dt.VERTEX_SHADER,r);if(null==s)return null;const _=jt.createShader(t,dt.FRAGMENT_SHADER,e);return null==_?null:this.createProgram(t,s,_)}static createProgram(t,r,e){const s=t.createProgram();if(null==s)return null;if(t.attachShader(s,r),t.attachShader(s,e),t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS))return s;const _=t.getProgramInfoLog(s);return null!==_&&console.warn(_),t.deleteProgram(s),null}static deleteProgram(t,r){t.deleteProgram(r)}static useProgram(t,r){t.useProgram(r)}}class $t{constructor(){}static createRenderbuffer(t,r){const e=t.createRenderbuffer();return null===e?(console.error("Could not create WebGLRenderbuffer."),null):(t.bindRenderbuffer(t.RENDERBUFFER,e),void 0!==r.samples?t.renderbufferStorageMultisample(t.RENDERBUFFER,r.samples,r.internalFormat,r.width,r.height):t.renderbufferStorage(t.RENDERBUFFER,r.internalFormat,r.width,r.height),t.bindRenderbuffer(t.RENDERBUFFER,null),{...r,glRb:e})}}class Jt{constructor(){}static setScissor(t,r,e,s,_){t.scissor(r,e,s,_)}static setViewport(t,r,e,s,_){t.viewport(r,e,s,_)}static getViewport(t){return t.getParameter(Ot.VIEWPORT)}static getScissorBox(t){return t.getParameter(Ot.SCISSOR_BOX)}static getParameter(t,r){return t.getParameter(r)}static enable(t,r){t.enable(r)}static depthFunc(t,r){t.depthFunc(r)}static stencilFunc(t,r,e,s){t.stencilFunc(r,e,s)}static clear(t,r){t.clear(r)}static clearRgba(t,r,e,s,_){t.clearColor(r,e,s,_)}static clearColor(t,r){t.clearColor(r[0],r[1],r[2],r[3])}}class tr{constructor(t){this._array=new(t||Uint8Array)(9)}static rgb(t,r,e){const s=new tr;return s.setValues([t,r,e,255]),s}static rgba(t,r,e,s){const _=new tr;return _.setValues([t,r,e,s]),_}static array(...t){const r=new Array(4*t.length);let e,s=0;for(const _ of t)e=_._array,r[s+0]=e[0],r[s+1]=e[1],r[s+2]=e[2],r[s+3]=e[3],s+=4;return r}get array(){return this._array}get r(){return this._array[0]}set r(t){this._array[0]=t}get g(){return this._array[1]}set g(t){this._array[1]=t}get b(){return this._array[2]}set b(t){this._array[2]=t}get a(){return this._array[3]}set a(t){this._array[3]=t}setValues(t){const r=this._array;return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],this}getValues(){const t=this._array;return[t[0],t[1],t[2],t[3]]}copy(t){const r=this._array;return r[0]=t.r,r[1]=t.g,r[2]=t.b,r[3]=t.a,this}clone(){return(new tr).copy(this)}lerp(t,r){const e=this._array,s=t._array;return e[0]=r*(s[0]-e[0]),e[1]=r*(s[1]-e[1]),e[2]=r*(s[2]-e[2]),e[3]=r*(s[3]-e[3]),this}valuesNormalized(){return[this.r/255,this.g/255,this.b/255,this.a/255]}}tr.BLACK=tr.rgb(0,0,0),tr.RED=tr.rgb(255,0,0),tr.GREEN=tr.rgb(0,255,0),tr.BLUE=tr.rgb(0,0,255),tr.WHITE=tr.rgb(255,255,255);const rr=tr;class er{constructor(t){this._array=t?[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]:[0,0,0,0,0,0,0,0,0]}get array(){return this._array}get values(){return[this._array[0],this._array[1],this._array[2],this._array[3],this._array[4],this._array[5],this._array[6],this._array[7],this._array[8]]}set values(t){this._array[0]=t[0],this._array[1]=t[1],this._array[2]=t[2],this._array[3]=t[3],this._array[4]=t[4],this._array[5]=t[5],this._array[6]=t[6],this._array[7]=t[7],this._array[8]=t[8]}get row1(){return[this._array[0],this._array[1],this._array[2]]}set row1(t){this._array[0]=t[0],this._array[1]=t[1],this._array[2]=t[2]}get row2(){return[this._array[3],this._array[4],this._array[5]]}set row2(t){this._array[3]=t[0],this._array[4]=t[1],this._array[5]=t[2]}get row3(){return[this._array[6],this._array[7],this._array[8]]}set row3(t){this._array[6]=t[0],this._array[7]=t[1],this._array[8]=t[2]}get col1(){return[this._array[0],this._array[3],this._array[6]]}set col1(t){this._array[0]=t[0],this._array[3]=t[1],this._array[6]=t[2]}get col2(){return[this._array[1],this._array[4],this._array[7]]}set col2(t){this._array[1]=t[0],this._array[4]=t[1],this._array[7]=t[2]}get col3(){return[this._array[2],this._array[5],this._array[8]]}set col3(t){this._array[2]=t[0],this._array[5]=t[1],this._array[8]=t[2]}get m11(){return this._array[0]}set m11(t){this._array[0]=t}get m12(){return this._array[1]}set m12(t){this._array[1]=t}get m13(){return this._array[2]}set m13(t){this._array[2]=t}get m21(){return this._array[4]}set m21(t){this._array[4]=t}get m22(){return this._array[5]}set m22(t){this._array[5]=t}get m23(){return this._array[6]}set m23(t){this._array[6]=t}get m31(){return this._array[8]}set m31(t){this._array[8]=t}get m32(){return this._array[9]}set m32(t){this._array[9]=t}get m33(){return this._array[10]}set m33(t){this._array[10]=t}setArray(t){if(t.length<16)throw new s("Array must be of length 16 at least.");return this._array=t,this}setValues(t){const r=this._array;return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],this}getRow(t){const r=this._array,e=3*t;return[r[e],r[e+1],r[e+2]]}setRow(t,r){const e=this._array,s=3*t;return e[s]=r[0],e[s+1]=r[1],e[s+2]=r[2],this}setCol(t,r){const e=this._array;return e[t]=r[0],e[3+t]=r[1],e[6+t]=r[2],this}getCol(t){const r=this._array;return[r[t],r[3+t],r[6+t]]}getAt(t){return this._array[t]}setAt(t,r){return this._array[t]=r,this}getEntry(t,r){return this._array[3*t+r]}setEntry(t,r,e){return this._array[3*t+r]=e,this}equals(t){const r=this._array,e=t.array;return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]}copy(t){const r=this._array,e=t.array;return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],this}clone(){return new er(this.values)}setIdentity(){const t=this._array;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this}setZeros(){const t=this._array;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,this}det(){const t=this._array;return t[0]*(t[4]*t[8]-t[5]*t[7])-t[1]*(t[3]*t[8]-t[5]*t[6])+t[2]*(t[3]*t[7]-t[4]*t[6])}trace(){const t=this._array;return t[0]+t[4]+t[8]}negate(){const t=this._array;return t[0]=-t[0],t[1]=-t[1],t[2]=-t[2],t[3]=-t[3],t[4]=-t[4],t[5]=-t[5],t[6]=-t[6],t[7]=-t[7],t[8]=-t[8],this}transpose(){const t=this._array;let r;return r=t[1],t[1]=t[3],t[3]=r,r=t[2],t[2]=t[6],t[6]=r,r=t[5],t[5]=t[7],t[7]=r,this}invert(){const t=this._array,r=t[4]*t[8]-t[5]*t[7],e=t[1]*t[8]-t[2]*t[7],_=t[1]*t[5]-t[2]*t[4],a=t[3]*t[8]-t[5]*t[6],i=t[0]*t[8]-t[2]*t[6],n=t[0]*t[5]-t[2]*t[3],E=t[3]*t[7]-t[4]*t[6],o=t[0]*t[7]-t[1]*t[6],A=t[0]*t[4]-t[1]*t[3],T=1/(t[0]*r-t[3]*e+t[6]*_);if(0==T)throw new s("Matrix is not invertible.");return t[0]=T*r,t[1]=-T*e,t[2]=T*_,t[3]=-T*a,t[4]=T*i,t[5]=-T*n,t[6]=T*E,t[7]=-T*o,t[8]=T*A,this}add(t){const r=this._array,e=t.array;return r[0]=r[0]+e[0],r[1]=r[1]+e[1],r[2]=r[2]+e[2],r[3]=r[3]+e[3],r[4]=r[4]+e[4],r[5]=r[5]+e[5],r[6]=r[6]+e[6],r[7]=r[7]+e[7],r[8]=r[8]+e[8],this}sub(t){const r=this._array,e=t._array;return r[0]=r[0]-e[0],r[1]=r[1]-e[1],r[2]=r[2]-e[2],r[3]=r[3]-e[3],r[4]=r[4]-e[4],r[5]=r[5]-e[5],r[6]=r[6]-e[6],r[7]=r[7]-e[7],r[8]=r[8]-e[8],this}mult(t){const r=this._array,e=t.array,s=r[0],_=r[1],a=r[2],i=r[3],n=r[4],E=r[5],o=r[6],A=r[7],T=r[8],R=e[0],h=e[1],c=e[2],u=e[3],N=e[4],I=e[5],l=e[6],y=e[7],S=e[8];return r[0]=R*s+h*i+c*o,r[1]=R*_+h*n+c*A,r[2]=R*a+h*E+c*T,r[3]=u*s+N*i+I*o,r[4]=u*_+N*n+I*A,r[5]=u*a+N*E+I*T,r[6]=l*s+y*i+S*o,r[7]=l*_+y*n+S*A,r[8]=l*a+y*E+S*T,this}multScalar(t){const r=this._array;return r[0]=r[0]*t,r[1]=r[1]*t,r[2]=r[2]*t,r[3]=r[3]*t,r[4]=r[4]*t,r[5]=r[5]*t,r[6]=r[6]*t,r[7]=r[7]*t,r[8]=r[8]*t,this}writeIntoArray(t,r=0){const e=this._array;t[r]=e[0],t[r+1]=e[1],t[r+2]=e[2],t[r+3]=e[3],t[r+4]=e[4],t[r+5]=e[5],t[r+6]=e[6],t[r+7]=e[7],t[r+8]=e[8]}readFromArray(t,r=0){const e=this._array;e[0]=t[r],e[1]=t[r+1],e[2]=t[r+2],e[3]=t[r+3],e[4]=t[r+4],e[5]=t[r+5],e[6]=t[r+6],e[7]=t[r+7],e[8]=t[r+8]}solve(t){const r=this._array,e=r[0],s=r[1],_=r[2],a=r[3],i=r[4],n=r[5],E=r[6],o=r[7],A=r[8],T=t.x-r[12],R=t.y-r[13],h=t.z-r[14];let c=i*A-n*o,u=n*E-a*A,N=a*o-i*E,I=e*c+s*u+_*N;0!=I&&(I=1/I);const l=I*(T*c+R*u+h*N);c=-(o*h-A*R),u=-(A*T-E*h),N=-(E*R-o*T);const y=I*(e*c+s*u+_*N);return c=-(R*n-h*i),u=-(h*a-T*n),N=-(T*i-R*a),[l,y,I*(e*c+s*u+_*N)]}solve2(t){const r=this._array,e=r[0],s=r[1],_=r[3],a=r[4],i=t.x-r[4],n=t.y-r[7];let E=e*a-s*_;return 0!=E&&(E=1/E),[E*(a*i-s*n),E*(e*n-_*i)]}}var sr=er;new e({defaultCtor:er,onDefaultOverride:t=>{sr=t}});class _r{constructor(t){this._array=t?[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}get array(){return this._array}get values(){return[this._array[0],this._array[1],this._array[2],this._array[3],this._array[4],this._array[5],this._array[6],this._array[7],this._array[8],this._array[9],this._array[10],this._array[11],this._array[12],this._array[13],this._array[14],this._array[15]]}set values(t){this._array[0]=t[0],this._array[1]=t[1],this._array[2]=t[2],this._array[3]=t[3],this._array[4]=t[4],this._array[5]=t[5],this._array[6]=t[6],this._array[7]=t[7],this._array[8]=t[8],this._array[9]=t[9],this._array[10]=t[10],this._array[11]=t[11],this._array[12]=t[12],this._array[13]=t[13],this._array[14]=t[14],this._array[15]=t[15]}get row1(){return[this._array[0],this._array[1],this._array[2],this._array[3]]}set row1(t){this._array[0]=t[0],this._array[1]=t[1],this._array[2]=t[2],this._array[3]=t[3]}get row2(){return[this._array[4],this._array[5],this._array[6],this._array[7]]}set row2(t){this._array[4]=t[0],this._array[5]=t[1],this._array[6]=t[2],this._array[7]=t[3]}get row3(){return[this._array[8],this._array[9],this._array[10],this._array[11]]}set row3(t){this._array[8]=t[0],this._array[9]=t[1],this._array[10]=t[2],this._array[11]=t[3]}get row4(){return[this._array[12],this._array[13],this._array[14],this._array[15]]}set row4(t){this._array[12]=t[0],this._array[13]=t[1],this._array[14]=t[2],this._array[15]=t[3]}get col1(){return[this._array[0],this._array[4],this._array[8],this._array[12]]}set col1(t){this._array[0]=t[0],this._array[4]=t[1],this._array[8]=t[2],this._array[12]=t[3]}get col2(){return[this._array[1],this._array[5],this._array[9],this._array[13]]}set col2(t){this._array[1]=t[0],this._array[5]=t[1],this._array[9]=t[2],this._array[13]=t[3]}get col3(){return[this._array[2],this._array[6],this._array[10],this._array[14]]}set col3(t){this._array[2]=t[0],this._array[6]=t[1],this._array[10]=t[2],this._array[14]=t[3]}get col4(){return[this._array[3],this._array[7],this._array[11],this._array[15]]}set col4(t){this._array[3]=t[0],this._array[7]=t[1],this._array[11]=t[2],this._array[15]=t[3]}get m11(){return this._array[0]}set m11(t){this._array[0]=t}get m12(){return this._array[1]}set m12(t){this._array[1]=t}get m13(){return this._array[2]}set m13(t){this._array[2]=t}get m14(){return this._array[3]}set m14(t){this._array[3]=t}get m21(){return this._array[4]}set m21(t){this._array[4]=t}get m22(){return this._array[5]}set m22(t){this._array[5]=t}get m23(){return this._array[6]}set m23(t){this._array[6]=t}get m24(){return this._array[7]}set m24(t){this._array[7]=t}get m31(){return this._array[8]}set m31(t){this._array[8]=t}get m32(){return this._array[9]}set m32(t){this._array[9]=t}get m33(){return this._array[10]}set m33(t){this._array[10]=t}get m34(){return this._array[11]}set m34(t){this._array[11]=t}get m41(){return this._array[12]}set m41(t){this._array[12]=t}get m42(){return this._array[13]}set m42(t){this._array[13]=t}get m43(){return this._array[14]}set m43(t){this._array[14]=t}get m44(){return this._array[15]}set m44(t){this._array[15]=t}setArray(t){if(t.length<16)throw new s("Array must be of length 16 at least.");return this._array=t,this}setValues(t){const r=this._array;return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],this}getUpper33(){const t=this._array;return[t[0],t[1],t[2],t[4],t[5],t[6],t[8],t[9],t[10]]}setUpper33(t){const r=this._array;return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[4]=t[3],r[5]=t[4],r[6]=t[5],r[8]=t[6],r[9]=t[7],r[10]=t[8],this}getUpper34(){const t=this._array;return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11]]}setUpper34(t){const r=this._array;return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],this}getRow(t){const r=this._array,e=4*t;return[r[e],r[e+1],r[e+2],r[e+3]]}setRow(t,r){const e=this._array,s=4*t;return e[s]=r[0],e[s+1]=r[1],e[s+2]=r[2],e[s+3]=r[3],this}setCol(t,r){const e=this._array;return e[t]=r[0],e[4+t]=r[1],e[8+t]=r[2],e[12+t]=r[3],this}getCol(t){const r=this._array;return[r[t],r[4+t],r[8+t],r[12+t]]}getAt(t){return this._array[t]}setAt(t,r){return this._array[t]=r,this}getEntry(t,r){return this._array[4*t+r]}setEntry(t,r,e){return this._array[4*t+r]=e,this}equals(t){const r=this._array,e=t.array;return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]&&r[9]===e[9]&&r[10]===e[10]&&r[11]===e[11]&&r[12]===e[12]&&r[13]===e[13]&&r[14]===e[14]&&r[15]===e[15]}copy(t){const r=this._array,e=t.array;return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],this}clone(){return new _r(this.values)}setIdentity(){const t=this._array;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}setZeros(){const t=this._array;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=0,this}det(){const t=this._array,r=t[0]*t[5]-t[1]*t[4],e=t[0]*t[6]-t[2]*t[4],s=t[0]*t[7]-t[3]*t[4],_=t[1]*t[6]-t[2]*t[5],a=t[1]*t[7]-t[3]*t[5],i=t[2]*t[7]-t[3]*t[6],n=t[8]*_-t[9]*e+t[10]*r,E=t[8]*a-t[9]*s+t[11]*r,o=t[8]*i-t[10]*s+t[11]*e;return-(t[9]*i-t[10]*a+t[11]*_)*t[12]+o*t[13]-E*t[14]+n*t[15]}trace(){const t=this._array;return t[0]+t[5]+t[10]+t[15]}negate(){const t=this._array,r=this._array;return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=-r[3],t[4]=-r[4],t[5]=-r[5],t[6]=-r[6],t[7]=-r[7],t[8]=-r[8],t[9]=-r[9],t[10]=-r[10],t[11]=-r[11],t[12]=-r[12],t[13]=-r[13],t[14]=-r[14],t[15]=-r[15],this}transpose(){const t=this._array,r=this._array;return r[0]=t[0],r[1]=t[4],r[2]=t[8],r[3]=t[12],r[4]=t[1],r[5]=t[5],r[6]=t[9],r[7]=t[13],r[8]=t[2],r[9]=t[6],r[10]=t[10],r[11]=t[14],r[12]=t[3],r[13]=t[7],r[14]=t[11],r[15]=t[15],this}invert(){const t=this._array,r=t[0],e=t[1],_=t[2],a=t[3],i=t[4],n=t[5],E=t[6],o=t[7],A=t[8],T=t[9],R=t[10],h=t[11],c=t[12],u=t[13],N=t[14],I=t[15],l=r*n-e*i,y=r*E-_*i,S=r*o-a*i,M=e*E-_*n,F=e*o-a*n,O=_*o-a*E,C=A*u-T*c,L=A*N-R*c,U=A*I-h*c,P=T*N-R*u,B=T*I-h*u,d=R*I-h*N,m=l*d-y*B+S*P+M*U-F*L+O*C;if(0==m)throw new s("Matrix is not invertible.");const f=1/m;return t[0]=(n*d-E*B+o*P)*f,t[1]=(-e*d+_*B-a*P)*f,t[2]=(u*O-N*F+I*M)*f,t[3]=(-T*O+R*F-h*M)*f,t[4]=(-i*d+E*U-o*L)*f,t[5]=(r*d-_*U+a*L)*f,t[6]=(-c*O+N*S-I*y)*f,t[7]=(A*O-R*S+h*y)*f,t[8]=(i*B-n*U+o*C)*f,t[9]=(-r*B+e*U-a*C)*f,t[10]=(c*F-u*S+I*l)*f,t[11]=(-A*F+T*S-h*l)*f,t[12]=(-i*P+n*L-E*C)*f,t[13]=(r*P-e*L+_*C)*f,t[14]=(-c*M+u*y-N*l)*f,t[15]=(A*M-T*y+R*l)*f,this}inverseTranspose(){const t=this._array,r=t[0],e=t[1],_=t[2],a=t[3],i=t[4],n=t[5],E=t[6],o=t[7],A=t[8],T=t[9],R=t[10],h=t[11],c=t[12],u=t[13],N=t[14],I=t[15],l=r*n-e*i,y=r*E-_*i,S=r*o-a*i,M=e*E-_*n,F=e*o-a*n,O=_*o-a*E,C=A*u-T*c,L=A*N-R*c,U=A*I-h*c,P=T*N-R*u,B=T*I-h*u,d=R*I-h*N,m=l*d-y*B+S*P+M*U-F*L+O*C;if(0==m)throw new s("Matrix is not inversible.");const f=1/m,D=(n*d-E*B+o*P)*f,g=(-e*d+_*B-a*P)*f,p=(u*O-N*F+I*M)*f,G=(-T*O+R*F-h*M)*f,x=(-i*d+E*U-o*L)*f,b=(r*d-_*U+a*L)*f,X=(-c*O+N*S-I*y)*f,w=(A*O-R*S+h*y)*f,V=(i*B-n*U+o*C)*f,H=(-r*B+e*U-a*C)*f,v=(c*F-u*S+I*l)*f,Y=(-A*F+T*S-h*l)*f,K=(-i*P+n*L-E*C)*f,W=(r*P-e*L+_*C)*f,k=(-c*M+u*y-N*l)*f,z=(A*M-T*y+R*l)*f;return t[0]=D,t[1]=g,t[2]=p,t[3]=G,t[4]=x,t[5]=b,t[6]=X,t[7]=w,t[8]=V,t[9]=H,t[10]=v,t[11]=Y,t[12]=K,t[13]=W,t[14]=k,t[15]=z,this}add(t){const r=this._array,e=t.array;return r[0]=r[0]+e[0],r[1]=r[1]+e[1],r[2]=r[2]+e[2],r[3]=r[3]+e[3],r[4]=r[4]+e[4],r[5]=r[5]+e[5],r[6]=r[6]+e[6],r[7]=r[7]+e[7],r[8]=r[8]+e[8],r[9]=r[9]+e[9],r[10]=r[10]+e[10],r[11]=r[11]+e[11],r[12]=r[12]+e[12],r[13]=r[13]+e[13],r[14]=r[14]+e[14],r[15]=r[15]+e[15],this}sub(t){const r=this._array,e=t.array;return r[0]=r[0]-e[0],r[1]=r[1]-e[1],r[2]=r[2]-e[2],r[3]=r[3]-e[3],r[4]=r[4]-e[4],r[5]=r[5]-e[5],r[6]=r[6]-e[6],r[7]=r[7]-e[7],r[8]=r[8]-e[8],r[9]=r[9]-e[9],r[10]=r[10]-e[10],r[11]=r[11]-e[11],r[12]=r[12]-e[12],r[13]=r[13]-e[13],r[14]=r[14]-e[14],r[15]=r[15]-e[15],this}mult(t){const r=this._array,e=t.array,s=r[0],_=r[1],a=r[2],i=r[3],n=r[4],E=r[5],o=r[6],A=r[7],T=r[8],R=r[9],h=r[10],c=r[11],u=r[12],N=r[13],I=r[14],l=r[15],y=e[0],S=e[1],M=e[2],F=e[3],O=e[4],C=e[5],L=e[6],U=e[7],P=e[8],B=e[9],d=e[10],m=e[11],f=e[12],D=e[13],g=e[14],p=e[15];return r[0]=s*y+n*S+T*M+u*F,r[1]=_*y+E*S+R*M+N*F,r[2]=a*y+o*S+h*M+I*F,r[3]=i*y+A*S+c*M+l*F,r[4]=s*O+n*C+T*L+u*U,r[5]=_*O+E*C+R*L+N*U,r[6]=a*O+o*C+h*L+I*U,r[7]=i*O+A*C+c*L+l*U,r[8]=s*P+n*B+T*d+u*m,r[9]=_*P+E*B+R*d+N*m,r[10]=a*P+o*B+h*d+I*m,r[11]=i*P+A*B+c*d+l*m,r[12]=s*f+n*D+T*g+u*p,r[13]=_*f+E*D+R*g+N*p,r[14]=a*f+o*D+h*g+I*p,r[15]=i*f+A*D+c*g+l*p,this}multScalar(t){const r=this._array;return r[0]=r[0]*t,r[1]=r[1]*t,r[2]=r[2]*t,r[3]=r[3]*t,r[4]=r[4]*t,r[5]=r[5]*t,r[6]=r[6]*t,r[7]=r[7]*t,r[8]=r[8]*t,r[9]=r[9]*t,r[10]=r[10]*t,r[11]=r[11]*t,r[12]=r[12]*t,r[13]=r[13]*t,r[14]=r[14]*t,r[15]=r[15]*t,this}getMaxScaleOnAxis(){const t=this._array,r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],e=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],s=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(r,e,s))}writeIntoArray(t,r=0){const e=this._array;t[r]=e[0],t[r+1]=e[1],t[r+2]=e[2],t[r+3]=e[3],t[r+4]=e[4],t[r+5]=e[5],t[r+6]=e[6],t[r+7]=e[7],t[r+8]=e[8],t[r+9]=e[9],t[r+10]=e[10],t[r+11]=e[11],t[r+12]=e[12],t[r+13]=e[13],t[r+14]=e[14],t[r+15]=e[15]}readFromArray(t,r=0){const e=this._array;return e[0]=t[r],e[1]=t[r+1],e[2]=t[r+2],e[3]=t[r+3],e[4]=t[r+4],e[5]=t[r+5],e[6]=t[r+6],e[7]=t[r+7],e[8]=t[r+8],e[9]=t[r+9],e[10]=t[r+10],e[11]=t[r+11],e[12]=t[r+12],e[13]=t[r+13],e[14]=t[r+14],e[15]=t[r+15],this}solve(t){const r=this._array,e=r[0],s=r[1],_=r[2],a=r[3],i=r[4],n=r[5],E=r[6],o=r[7],A=r[8],T=r[9],R=r[10],h=r[11],c=r[12],u=r[13],N=r[14],I=r[15],l=e*n-s*i,y=e*E-_*i,S=e*o-a*i,M=s*E-_*n,F=s*o-a*n,O=_*o-a*E,C=A*u-T*c,L=A*N-R*c,U=A*I-h*c,P=T*N-R*u,B=T*I-h*u,d=R*I-h*N,m=t.x,f=t.y,D=t.z,g=t.w;let p=l*d-y*B+S*P+M*U-F*L+O*C;return 0!=p&&(p=1/p),[p*((n*d-E*B+o*P)*m-(i*d-E*U+o*L)*f+(i*B-n*U+o*C)*D-(i*P-n*L+E*C)*g),p*-((s*d-_*B+a*P)*m-(e*d-_*U+a*L)*f+(e*B-s*U+a*C)*D-(e*P-s*L+_*C)*g),p*((u*O-N*F+I*M)*m-(c*O-N*S+I*y)*f+(c*F-u*S+I*l)*D-(c*M-u*y+N*l)*g),p*-((T*O-R*F+h*M)*m-(A*O-R*S+h*y)*f+(A*F-T*S+h*l)*D-(A*M-T*y+R*l)*g)]}solve2(t){const r=this._array,e=r[0],s=r[1],_=r[4],a=r[5],i=t.x-r[8],n=t.y-r[9];let E=e*a-s*_;return 0!=E&&(E=1/E),[E*(a*i-s*n),E*(e*n-_*i)]}solve3(t){const r=this._array,e=r[0],s=r[1],_=r[2],a=r[4],i=r[5],n=r[6],E=r[8],o=r[9],A=r[10],T=t.x-r[12],R=t.y-r[13],h=t.z-r[14];let c=i*A-n*o,u=n*E-a*A,N=a*o-i*E,I=e*c+s*u+_*N;0!=I&&(I=1/I);const l=I*(T*c+R*u+h*N);c=-(o*h-A*R),u=-(A*T-E*h),N=-(E*R-o*T);const y=I*(e*c+s*u+_*N);return c=-(R*n-h*i),u=-(h*a-T*n),N=-(T*i-R*a),[l,y,I*(e*c+s*u+_*N)]}static translation(t){return(new _r).setTranslation(t)}setTranslation(t){const r=this._array,e=t.x,s=t.y,_=t.z;return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=e,r[13]=s,r[14]=_,r[15]=1,this}translate(t){const r=this._array,e=r[0],s=r[1],_=r[2],a=r[3],i=r[4],n=r[5],E=r[6],o=r[7],A=r[8],T=r[9],R=r[10],h=r[11],c=r[12],u=r[13],N=r[14],I=r[15],l=t.x,y=t.y,S=t.z;return r[12]=e*l+i*y+A*S+c,r[13]=s*l+n*y+T*S+u,r[14]=_*l+E*y+R*S+N,r[15]=a*l+o*y+h*S+I,this}static rotationX(t){return(new _r).setRotationX(t)}setRotationX(t){const r=this._array,e=Math.cos(t),s=Math.sin(t);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e,r[6]=s,r[7]=0,r[8]=0,r[9]=-s,r[10]=-e,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}rotateX(t){const r=this._array,e=r[4],s=r[5],_=r[6],a=r[7],i=r[8],n=r[9],E=r[10],o=r[11],A=Math.cos(t),T=Math.sin(t);return r[8]=A*e+T*i,r[9]=A*s+T*n,r[10]=A*_+T*E,r[11]=A*a+T*o,r[12]=A*i-T*e,r[13]=A*n-T*s,r[14]=A*E-T*_,r[15]=A*o-T*a,this}static rotationY(t){return(new _r).setRotationY(t)}setRotationY(t){const r=Math.cos(t),e=Math.sin(t),s=this._array;return s[0]=r,s[1]=0,s[2]=-e,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=e,s[9]=0,s[10]=r,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,this}rotateY(t){const r=this._array,e=r[0],s=r[1],_=r[2],a=r[3],i=r[8],n=r[9],E=r[10],o=r[11],A=Math.cos(t),T=Math.sin(t);return r[0]=A*e-T*i,r[1]=A*s-T*n,r[2]=A*_-T*E,r[3]=A*a-T*o,r[12]=A*i+T*e,r[13]=A*n+T*s,r[14]=A*E+T*_,r[15]=A*o+T*a,this}static rotationZ(t){return(new _r).setRotationZ(t)}setRotationZ(t){const r=Math.cos(t),e=Math.sin(t),s=this._array;return s[0]=r,s[1]=e,s[2]=0,s[3]=0,s[4]=-e,s[5]=r,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,this}rotateZ(t){const r=this._array,e=r[0],s=r[1],_=r[2],a=r[3],i=r[4],n=r[5],E=r[6],o=r[7],A=Math.cos(t),T=Math.sin(t);return r[4]=A*e+T*i,r[5]=A*s+T*n,r[6]=A*_+T*E,r[7]=A*a+T*o,r[8]=A*i-T*e,r[9]=A*n-T*s,r[10]=A*E-T*_,r[11]=A*o-T*a,this}rotate(t,r,e){return this.rotateX(t),this.rotateY(r),this.rotateZ(e),this}axisRotation(t,r){let e=t.x,s=t.y,_=t.z;const a=Math.sqrt(e*e+s*s+_*_);e/=a,s/=a,_/=a;const i=e*e,n=s*s,E=_*_,o=Math.cos(r),A=Math.sin(r),T=1-o,R=this._array;return R[0]=i+(1-i)*o,R[1]=e*s*T+_*A,R[2]=e*_*T-s*A,R[3]=0,R[4]=e*s*T-_*A,R[5]=n+(1-n)*o,R[6]=s*_*T+e*A,R[7]=0,R[8]=e*_*T+s*A,R[9]=s*_*T-e*A,R[10]=E+(1-E)*o,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,this}rotateAxis(t,r){const e=this._array;let s=t.x,_=t.y,a=t.z;const i=Math.sqrt(s*s+_*_+a*a);s/=i,_/=i,a/=i;const n=s*s,E=_*_,o=a*a,A=Math.cos(r),T=Math.sin(r),R=1-A,h=n+(1-n)*A,c=s*_*R+a*T,u=s*a*R-_*T,N=s*_*R-a*T,I=E+(1-E)*A,l=_*a*R+s*T,y=s*a*R+_*T,S=_*a*R-s*T,M=o+(1-o)*A,F=e[0],O=e[1],C=e[2],L=e[3],U=e[4],P=e[5],B=e[6],d=e[7],m=e[8],f=e[9],D=e[10],g=e[11];return e[0]=h*F+c*U+u*m,e[1]=h*O+c*P+u*f,e[2]=h*C+c*B+u*D,e[3]=h*L+c*d+u*g,e[4]=N*F+I*U+l*m,e[5]=N*O+I*P+l*f,e[6]=N*C+I*B+l*D,e[7]=N*L+I*d+l*g,e[8]=y*F+S*U+M*m,e[9]=y*O+S*P+M*f,e[10]=y*C+S*B+M*D,e[11]=y*L+S*d+M*g,this}setScaling(t){const r=t.x,e=t.y,s=t.z,_=this._array;return _[0]=r,_[1]=0,_[2]=0,_[3]=0,_[4]=0,_[5]=e,_[6]=0,_[7]=0,_[8]=0,_[9]=0,_[10]=s,_[11]=0,_[12]=0,_[13]=0,_[14]=0,_[15]=1,this}scale(t){const r=this._array,e=t.x,s=t.y,_=t.z;return r[0]=e*r[0],r[1]=e*r[1],r[2]=e*r[2],r[3]=e*r[3],r[4]=s*r[4],r[5]=s*r[5],r[6]=s*r[6],r[7]=s*r[7],r[8]=_*r[8],r[9]=_*r[9],r[10]=_*r[10],r[11]=_*r[11],this}scaleScalar(t){const r=this._array;return r[0]=t*r[0],r[1]=t*r[1],r[2]=t*r[2],r[3]=t*r[3],r[4]=t*r[4],r[5]=t*r[5],r[6]=t*r[6],r[7]=t*r[7],r[8]=t*r[8],r[9]=t*r[9],r[10]=t*r[10],r[11]=t*r[11],this}lookAt(t,r,e){const s=this._array,_=t.array,a=_[0],i=_[1],n=_[2],E=r.array,o=E[0],A=E[1],T=E[2],R=e.array,h=R[0],c=R[1],u=R[2];let N=a-o,I=i-A,l=n-T;const y=Math.sqrt(N*N+I*I+l*l);y>Number.EPSILON?(N/=y,I/=y,l/=y):(N=0,I=0,l=0);let S=c*l-u*I,M=u*N-h*l,F=h*I-c*N;const O=Math.sqrt(S*S+M*M+F*F);O>Number.EPSILON?(S/=O,M/=O,F/=O):(S=0,M=0,F=0);let C=I*F-l*M,L=l*S-N*F,U=N*M-I*S;const P=Math.sqrt(C*C+L*L+U*U);return P>Number.EPSILON?(C/=P,L/=P,U/=P):(C=0,L=0,U=0),s[0]=S,s[1]=M,s[2]=F,s[3]=0,s[4]=C,s[5]=L,s[6]=U,s[7]=0,s[8]=N,s[9]=I,s[10]=l,s[11]=0,s[12]=a,s[13]=i,s[14]=n,s[15]=1,this}transformPoint(t){const r=this._array,e=t.x,s=t.y,_=t.z,a=e*r[3]+s*r[7]+_*r[11]+r[15];return[(e*r[0]+s*r[4]+_*r[8]+r[12])/a,(e*r[1]+s*r[5]+_*r[9]+r[13])/a,(e*r[2]+s*r[6]+_*r[10]+r[14])/a]}transformDirection(t){const r=this._array,e=t.x,s=t.y,_=t.z;return[e*r[0]+s*r[4]+_*r[8],e*r[1]+s*r[5]+_*r[9],e*r[2]+s*r[6]+_*r[10]]}transformNormal(t){let r;const e=this.values,s=this.invert().array,_=t.x,a=t.y,i=t.z;return r=[_*s[0]+a*s[4]+i*s[8],_*s[1]+a*s[5]+i*s[9],_*s[2]+a*s[6]+i*s[10]],this.values=e,r}asPerspective(t,r,e,s){const _=Math.tan(.5*Math.PI-.5*t),a=1/(e-s),i=this._array;return i[0]=_/r,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=_,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=(e+s)*a,i[11]=-1,i[12]=0,i[13]=0,i[14]=e*s*a*2,i[15]=0,this}asOrthographic(t,r,e,s,_,a){const i=this._array;return i[0]=2/(r-t),i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2/(s-e),i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2/(_-a),i[11]=0,i[12]=(r+t)/(t-r),i[13]=(s+e)/(e-s),i[14]=(a+_)/(_-a),i[15]=1,this}}var ar=_r;new e({defaultCtor:_r,onDefaultOverride:t=>{ar=t}});class ir{constructor(t){t?(this.pitch=t[0],this.yaw=t[1],this.roll=t[2]):(this.pitch=0,this.yaw=0,this.roll=0)}get values(){return[this.pitch,this.yaw,this.roll]}set values(t){this.pitch=t[0],this.yaw=t[1],this.roll=t[2]}toQuaternion(){const t=Math.cos(.5*this.yaw),r=Math.sin(.5*this.yaw),e=Math.cos(.5*this.pitch),s=Math.sin(.5*this.pitch),_=Math.cos(.5*this.roll),a=Math.sin(.5*this.roll);return new or([_*s*t+a*e*r,_*e*r-a*s*t,a*e*t-_*s*r,_*e*t+a*s*r])}setQuaternion(t){const r=t.x,e=t.y,s=t.z,_=t.w,a=2*(_*r+e*s),i=1-2*(r*r+e*e);this.roll=Math.atan2(a,i);const n=2*(_*e-s*r);Math.abs(n)>=1?this.pitch=Math.sign(n)*(Math.PI/2):this.pitch=Math.asin(n);const E=2*(_*s+r*e),o=1-2*(e*e+s*s);return this.yaw=Math.atan2(E,o),this}static fromQuaternion(t){return(new ir).setQuaternion(t)}static fromMatrix(t){const r=t.array,e=Math.atan2(r[3],r[0]),s=Math.atan2(-r[6],Math.sqrt(r[7]*r[7]+r[8]*r[8])),_=Math.atan2(r[7],r[8]);return new ir([e,s,_])}}var nr=ir;class Er{constructor(t){this._array=t?[t[0],t[1],t[2],t[3]]:[0,0,0,0]}static fromVector(t){return new Er([t.x,t.y,t.z,0])}static fromEuler(t){const r=.5*t.pitch,e=.5*t.yaw,s=.5*t.roll,_=Math.cos(r),a=Math.sin(r),i=Math.cos(e),n=Math.sin(e),E=Math.cos(s),o=Math.sin(s);return new Er([E*n*_+o*i*a,E*i*a-o*n*_,o*i*_-E*n*a,E*i*_+o*n*a])}get array(){return this._array}get values(){return[this._array[0],this._array[1],this._array[2],this._array[3]]}set values(t){this._array[0]=t[0],this._array[1]=t[1],this._array[2]=t[2],this._array[3]=t[3]}get _x(){return this._array[0]}set _x(t){this._array[0]=t}get _y(){return this._array[1]}set _y(t){this._array[1]=t}set _z(t){this._array[2]=t}get _z(){return this._array[2]}set _w(t){this._array[3]=t}get _w(){return this._array[3]}get x(){return this._array[0]}set x(t){this._array[0]=t}get y(){return this._array[1]}set y(t){this._array[1]=t}set z(t){this._array[2]=t}get z(){return this._array[2]}set w(t){this._array[3]=t}get w(){return this._array[3]}setArray(t){if(t.length<4)throw new s("Array must be of length 4 at least.");return this._array=t,this}copy(t){const r=this._array,e=t.array;return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],this}setValues(t){const r=this._array;return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],this}clone(){return new Er(this.values)}equals(t){const r=this._array,e=t.array;return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]}getAxis(t){const r=1-this._w*this._w;if(r<Number.EPSILON)return t.setZeros();const e=function(t){const r=.5*t;F[0]=t,O[0]=1597463007-(O[0]>>1);let e=F[0];return e*=1.5-r*e*e,e}(r);return t.setValues([this._x*e,this._y*e,this._z*e]),t}toMatrix(){const t=2/this.len(),r=this._x,e=this._y,s=this._z,_=this._w,a=r*t,i=e*t,n=s*t,E=_*a,o=_*i,A=_*n,T=r*a,R=r*i,h=r*n,c=e*i,u=e*n,N=s*n;return new sr([1-(c+N),R+A,h-o,R-A,1-(T+N),u+E,h+o,u-E,1-(T+c)])}rotate(t){const r=t.x,e=t.y,s=t.z,_=this._x,a=this._y,i=this._z,n=this._w,E=n*r+0*-_+-a*s+i*e,o=n*e+0*-a+-i*r+_*s,A=n*s+0*-i+-_*e+a*r,T=_*r+0*n+a*e+i*s;return t.setValues([T*i+A*n+E*a-o*_,T*a+o*n+A*_-E*i,T*_+E*n+o*i-A*a]),t}toEuler(){const t=new nr,r=this.x,e=this.y,s=this.z,_=this.w,a=2*(_*r+e*s),i=1-2*(r*r+e*e);t.roll=Math.atan2(a,i);const n=2*(_*e-s*r);Math.abs(n)>=1?t.pitch=Math.sign(n)*(Math.PI/2):t.pitch=Math.asin(n);const E=2*(_*s+r*e),o=1-2*(e*e+s*s);return t.yaw=Math.atan2(E,o),t}toVector(){return new I([this.x,this.y,this.z])}setEuler(t){const r=.5*t.yaw,e=.5*t.pitch,s=.5*t.roll,_=Math.cos(r),a=Math.sin(r),i=Math.cos(e),n=Math.sin(e),E=Math.cos(s),o=Math.sin(s);return this.x=E*n*_+o*i*a,this.y=E*i*a-o*n*_,this.z=o*i*_-E*n*a,this.w=E*i*_+o*n*a,this}setFromAxisAngle(t,r){const e=r/2,s=Math.sin(e);return this._x=t.x*s,this._y=t.y*s,this._z=t.z*s,this._w=Math.cos(e),this}setFromMatrix(t){const r=t.values,e=r[0],s=r[1],_=r[2],a=r[3],i=r[4],n=r[5],E=r[6],o=r[7],A=r[8],T=e+i+A;if(T>0){const t=.5/Math.sqrt(T+1);this._w=.25/t,this._x=(o-n)*t,this._y=(_-E)*t,this._z=(a-s)*t}else if(e>i&&e>A){const t=2*Math.sqrt(1+e-i-A);this._w=(o-n)/t,this._x=.25*t,this._y=(s+a)/t,this._z=(_+E)/t}else if(i>A){const t=2*Math.sqrt(1+i-e-A);this._w=(_-E)/t,this._x=(s+a)/t,this._y=.25*t,this._z=(n+o)/t}else{const t=2*Math.sqrt(1+A-e-i);this._w=(a-s)/t,this._x=(_+E)/t,this._y=(n+o)/t,this._z=.25*t}return this}static fromMatrix(t){return(new Er).setFromMatrix(t)}setFromVectors(t,r){let e=t.dot(r)+1;return e<Number.EPSILON?(e=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=e):(this._x=0,this._y=-t.z,this._z=t.y,this._w=e)):(this._x=t.y*r.z-t.z*r.y,this._y=t.z*r.x-t.x*r.z,this._z=t.x*r.y-t.y*r.x,this._w=e),this.normalize()}dot(t){return this._x*t.x+this._y*t.y+this._z*t.z+this._w*t.w}lenSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}len(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}angleTo(t){return 2*Math.acos(Math.abs(Math.max(-1,Math.min(1,this.dot(t)))))}rotateTowards(t){const r=this.angleTo(t);if(0===r)return this;const e=Math.min(1,r);return this.slerp(t,e),this}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this}normalize(){let t=this.len();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this}add(t){const r=t.array;return this._x=this._x+r[0],this._y=this._y+r[1],this._z=this._z+r[2],this._w=this._w+r[3],this}sub(t){const r=t.array;return this._x=this._x-r[0],this._y=this._y-r[1],this._z=this._z-r[2],this._w=this._w-r[3],this}mult(t){const r=this._x,e=this._y,s=this._z,_=this._w,a=t.x,i=t.y,n=t.z,E=t.w;return this._x=r*E+_*a+e*n-s*i,this._y=e*E+_*i+s*a-r*n,this._z=s*E+_*n+r*i-e*a,this._w=_*E-r*a-e*i-s*n,this}multScalar(t){return this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t,this}slerp(t,r){if(0===r)return this;if(1===r)return this.copy(t);const e=this._x,s=this._y,_=this._z,a=this._w;let i=a*t.w+e*t.x+s*t.y+_*t.z;if(i<0?(this._w=-t.w,this._x=-t.x,this._y=-t.y,this._z=-t.z,i=-i):this.copy(t),i>=1)return this._w=a,this._x=e,this._y=s,this._z=_,this;const n=1-i*i;if(n<=Number.EPSILON){const t=1-r;return this._w=t*a+r*this._w,this._x=t*e+r*this._x,this._y=t*s+r*this._y,this._z=t*_+r*this._z,this.normalize(),this}const E=Math.sqrt(n),o=Math.atan2(E,i),A=Math.sin((1-r)*o)/E,T=Math.sin(r*o)/E;return this._w=a*A+this._w*T,this._x=e*A+this._x*T,this._y=s*A+this._y*T,this._z=_*A+this._z*T,this}copyIntoArray(t,r=0){const e=this._array;t[r]=e[0],t[r+1]=e[1],t[r+2]=e[2],t[r+3]=e[3]}readFromArray(t,r=0){const e=this._array;e[0]=t[r],e[1]=t[r+1],e[2]=t[r+2],e[3]=t[r+3]}}var or=Er;new u(Er),new e({defaultCtor:Er,onDefaultOverride:t=>{or=t}});const Ar=class extends N{constructor(t,r){super();const e=t||Float64Array;this._array=new e(r||3)}get array(){return this._array}setArray(t){if(t.length<3)throw new s("Array must be of length 3 at least.");return this._array=t,this}};class Tr{constructor(){}}Tr.xAxis=new Ar(Uint8Array,[1,0,0]),Tr.yAxis=new Ar(Uint8Array,[0,1,0]),Tr.zAxis=new Ar(Uint8Array,[0,0,1]),Tr.right=new Ar(Uint8Array,[1,0,0]),Tr.left=new Ar(Uint8Array,[-1,0,0]),Tr.up=new Ar(Uint8Array,[0,1,0]),Tr.down=new Ar(Uint8Array,[0,-1,0]),Tr.forward=new Ar(Uint8Array,[0,0,1]),Tr.backward=new Ar(Uint8Array,[0,0,-1]);var Rr;!function(t){t[t.DEBUG=0]="DEBUG",t[t.ERROR=1]="ERROR",t[t.INFO=2]="INFO",t[t.LOG=3]="LOG",t[t.WARN=4]="WARN"}(Rr||(Rr={}));const hr=new class{constructor(){this._broker=new class{constructor(){this._subscriptions=[]}hasSubscriptions(){return this._subscriptions.length>0}subscribe(t){return this._subscriptions.indexOf(t)<0&&this._subscriptions.push(t),t}unsubscribe(t){const r=this._subscriptions.indexOf(t);return r>-1&&this._subscriptions.splice(r,1),this._subscriptions.length}publish(t){for(const r of this._subscriptions)r(t)}}}log(t){const r=Rr.LOG;t=this.formatMessage(r,t),console.log(t),this._onLog(r,t)}info(t){const r=Rr.INFO;t=this.formatMessage(r,t),console.info(t),this._onLog(r,t)}warn(t){const r=Rr.WARN;t=this.formatMessage(r,t),console.warn(t),this._onLog(r,t)}debug(t){const r=Rr.DEBUG;t=this.formatMessage(r,t),console.debug(t),this._onLog(r,t)}error(t){const r=Rr.ERROR;t=this.formatMessage(r,t),console.error(t),this._onLog(r,t)}_onLog(t,r){this._broker.publish({level:t,message:r})}subscribe(t){return this._broker.subscribe(t)}unsubscribe(t){return this._broker.unsubscribe(t)}formatMessage(t,r){return`[${this.getTimestamp()}] ${r}`}getTimestamp(){return(new Date).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",second:"numeric",hour12:!1})}};class cr extends Error{constructor(){super(...arguments),this.name="RessourceError"}}const ur=Object.freeze({fetchArrayBuffer:async t=>fetch(t).then((r=>{if(r.ok)return r.arrayBuffer();throw new cr(`Array buffer '${t}' not found.`)})),fetchTextFile:async t=>fetch(t).then((r=>{if(r.ok)return r.text();throw new cr(`Text file '${t}' not found.`)})),fetchJSON:async t=>fetch(t).then((r=>{if(r.ok)return r.json();throw new cr(`JSON file '${t}' not found.`)})),fetchImage:async t=>fetch(t).then((r=>{if(r.ok)return new Promise((r=>{const e=new Image;e.onload=()=>{r(e)},e.src=t}));throw new cr(`Image '${t}' not found.`)}))});function Nr(t){return t.substring(t.lastIndexOf(".")+1)}const Ir=["png","jpg"],lr=["txt","md","vert","frag","glsl","json","html","css"];async function yr(){const t=document.createElement("template");t.innerHTML='\n<link rel="stylesheet" href="../css/main.css"/>\n  <div class="flex-auto flex-cols">\n    <main class="flex-rows flex-auto">\n        <section class="centered padded">\n          <div id="ui" class="flex-cols">\n            <div class="flex-auto"><span class="blue">"RigidBuddy FTW!"</span> <span class="yellow">:-)</span></div>\n            <div class="flex-none">FPS: <span id="canvas-fps">-.-</span></div>\n          </div>\n          <canvas id="canvas" tabindex="0" tooltip="mon-canvas"></canvas>\n        </section>\n    </main>\n  </div>',document.body.insertBefore(t.content,document.body.firstChild),async function(){let t,r,e=0;const s=document.getElementById("canvas");if(!s)return;s.width=1200,s.height=800;const _=s.getContext("webgl2");if(!_)return;const a=new class{constructor(t){this.folder=t||"",this.resources=new Map}get(t){const r=this.resources.get(t);return void 0===r?(hr.error(`Unknown resource '${t}'.`),null):r}toString(){return`[\n\t'${Array.from(this.resources.keys()).join("',\n\t'")}'\n]`}async load(t){let r=this.folder.concat(t);await async function(t,r,e){const s=Nr(t);let _;try{Ir.includes(s)?_=await ur.fetchImage(r):lr.includes(s)&&(_=await ur.fetchTextFile(r))}catch(t){return void hr.error(`Resource item '${r}' not found.`)}e.set(t,_)}(t,r,this.resources)}async loadList(t){let r,e=this.folder.concat(t);try{r=await ur.fetchJSON(e)}catch(t){return void hr.error(`Resources list '${e}' not found.`)}const s=async function(t,r,s){const _=Nr(t);let a;try{Ir.includes(_)?a=await ur.fetchImage(r.concat(t)):lr.includes(_)&&(a=await ur.fetchTextFile(r.concat(t)))}catch(t){return void hr.error(`Resource item '${e}' not found.`)}s.set(t,a)};for(const t of r.list)await s(t,this.folder,this.resources)}}("assets/engine/");await a.loadList("resources.json");const i=a.get("shaders/common/phong.vert"),E=a.get("shaders/common/phong.frag"),o=a.get("shaders/common/skybox.vert"),A=a.get("shaders/common/skybox.frag"),T=a.get("shaders/common/texture.vert"),h=a.get("shaders/common/texture.frag"),c=a.get("shaders/common/primitive.vert"),u=a.get("shaders/common/primitive.frag"),N=a.get("img/brickwall.jpg"),l=a.get("img/brickwall_normal.jpg"),y=a.get("img/skybox_x_pos.png"),S=a.get("img/skybox_x_neg.png"),M=a.get("img/skybox_y_pos.png"),F=a.get("img/skybox_y_neg.png"),O=a.get("img/skybox_z_pos.png"),C=a.get("img/skybox_z_neg.png"),L=(a.get("img/waves_normal.png"),Qt.createProgramFromSources(_,i,E)),U=Qt.createProgramFromSources(_,o,A),P=Qt.createProgramFromSources(_,T,h),B=(Qt.createProgramFromSources(_,c,u),new v),d=(new k,new Q),m=Zt.createPacketBindings(_,{texturesProps:{albedoMap:Wt.guessTextureProperties({pixels:N}),normalMap:Wt.guessTextureProperties({pixels:l}),skybox:Wt.guessTextureProperties({pixels:{xPos:y,xNeg:S,yPos:M,yNeg:F,zPos:O,zNeg:C},wrapS:Xt.CLAMP_TO_EDGE,wrapT:Xt.CLAMP_TO_EDGE,wrapR:Xt.CLAMP_TO_EDGE,mag:xt.LINEAR,min:bt.LINEAR}),fbColorTex:Wt.guessTextureProperties({width:s.width,height:s.height,pixels:null,wrapS:Xt.CLAMP_TO_EDGE,wrapT:Xt.CLAMP_TO_EDGE,wrapR:Xt.CLAMP_TO_EDGE,mag:xt.LINEAR,min:bt.LINEAR})},blocksProps:{worldViewBlock:{name:"WorldViewBlock",usage:it.DYNAMIC_COPY},lightsBlock:{name:"LightsBlock",usage:it.STATIC_READ},phongBlock:{name:"PhongBlock",usage:it.STATIC_READ}}}),f=m.blocks.worldViewBlock,D=m.blocks.lightsBlock,g=m.blocks.phongBlock,p=m.textures.albedoMap,G=m.textures.normalMap,x=m.textures.skybox,b=m.textures.fbColorTex,X=30*Math.PI/180,w=_.canvas.width/_.canvas.height,V=(new ar).asPerspective(X,w,1,100),H=new I([3,3,0]),Y=new I([0,0,0]),K=new I([0,1,0]),W=(new ar).lookAt(H,Y,K),z=W.clone(),q=W.clone().invert(),Z=V.clone().mult(q),j=Z.clone().invert(),$=new Float32Array(16),J=(new ar).setArray($).setIdentity().scaleScalar(.5),tt=(new ar).setIdentity().scaleScalar(2),rt={attributes:{list:{a_position:{array:new Float32Array(B.vertices.array),props:{numComponents:3}},a_normal:{array:new Float32Array(B.verticesNormals.array),props:{numComponents:3}},a_tangent:{array:new Float32Array(B.tangents.array),props:{numComponents:3}},a_bitangent:{array:new Float32Array(B.bitangents.array),props:{numComponents:3}},a_color:{array:new Float32Array(rr.array(...Array(B.indices.length).fill(rr.BLUE))),props:{numComponents:4,normalized:!0}},a_uv:{array:new Float32Array(B.uvs.array),props:{numComponents:2}}},indices:new Uint16Array(B.indices)},uniformBlocks:{worldViewBlock:{block:f,list:{u_world:{value:new Float32Array(J.array)},u_viewInverse:{value:new Float32Array(W.array)},u_worldInverseTranspose:{value:new Float32Array(J.clone().invert().transpose().array)},u_worldViewProjection:{value:new Float32Array(Z.clone().mult(J).array)}}},lightsBlock:{block:D,list:{u_lightWorldPos:{value:[1,6,-6]},u_lightColor:{value:[1,.8,.8,1]},u_ambient:{value:[0,0,0,1]}}},phongBlock:{block:g,list:{u_specular:{value:[1,1,1,1]},u_shininess:{value:50},u_specularFactor:{value:1}}}},uniforms:{u_diffuseMap:{value:p},u_normalMap:{value:G}}},et={attributes:{list:{a_position:{array:new Float32Array(d.vertices.array),props:{numComponents:3}}},indices:new Uint16Array(d.indices)},uniforms:{u_world:{value:new Float32Array(tt.array)},u_viewDirectionProjectionInverse:{value:new Float32Array(j.array)},u_skybox:{value:x}}},st={attributes:{list:{a_position:{array:new Float32Array(d.vertices.array),props:{numComponents:3}},a_uv:{array:new Float32Array(d.uvs.array),props:{numComponents:2}}},indices:new Uint16Array(d.indices)},uniforms:{u_world:{value:new Float32Array((new ar).setIdentity().values)},u_tex:{value:b}}};Qt.useProgram(_,L);const at=Zt.getPacketSetter(_,L,rt);Zt.setPacketValues(_,at,rt),Qt.useProgram(_,U);const nt=Zt.getPacketSetter(_,U,et);Zt.setPacketValues(_,nt,et);const Et=vt.createFramebuffer(_);vt.attachTexture(_,Et,{texTarget:yt.TEXTURE_2D,glTex:b.glTex,attachment:Nt.COLOR_ATTACHMENT0});const ot=Jt.getParameter(_,Ot.MAX_SAMPLES),At=$t.createRenderbuffer(_,{internalFormat:Ct.DEPTH24_STENCIL8,width:s.width,height:s.height,samples:ot}),Rt=$t.createRenderbuffer(_,{internalFormat:Ct.RGBA8,width:s.width,height:s.height,samples:ot});vt.attachRenderbuffers(_,Et,[{glRb:At.glRb,attachment:Nt.DEPTH_STENCIL_ATTACHMENT},{glRb:Rt.glRb,attachment:Nt.COLOR_ATTACHMENT0}]);const ht=vt.createFramebuffer(_);vt.attachTexture(_,ht,{texTarget:yt.TEXTURE_2D,glTex:b.glTex,attachment:Nt.COLOR_ATTACHMENT0}),Qt.useProgram(_,P);const ct=Zt.getPacketSetter(_,P,st);Zt.setPacketValues(_,ct,st),Jt.setViewport(_,0,0,_.canvas.width,_.canvas.height),Jt.enable(_,Tt.DEPTH_TEST),Jt.enable(_,Tt.CULL_FACE);let ut=0,It=0;await R.initialize(document.body),r=function(a){It=(a*=.001)-ut,ut=a,e=1/It,Jt.clearColor(_,rr.GREEN.valuesNormalized()),Jt.clear(_,_t.COLOR_BUFFER_BIT|_t.DEPTH_BUFFER_BIT),function(t,r,e){if(R.getMouseButtonDown(n.RIGHT)&&Sr.copy(R.getMouseButtonPosition()),R.getMouseButton(n.RIGHT)){const e=R.getMouseButtonPosition();if(!e.equals(Sr)){const s=e.x-Sr.x,_=e.y-Sr.y,a=new I([t.m41,t.m42,t.m43]),i=(a.clone().sub(r),new I([t.m11,t.m12,t.m13]).normalize()),n=or.fromMatrix(new sr(t.getUpper33())).normalize(),E=(new or).setFromAxisAngle(i,s),o=(new or).setFromAxisAngle(Tr.up,_),A=o.clone().mult(E.clone().mult(n).mult(E.clone().conjugate())).mult(o.clone().conjugate()),T=o.clone().mult(E.clone().mult(or.fromVector(a)).mult(E.clone().conjugate())).mult(o.clone().conjugate()).toVector();A.toMatrix(),t.m41=T.x,t.m42=T.y,t.m43=T.z,t.m41=T.x,t.m42=T.y,t.m43=T.z,t.m41=T.x,t.m42=T.y,t.m43=T.z,Sr.copy(e)}}}(W,Y),z.copy(W),q.copy(z).invert(),Z.copy(V).mult(q),j.copy(Z).invert(),vt.bindFramebuffer(_,Et),Jt.clear(_,_t.COLOR_BUFFER_BIT|_t.DEPTH_BUFFER_BIT),Qt.useProgram(_,L),Zt.setPacketValues(_,at,{uniformBlocks:{worldViewBlock:{block:f,list:{u_world:{value:new Float32Array(J.array)},u_viewInverse:{value:new Float32Array(z.array)},u_worldInverseTranspose:{value:new Float32Array(J.clone().invert().transpose().array)},u_worldViewProjection:{value:new Float32Array(Z.clone().mult(J).array)}}}}}),Jt.depthFunc(_,Dt.LESS),Zt.drawPacket(_,at),Qt.useProgram(_,U),Zt.setPacketValues(_,nt,{uniforms:{u_world:{value:new Float32Array(tt.array)},u_viewDirectionProjectionInverse:{value:new Float32Array(j.array)}}}),Jt.depthFunc(_,Dt.LEQUAL),Zt.drawPacket(_,nt),vt.blit(_,Et,ht,[0,0,s.width,s.height],[0,0,s.width,s.height],_t.COLOR_BUFFER_BIT,xt.LINEAR),vt.unbindFramebuffer(_),Qt.useProgram(_,P),Jt.depthFunc(_,Dt.LEQUAL),Zt.drawPacket(_,ct),R.clear(),t=requestAnimationFrame(r)},r(0)}()}let Sr=new E;async function Mr(){yr()}})(),main=r})();
//# sourceMappingURL=main.js.map